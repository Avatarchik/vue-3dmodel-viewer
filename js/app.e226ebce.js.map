{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/mixins/base-mixin.vue?04de","webpack:///./examples/components/GithubCorner.vue?9681","webpack:///./examples/App.vue?80d6","webpack:///./examples/components/GithubCorner.vue?51f5","webpack:///./examples/components/GithubCorner.vue","webpack:///./src/mixins/base-mixin.vue?09fd","webpack:///./src/controls/OrbitControls.js","webpack:///./src/utils/BufferGeometryUtils.js","webpack:///./src/utils/index.js","webpack:///src/mixins/base-mixin.vue","webpack:///./src/mixins/base-mixin.vue?7363","webpack:///./src/mixins/base-mixin.vue","webpack:///./src/loaders/DDSLoader.js","webpack:///./src/components/ModelViewer.vue","webpack:///./src/loaders/GLTFLoader.js","webpack:///src/components/ModelViewer.vue","webpack:///./src/components/ModelViewer.vue?63dc","webpack:///examples/App.vue","webpack:///./examples/App.vue?3d61","webpack:///./examples/App.vue","webpack:///./examples/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_base_mixin_vue_vue_type_style_index_0_id_42d22417_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GithubCorner_vue_vue_type_style_index_0_id_9ffada10_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_343e3538_render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","role","_m","lights","background-color","backgroundColor","show-controls","visible-controls","visibleControls","src","cubemap","statsjs","datgui","staticRenderFns","_v","GithubCornervue_type_template_id_9ffada10_scoped_true_render","href","aria-label","staticStyle","fill","color","position","top","border","right","z-index","width","height","viewBox","aria-hidden","transform-origin","GithubCornervue_type_template_id_9ffada10_scoped_true_staticRenderFns","script","component","componentNormalizer","GithubCorner","base_mixinvue_type_template_id_42d22417_scoped_true_render","class","showHelp","on","click","toggleHelp","ref","id","directives","rawName","expression","data-tooltip","downloadModel","toggleFullscreen","fullscreen","_t","base_mixinvue_type_template_id_42d22417_scoped_true_staticRenderFns","OrbitControls_OrbitControls","domElement","undefined","document","enabled","target","three_module","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","ZOOM","MIDDLE","PAN","target0","clone","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY_PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","left","clientWidth","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","x","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDollyPan","dx","dy","sqrt","handleTouchMoveRotate","handleTouchMoveDollyPan","handleTouchEnd","preventDefault","button","addEventListener","stopPropagation","constructor","defineProperties","center","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","BufferGeometryUtils","computeTangents","geometry","index","attributes","normal","uv","indices","array","positions","normals","uvs","nVertices","tangent","addAttribute","Float32Array","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","groups","start","count","il","group","jl","handleTriangle","w","test","tmp","tmp2","n2","handleVertex","a","b","fromArray","x1","x2","y1","y2","z1","z","z2","s1","s2","t1","t2","normalize","mergeBufferGeometries","geometries","useGroups","isIndexed","attributesUsed","Set","morphAttributesUsed","morphAttributes","mergedGeometry","has","userData","mergedUserData","addGroup","indexOffset","mergedIndex","getX","setIndex","mergedAttribute","mergeBufferAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","itemSize","normalized","arrayLength","attribute","isInterleavedBufferAttribute","box","getCenter","setFromObject","suportWebGL","canvas","createElement","WebGLRenderingContext","getContext","e","base_mixinvue_type_script_lang_js","props","String","modelType","default","rotation","Array","backgroundAlpha","Number","cameraPosition","cameraRotation","cameraUp","cameraLookAt","showControls","Boolean","help","download","controllable","size","initSize","wrapper","camera","scene","renderer","controls","allLights","envMap","loader","reqId","stats","gui","mounted","$el","offsetWidth","offsetHeight","antialias","alpha","$refs","shadowMap","gammaOutput","load","onKeydown","onResize","animate","beforeDestroy","cancelAnimationFrame","watch","deep","handler","val","updateLights","updateCubemaps","updateCamera","updateRenderer","updateControls","updateStats","updateDatGui","computed","methods","log","which","resetCameraView","_this","$nextTick","stats_min","dom","style","appendChild","getElementById","remove","_this2","destroy","dat_gui_module","autoPlace","parameters","model","wireframe","_folder1","addFolder","modelX","step","listen","modelY","modelZ","onChange","modelRX","modelRY","modelRZ","modelWireframe","traverse","child","isMesh","material","open","updateModel","setSize","setPixelRatio","devicePixelRatio","setClearColor","getHex","setClearAlpha","background","aspect","_this3","forEach","item","toLowerCase","light","intensity","_color","_intensity","decay","_color2","_intensity2","skyColor","groundColor","_intensity3","requestAnimationFrame","render","_this4","screenfull","_this5","getObject","arguments","process","addObject","$emit","xhr","loaded","total","err","negate","mixins_base_mixinvue_type_script_lang_js","base_mixin_component","base_mixin","DDSLoader_DDSLoader","DDSLoader","manager","_parser","parse","buffer","loadMipmaps","dds","mipmaps","format","mipmapCount","DDS_MAGIC","DDSD_MIPMAPCOUNT","DDSCAPS2_CUBEMAP","DDSCAPS2_CUBEMAP_POSITIVEX","DDSCAPS2_CUBEMAP_NEGATIVEX","DDSCAPS2_CUBEMAP_POSITIVEY","DDSCAPS2_CUBEMAP_NEGATIVEY","DDSCAPS2_CUBEMAP_POSITIVEZ","DDSCAPS2_CUBEMAP_NEGATIVEZ","DDPF_FOURCC","fourCCToInt32","charCodeAt","int32ToFourCC","fromCharCode","loadARGBMip","dataOffset","dataLength","srcBuffer","Uint8Array","byteArray","dst","g","blockBytes","FOURCC_DXT1","FOURCC_DXT3","FOURCC_DXT5","FOURCC_ETC1","headerLengthInt","off_magic","off_size","off_flags","off_height","off_width","off_mipmapCount","off_pfFlags","off_pfFourCC","off_RGBBitCount","off_RBitMask","off_GBitMask","off_BBitMask","off_ABitMask","off_caps2","header","Int32Array","error","fourCC","isRGBAUncompressed","caps2","isCubemap","faces","face","mipmap","ModelViewer_render","ModelViewer_staticRenderFns","GLTFLoader_GLTFLoader","GLTFLoader","dracoLoader","GLTFRegistry","objects","removeAll","crossOrigin","url","onLoad","onProgress","onError","path","extractUrlBase","setResponseType","setCrossOrigin","setPath","setDRACOLoader","content","extensions","magic","decodeText","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","version","Error","extensionsUsed","extensionName","extensionsRequired","KHR_LIGHTS","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","indexOf","parser","GLTFParser","scenes","cameras","animations","glTF","addUnknownExtensionsToUserData","ddsLoader","extension","lightId","lightNode","spot","innerConeAngle","outerConeAngle","penumbra","getMaterialType","extendParams","materialParams","pending","opacity","metallicRoughness","pbrMetallicRoughness","isArray","baseColorFactor","baseColorTexture","assignTexture","Promise","all","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","headerView","DataView","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","specularGlossinessParams","params","pbrSpecularGlossiness","shader","uniforms","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","fragmentShader","replace","roughness","metalness","roughnessMap","metalnessMap","specular","setHex","glossiness","specularMap","glossinessMap","vertexShader","defines","STANDARD","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossIndex","createMaterial","fog","transparent","isGLTFSpecularGlossinessMaterial","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMapIntensity","refractionRatio","derivatives","cloneMaterial","source","refreshUniforms","uvScaleMap","diffuse","isWebGLRenderTarget","texture","matrixAutoUpdate","updateMatrix","uvTransform","flipEnvMap","isCubeTexture","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","getDependency","then","resolve","decodeDracoFile","interpolate_","i1","t0","values","stride","valueSize","stride2","stride3","td","pp","ppp","offset1","offset0","s0","s3","p0","m0","p1","m1","WEBGL_CONSTANTS","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","UNSIGNED_BYTE","UNSIGNED_SHORT","5120","Int8Array","5121","5122","Int16Array","5123","Uint16Array","5125","Uint32Array","5126","WEBGL_FILTERS","9728","9729","9984","9985","9986","9987","WEBGL_WRAPPINGS","33071","33648","10497","WEBGL_TEXTURE_FORMATS","6406","6407","6408","6409","6410","WEBGL_TEXTURE_DATATYPES","32819","32820","33635","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TEXCOORD_0","TEXCOORD0","TEXCOORD","TEXCOORD_1","COLOR_0","COLOR0","COLOR","WEIGHTS_0","WEIGHT","JOINTS_0","JOINT","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","STEP","ALPHA_MODES","OPAQUE","MASK","BLEND","resolveURL","createDefaultMaterial","depthTest","side","knownExtensions","objectDef","gltfExtensions","addMorphTargets","targets","hasMorphPosition","hasMorphNormal","morphPositions","morphNormals","positionAttribute","cloneBufferAttribute","setXYZ","getY","getZ","normalAttribute","updateMorphTargets","mesh","meshDef","morphTargetInfluences","extras","targetNames","morphTargetDictionary","isPrimitiveEqual","isObjectEqual","isArrayEqual","getCachedGeometry","cache","newPrimitive","cached","promise","getCachedCombinedGeometry","baseGeometries","getCachedMultiPassGeometry","primitives","baseGeometry","getW","isMultiPassGeometry","primitive0","targets0","options","primitiveCache","multiplePrimitivesCache","multiPassGeometryCache","textureLoader","fileLoader","addPrimitiveAttributes","primitiveDef","gltfAttributeName","threeAttributeName","bufferAttribute","markDefs","getMultiDependencies","dependencies","catch","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","getDependencies","defs","def","types","results","pendings","bufferIndex","bufferDef","buffers","uri","reject","bufferViewDef","bufferViews","accessorIndex","sparse","pendingBufferViews","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibCacheKey","ib","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setArray","setX","setY","setZ","setW","textureIndex","URL","webkitURL","textureDef","textures","textureExtensions","images","sourceURI","isObjectURL","blob","Blob","mimeType","createObjectURL","Handlers","revokeObjectURL","flipY","internalFormat","samplers","sampler","magFilter","minFilter","wrapS","wrapT","textureName","materialIndex","materialType","materialDef","materials","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","alphaMode","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","loadGeometries","originalPrimitives","isMultiPass","geometryPromise","accessor","meshIndex","originalMaterials","isMultiMaterial","drawMode","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","isLine","lineMaterial","cachedMaterial","skinning","vertexColors","flatShading","morphTargets","uv2","onBeforeRender","cameraIndex","cameraDef","radToDeg","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","tracks","channels","channel","node","input","output","inputAccessor","outputAccessor","TypedKeyframeTrack","targetName","interpolation","track","arraySlice","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","isGroup","children","sanitizeNodeName","applyMatrix","buildNodeHierachy","nodeId","parentObject","allNodes","bones","boneInverses","jointId","jointNode","mat","matrixWorld","sceneIndex","sceneDef","nodeIds","ModelViewervue_type_script_lang_js","mixins","components_ModelViewervue_type_script_lang_js","ModelViewer_component","ModelViewer","Appvue_type_script_lang_js","components","examples_Appvue_type_script_lang_js","App_component","App","vue_runtime_esm","config","productionTip","h","$mount"],"mappings":"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","file":"js/app.e226ebce.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vue-3dmodel-viewer/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"wx8R\",0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=style&index=0&id=42d22417&scoped=true&lang=css\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=style&index=0&id=42d22417&scoped=true&lang=css\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GithubCorner.vue?vue&type=style&index=0&id=9ffada10&scoped=true&lang=css\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GithubCorner.vue?vue&type=style&index=0&id=9ffada10&scoped=true&lang=css\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('GithubCorner'),_c('main',{staticClass:\"container\",attrs:{\"role\":\"main\"}},[_vm._m(0),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('ModelViewer',{attrs:{\"lights\":_vm.lights,\"background-color\":_vm.backgroundColor,\"show-controls\":true,\"visible-controls\":_vm.visibleControls,\"src\":_vm.src,\"cubemap\":_vm.cubemap,\"statsjs\":_vm.statsjs,\"datgui\":_vm.datgui}})],1)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-5 text-center\"},[_c('h2',[_vm._v(\"Vue.JS 3D Model Viewer Example\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"github-corner\",attrs:{\"href\":\"https://github.com/XpycT/vue-3dmodel-viewer\",\"aria-label\":\"View source on Github\"}},[_c('svg',{staticStyle:{\"fill\":\"#151513\",\"color\":\"#fff\",\"position\":\"absolute\",\"top\":\"0\",\"border\":\"0\",\"right\":\"0\",\"z-index\":\"20\"},attrs:{\"width\":\"80\",\"height\":\"80\",\"viewBox\":\"0 0 250 250\",\"aria-hidden\":\"true\"}},[_c('path',{attrs:{\"d\":\"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z\"}}),_c('path',{staticClass:\"octo-arm\",staticStyle:{\"transform-origin\":\"130px 106px\"},attrs:{\"d\":\"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2\",\"fill\":\"currentColor\"}}),_c('path',{staticClass:\"octo-body\",attrs:{\"d\":\"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z\",\"fill\":\"currentColor\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./GithubCorner.vue?vue&type=template&id=9ffada10&scoped=true\"\nvar script = {}\nimport style0 from \"./GithubCorner.vue?vue&type=style&index=0&id=9ffada10&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9ffada10\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.suportWebGL)?_c('div',{staticClass:\"model-viewer\"},[_c('div',{staticClass:\"overlays\"},[_c('div',{staticClass:\"overlay help\",class:_vm.showHelp ? '' : 'hidden'},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"},on:{\"click\":_vm.toggleHelp}},[_c('i',{staticClass:\"fas fa-times\"})]),_vm._m(0)])]),_c('div',{staticClass:\"webgl\"},[_c('div',{ref:\"datgui\",attrs:{\"id\":\"datgui\"}}),_c('canvas',{ref:\"canvas\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showControls),expression:\"showControls\"}],staticClass:\"gui enabled\"},[_c('div',{staticClass:\"controls\"},[_c('div',{staticClass:\"general-controls\"},[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visibleControls.help),expression:\"visibleControls.help\"}],staticClass:\"control control-tooltip\",attrs:{\"data-tooltip\":\"Help\"},on:{\"click\":_vm.toggleHelp}},[_c('i',{staticClass:\"fas fa-question\"})]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visibleControls.download),expression:\"visibleControls.download\"}],staticClass:\"control control-tooltip\",attrs:{\"data-tooltip\":\"Download\"},on:{\"click\":_vm.downloadModel}},[_c('i',{staticClass:\"fas fa-download\"})]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visibleControls.fullscreen),expression:\"visibleControls.fullscreen\"}],staticClass:\"control control-tooltip tooltip-right-bound\",attrs:{\"data-tooltip\":\"Fullscreen\"},on:{\"click\":_vm.toggleFullscreen}},[_c('i',{staticClass:\"fas\",class:_vm.fullscreen ? 'fa-compress' : 'fa-expand-arrows-alt'})])])])])])]):_c('div',[_vm._t(\"error\",[_vm._v(\"\\n    Your graphics card does not seem to support\\n    \"),_c('a',{staticStyle:{\"color\":\"#000\"},attrs:{\"href\":\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"}},[_vm._v(\"WebGL\")]),_vm._v(\".\"),_c('br'),_vm._v(\"\\n    Find out how to get it \"),_c('a',{staticStyle:{\"color\":\"#000\"},attrs:{\"href\":\"http://get.webgl.org/\"}},[_vm._v(\"here\")]),_vm._v(\".\\n  \")])],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"inner\"},[_c('div',{staticClass:\"tip\"},[_c('div',[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',[_c('b',[_vm._v(\"Orbit around\")]),_c('div',[_vm._v(\"Left mouse + drag or\"),_c('br'),_vm._v(\"One finger drag (touch)\")])])]),_c('div',{staticClass:\"tip\"},[_c('div',[_c('i',{staticClass:\"fas fa-search-plus\"})]),_c('div',[_c('b',[_vm._v(\"Zoom\")]),_c('div',[_vm._v(\"Middle mouse or mousewheel\"),_c('br'),_vm._v(\"Two-finger spread or squish (touch)\")])])]),_c('div',{staticClass:\"tip\"},[_c('div',[_c('i',{staticClass:\"fas fa-arrows-alt\"})]),_c('div',[_c('b',[_vm._v(\"Pan\")]),_c('div',[_vm._v(\"Right mouse + drag or arraow keys\"),_c('br'),_vm._v(\"Two fingers drag (touch)\")])])])])}]\n\nexport { render, staticRenderFns }","/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or arrow keys / touch: two-finger move\r\nimport * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/controls/OrbitControls.js\r\n\r\nconst OrbitControls = function ( object, domElement ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new THREE.Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.25;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.panSpeed = 1.0;\r\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new THREE.Vector3();\r\n\t\tvar lastQuaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new THREE.Spherical();\r\n\tvar sphericalDelta = new THREE.Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new THREE.Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new THREE.Vector2();\r\n\tvar rotateEnd = new THREE.Vector2();\r\n\tvar rotateDelta = new THREE.Vector2();\r\n\r\n\tvar panStart = new THREE.Vector2();\r\n\tvar panEnd = new THREE.Vector2();\r\n\tvar panDelta = new THREE.Vector2();\r\n\r\n\tvar dollyStart = new THREE.Vector2();\r\n\tvar dollyEnd = new THREE.Vector2();\r\n\tvar dollyDelta = new THREE.Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tif ( scope.screenSpacePanning === true ) {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownRotate' );\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownDolly' );\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownPan' );\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveDolly' );\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMovePan' );\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n// eslint-disable-next-line no-unused-vars\r\n\tfunction handleMouseUp( event ) {\r\n\r\n\t\t// console.log( 'handleMouseUp' );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t// console.log( 'handleMouseWheel' );\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\t//console.log( 'handleKeyDown' );\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartRotate' );\r\n\r\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartDollyPan' );\r\n\r\n\t\tif ( scope.enableZoom ) {\r\n\r\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\tdollyStart.set( 0, distance );\r\n\r\n\t\t}\r\n\r\n\t\tif ( scope.enablePan ) {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveDollyPan' );\r\n\r\n\t\tif ( scope.enableZoom ) {\r\n\r\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n\t\t\tdollyIn( dollyDelta.y );\r\n\r\n\t\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\t}\r\n\r\n\t\tif ( scope.enablePan ) {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanEnd.set( x, y );\r\n\r\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\t\tpanStart.copy( panEnd );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n// eslint-disable-next-line no-unused-vars\r\n\tfunction handleTouchEnd( event ) {\r\n\r\n\t\t//console.log( 'handleTouchEnd' );\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase scope.mouseButtons.ORBIT:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.ZOOM:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\t// one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchStartDollyPan( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1: // one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: // two-fingered touch: dolly-pan\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\r\n\r\n\t\t\t\thandleTouchMoveDollyPan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\twindow.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\nObject.defineProperties( OrbitControls.prototype, {\r\n\r\n\tcenter: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\r\n\t\t\treturn this.target;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// backward compatibility\r\n\r\n\tnoZoom: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\treturn ! this.enableZoom;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\tthis.enableZoom = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoRotate: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\treturn ! this.enableRotate;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\tthis.enableRotate = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoPan: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\treturn ! this.enablePan;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\tthis.enablePan = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoKeys: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\treturn ! this.enableKeys;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\tthis.enableKeys = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstaticMoving: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\treturn ! this.enableDamping;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\tthis.enableDamping = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdynamicDampingFactor: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\treturn this.dampingFactor;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\tthis.dampingFactor = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nexport { OrbitControls };","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\nimport * as THREE from 'three';\r\n\r\nconst BufferGeometryUtils = {\r\n\r\n\tcomputeTangents: function ( geometry ) {\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\t// based on http://www.terathon.com/code/tangent.html\r\n\t\t// (per vertex tangents)\r\n\r\n\t\tif ( index === null ||\r\n        attributes.position === undefined ||\r\n        attributes.normal === undefined ||\r\n        attributes.uv === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = index.array;\r\n\t\tvar positions = attributes.position.array;\r\n\t\tvar normals = attributes.normal.array;\r\n\t\tvar uvs = attributes.uv.array;\r\n\r\n\t\tvar nVertices = positions.length / 3;\r\n\r\n\t\tif ( attributes.tangent === undefined ) {\r\n\r\n\t\t\tgeometry.addAttribute( 'tangent', new THREE.BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar tangents = attributes.tangent.array;\r\n\r\n\t\tvar tan1 = [], tan2 = [];\r\n\r\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\r\n\r\n\t\t\ttan1[ i ] = new THREE.Vector3();\r\n\t\t\ttan2[ i ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tvar vA = new THREE.Vector3(),\r\n\t\t\tvB = new THREE.Vector3(),\r\n\t\t\tvC = new THREE.Vector3(),\r\n\r\n\t\t\tuvA = new THREE.Vector2(),\r\n\t\t\tuvB = new THREE.Vector2(),\r\n\t\t\tuvC = new THREE.Vector2(),\r\n\r\n\t\t\tsdir = new THREE.Vector3(),\r\n\t\t\ttdir = new THREE.Vector3();\r\n\r\n\t\tfunction handleTriangle( a, b, c ) {\r\n\r\n\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\r\n\t\t\tvar x1 = vB.x - vA.x;\r\n\t\t\tvar x2 = vC.x - vA.x;\r\n\r\n\t\t\tvar y1 = vB.y - vA.y;\r\n\t\t\tvar y2 = vC.y - vA.y;\r\n\r\n\t\t\tvar z1 = vB.z - vA.z;\r\n\t\t\tvar z2 = vC.z - vA.z;\r\n\r\n\t\t\tvar s1 = uvB.x - uvA.x;\r\n\t\t\tvar s2 = uvC.x - uvA.x;\r\n\r\n\t\t\tvar t1 = uvB.y - uvA.y;\r\n\t\t\tvar t2 = uvC.y - uvA.y;\r\n\r\n\t\t\tvar r = 1.0 / ( s1 * t2 - s2 * t1 );\r\n\r\n\t\t\tsdir.set(\r\n\t\t\t\t( t2 * x1 - t1 * x2 ) * r,\r\n\t\t\t\t( t2 * y1 - t1 * y2 ) * r,\r\n\t\t\t\t( t2 * z1 - t1 * z2 ) * r\r\n\t\t\t);\r\n\r\n\t\t\ttdir.set(\r\n\t\t\t\t( s1 * x2 - s2 * x1 ) * r,\r\n\t\t\t\t( s1 * y2 - s2 * y1 ) * r,\r\n\t\t\t\t( s1 * z2 - s2 * z1 ) * r\r\n\t\t\t);\r\n\r\n\t\t\ttan1[ a ].add( sdir );\r\n\t\t\ttan1[ b ].add( sdir );\r\n\t\t\ttan1[ c ].add( sdir );\r\n\r\n\t\t\ttan2[ a ].add( tdir );\r\n\t\t\ttan2[ b ].add( tdir );\r\n\t\t\ttan2[ c ].add( tdir );\r\n\r\n\t\t}\r\n\r\n    let groups = geometry.groups;\r\n\r\n    if ( groups.length === 0 ) {\r\n\r\n\t\t\tgroups = [ {\r\n\t\t\t\tstart: 0,\r\n\t\t\t\tcount: indices.length\r\n\t\t\t} ];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\r\n\r\n\t\t\tlet group = groups[ i ];\r\n\r\n\t\t\tlet start = group.start;\r\n      let count = group.count;\r\n\r\n      for ( let j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\thandleTriangle(\r\n\t\t\t\t\tindices[ j + 0 ],\r\n\t\t\t\t\tindices[ j + 1 ],\r\n\t\t\t\t\tindices[ j + 2 ]\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar tmp = new THREE.Vector3(), tmp2 = new THREE.Vector3();\r\n\t\tvar n = new THREE.Vector3(), n2 = new THREE.Vector3();\r\n\t\tvar w, t, test;\r\n\r\n\t\tfunction handleVertex( v ) {\r\n\r\n\t\t\tn.fromArray( normals, v * 3 );\r\n\t\t\tn2.copy( n );\r\n\r\n\t\t\tt = tan1[ v ];\r\n\r\n\t\t\t// Gram-Schmidt orthogonalize\r\n\r\n\t\t\ttmp.copy( t );\r\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\r\n\r\n\t\t\t// Calculate handedness\r\n\r\n\t\t\ttmp2.crossVectors( n2, t );\r\n\t\t\ttest = tmp2.dot( tan2[ v ] );\r\n\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\r\n\r\n\t\t\ttangents[ v * 4 ] = tmp.x;\r\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\r\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\r\n\t\t\ttangents[ v * 4 + 3 ] = w;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\r\n\r\n\t\t\tlet group = groups[ i ];\r\n\r\n\t\t\tlet start = group.start;\r\n\t\t\tlet count = group.count;\r\n\r\n\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\thandleVertex( indices[ j + 0 ] );\r\n\t\t\t\thandleVertex( indices[ j + 1 ] );\r\n\t\t\t\thandleVertex( indices[ j + 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @param  {Array<THREE.BufferGeometry>} geometries\r\n\t * @return {THREE.BufferGeometry}\r\n\t */\r\n\tmergeBufferGeometries: function ( geometries, useGroups ) {\r\n\r\n\t\tvar isIndexed = geometries[ 0 ].index !== null;\r\n\r\n\t\tvar attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\r\n\t\tvar morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\r\n\r\n\t\tvar attributes = {};\r\n\t\tvar morphAttributes = {};\r\n\r\n\t\tvar mergedGeometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\r\n\r\n\t\t\tvar geometry = geometries[ i ];\r\n\r\n\t\t\t// ensure that all geometries are indexed, or none\r\n\r\n\t\t\tif ( isIndexed !== ( geometry.index !== null ) ) return null;\r\n\r\n\t\t\t// gather attributes, exit early if they're different\r\n\r\n\t\t\tfor ( let name in geometry.attributes ) {\r\n\r\n\t\t\t\tif ( ! attributesUsed.has( name ) ) return null;\r\n\r\n\t\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\r\n\r\n\t\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// gather morph attributes, exit early if they're different\r\n\r\n\t\t\tfor ( let name in geometry.morphAttributes ) {\r\n\r\n\t\t\t\tif ( ! morphAttributesUsed.has( name ) ) return null;\r\n\r\n\t\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\r\n\r\n\t\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// gather .userData\r\n\r\n\t\t\tmergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\r\n\t\t\tmergedGeometry.userData.mergedUserData.push( geometry.userData );\r\n\r\n\t\t\tif ( useGroups ) {\r\n\r\n\t\t\t\tvar count;\r\n\r\n\t\t\t\tif ( isIndexed ) {\r\n\r\n\t\t\t\t\tcount = geometry.index.count;\r\n\r\n\t\t\t\t} else if ( geometry.attributes.position !== undefined ) {\r\n\r\n\t\t\t\t\tcount = geometry.attributes.position.count;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmergedGeometry.addGroup( offset, count, i );\r\n\r\n\t\t\t\toffset += count;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// merge indices\r\n\r\n\t\tif ( isIndexed ) {\r\n\r\n\t\t\tvar indexOffset = 0;\r\n\t\t\tvar mergedIndex = [];\r\n\r\n\t\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\r\n\r\n\t\t\t\tlet index = geometries[ i ].index;\r\n\r\n\t\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\r\n\r\n\t\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tindexOffset += geometries[ i ].attributes.position.count;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmergedGeometry.setIndex( mergedIndex );\r\n\r\n\t\t}\r\n\r\n\t\t// merge attributes\r\n\r\n\t\tfor ( let name in attributes ) {\r\n\r\n\t\t\tvar mergedAttribute = this.mergeBufferAttributes( attributes[ name ] );\r\n\r\n\t\t\tif ( ! mergedAttribute ) return null;\r\n\r\n\t\t\tmergedGeometry.addAttribute( name, mergedAttribute );\r\n\r\n\t\t}\r\n\r\n\t\t// merge morph attributes\r\n\r\n\t\tfor ( let name in morphAttributes ) {\r\n\r\n\t\t\tvar numMorphTargets = morphAttributes[ name ][ 0 ].length;\r\n\r\n\t\t\tif ( numMorphTargets === 0 ) break;\r\n\r\n\t\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\r\n\t\t\tmergedGeometry.morphAttributes[ name ] = [];\r\n\r\n\t\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\r\n\r\n\t\t\t\tvar morphAttributesToMerge = [];\r\n\r\n\t\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\r\n\r\n\t\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mergedMorphAttribute = this.mergeBufferAttributes( morphAttributesToMerge );\r\n\r\n\t\t\t\tif ( ! mergedMorphAttribute ) return null;\r\n\r\n\t\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn mergedGeometry;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @param {Array<THREE.BufferAttribute>} attributes\r\n\t * @return {THREE.BufferAttribute}\r\n\t */\r\n\tmergeBufferAttributes: function ( attributes ) {\r\n\r\n\t\tvar TypedArray;\r\n\t\tvar itemSize;\r\n\t\tvar normalized;\r\n\t\tvar arrayLength = 0;\r\n\r\n\t\tfor ( let i = 0; i < attributes.length; ++ i ) {\r\n\r\n\t\t\tvar attribute = attributes[ i ];\r\n\r\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) return null;\r\n\r\n\t\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\r\n\t\t\tif ( TypedArray !== attribute.array.constructor ) return null;\r\n\r\n\t\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\r\n\t\t\tif ( itemSize !== attribute.itemSize ) return null;\r\n\r\n\t\t\tif ( normalized === undefined ) normalized = attribute.normalized;\r\n\t\t\tif ( normalized !== attribute.normalized ) return null;\r\n\r\n\t\t\tarrayLength += attribute.array.length;\r\n\r\n\t\t}\r\n\r\n\t\tvar array = new TypedArray( arrayLength );\r\n\t\tvar offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < attributes.length; ++ i ) {\r\n\r\n\t\t\tarray.set( attributes[ i ].array, offset );\r\n\r\n\t\t\toffset += attributes[ i ].array.length;\r\n\r\n\t\t}\r\n\r\n\t\treturn new THREE.BufferAttribute( array, itemSize, normalized );\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { BufferGeometryUtils }\r\n","import {Box3, Vector3} from 'three';\r\nimport {BufferGeometryUtils} from './BufferGeometryUtils'\r\n\r\n\r\nconst box = new Box3();\r\n\r\nfunction getSize(object) {\r\n  box.setFromObject(object);\r\n  return box.getSize();\r\n}\r\n\r\nfunction getCenter(object) {\r\n  box.setFromObject(object);\r\n  return box.getCenter(new Vector3());\r\n}\r\n\r\nexport default {\r\n  BufferGeometryUtils,\r\n  getSize, getCenter\r\n}\r\n\r\nexport {\r\n  BufferGeometryUtils,\r\n  getSize, getCenter\r\n}\r\n","<script>\r\n  import {\r\n    Color,\r\n    Vector3,\r\n    Object3D,\r\n    Scene,\r\n    WebGLRenderer,\r\n    PerspectiveCamera,\r\n    AmbientLight,\r\n    PointLight,\r\n    DirectionalLight,\r\n    HemisphereLight,\r\n    CubeTextureLoader,\r\n  } from 'three'\r\n\r\n  import {OrbitControls} from '../controls/OrbitControls'\r\n\r\n  import { getCenter } from '../utils'\r\n\r\n  import * as screenfull from 'screenfull'\r\n\r\n  import * as Stats from 'stats.js'\r\n  import * as dat from 'dat.gui'\r\n\r\n  const suportWebGL = (() => {\r\n    try {\r\n      let canvas = document.createElement('canvas');\r\n      return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  })();\r\n\r\n  export default {\r\n    props: {\r\n      src: {\r\n        type: String\r\n      },\r\n      modelType: {\r\n        type: String\r\n      },\r\n      position: {\r\n        type: Object,\r\n        default() {\r\n          return { x: 0, y: 0, z: 0 }\r\n        }\r\n      },\r\n      rotation: {\r\n        type: Object,\r\n        default() {\r\n          return { x: 0, y: 0, z: 0 }\r\n        }\r\n      },\r\n      scale: {\r\n        type: Object,\r\n        default() {\r\n          return { x: 1, y: 1, z: 1 }\r\n        }\r\n      },\r\n      lights: {\r\n        type: Array,\r\n        default() {\r\n          return [\r\n            {\r\n              type: 'ambient',\r\n              color: 0x1e1e23\r\n            },\r\n            {\r\n              type: 'directional',\r\n              color: 0xcfcfcf,\r\n              position: new Vector3(20, 40, -15)\r\n            }\r\n          ];\r\n        }\r\n      },\r\n      backgroundColor: {\r\n        default: 0x444444\r\n      },\r\n      backgroundAlpha: {\r\n        type: Number,\r\n        default: 1\r\n      },\r\n      cameraPosition: {\r\n        type: Object\r\n      },\r\n      cameraRotation: {\r\n        type: Object\r\n      },\r\n      cameraUp: {\r\n        type: Object\r\n      },\r\n      cameraLookAt: {\r\n        type: Object\r\n      },\r\n      showControls: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      visibleControls: {\r\n        type: Object,\r\n        default() {\r\n          return {\r\n            help: true,\r\n            download: true,\r\n            fullscreen: true\r\n          }\r\n        }\r\n      },\r\n      controllable: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      cubemap: {\r\n        type: Array,\r\n        default() {\r\n          return []\r\n        }\r\n      },\r\n      statsjs: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      datgui: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        suportWebGL,\r\n        fullscreen: false,\r\n        showHelp: false,\r\n        size: {\r\n          width: this.width,\r\n          height: this.height\r\n        },\r\n        initSize: {\r\n          width: 0,\r\n          height: 0\r\n        },\r\n        object: null,\r\n        wrapper: new Object3D(),\r\n        camera: new PerspectiveCamera(45, 1, 0.01, 100000),\r\n        scene: new Scene(),\r\n        renderer: null,\r\n        controls: null,\r\n        allLights: [],\r\n        envMap: null,\r\n        loader: null,\r\n        reqId: null,    // requestAnimationFrame id\r\n        stats: null,\r\n        gui: null\r\n      }\r\n    },\r\n    mounted() {\r\n      if (this.width === undefined || this.height === undefined) {\r\n        this.size = {\r\n          width: this.$el.offsetWidth,\r\n          height: this.$el.offsetHeight\r\n        }\r\n      }\r\n      this.initSize = this.size;\r\n\r\n      this.renderer = new WebGLRenderer({antialias: true, alpha: true, canvas: this.$refs.canvas});\r\n      this.renderer.shadowMap.enabled = false;\r\n      this.renderer.gammaOutput = false;\r\n\r\n      this.scene.add( this.wrapper );\r\n\r\n      this.load();\r\n      this.update();\r\n\r\n      window.addEventListener( 'keydown', this.onKeydown, false );\r\n      window.addEventListener('resize', this.onResize, false);\r\n\r\n      this.animate();\r\n    },\r\n    beforeDestroy() {\r\n      cancelAnimationFrame(this.reqId);\r\n\r\n      window.removeEventListener( 'keydown', this.onKeydown, false );\r\n      window.removeEventListener('resize', this.onResize, false);\r\n    },\r\n    watch: {\r\n      src() {\r\n        this.load();\r\n      },\r\n      rotation: {\r\n        deep: true,\r\n        handler( val ) {\r\n          if ( !this.object ) return;\r\n          this.object.rotation.set( val.x, val.y, val.z );\r\n        }\r\n      },\r\n      position: {\r\n        deep: true,\r\n        handler( val ) {\r\n          if ( !this.object ) return;\r\n          this.object.position.set( val.x, val.y, val.z );\r\n        }\r\n      },\r\n      scale: {\r\n        deep: true,\r\n        handler( val ) {\r\n          if ( !this.object ) return;\r\n          this.object.scale.set( val.x, val.y, val.z );\r\n        }\r\n      },\r\n      lights: {\r\n        deep: true,\r\n        handler() {\r\n          this.updateLights();\r\n        }\r\n      },\r\n      cubemap: {\r\n        deep: true,\r\n        handler() {\r\n          this.updateCubemaps();\r\n        }\r\n      },\r\n      size: {\r\n        deep: true,\r\n        handler() {\r\n          this.updateCamera();\r\n          this.updateRenderer();\r\n        }\r\n      },\r\n      controllable() {\r\n        this.updateControls();\r\n      },\r\n      backgroundAlpha() {\r\n        this.updateRenderer();\r\n      },\r\n      backgroundColor() {\r\n        this.updateRenderer();\r\n      },\r\n      statsjs() {\r\n        this.updateStats();\r\n      },\r\n      datgui() {\r\n        this.updateDatGui();\r\n      }\r\n    },\r\n    computed: {},\r\n    methods: {\r\n      onKeydown(event) {\r\n        console.log(event.which);\r\n        if(event.which === 32 ) { // space\r\n          this.resetCameraView();\r\n        }\r\n      },\r\n      onResize() {\r\n        if (this.width === undefined || this.height === undefined) {\r\n          this.$nextTick(() => {\r\n            this.size = {\r\n              width: this.$el.offsetWidth,\r\n              height: this.$el.offsetHeight\r\n            }\r\n          })\r\n        }\r\n      },\r\n      update() {\r\n        this.updateRenderer();\r\n        this.updateCubemaps();\r\n        this.updateCamera();\r\n        this.updateLights();\r\n        this.updateControls();\r\n        this.updateStats();\r\n        this.updateDatGui();\r\n      },\r\n      updateStats(){\r\n        if(!this.statsjs) {\r\n          if(document.getElementById('stats-panel')) document.getElementById('stats-panel').remove();\r\n\r\n          return;\r\n        }\r\n\r\n        this.stats = new Stats();\r\n        this.stats.dom.id = 'stats-panel';\r\n        this.stats.dom.style.position = 'absolute';\r\n        this.$el.appendChild(this.stats.dom);\r\n      },\r\n      updateDatGui(){\r\n\r\n        if(!this.datgui) return;\r\n\r\n        if(this.gui !== null) this.gui.destroy();\r\n\r\n        this.gui = new dat.GUI({autoPlace: false});\r\n        this.$refs.datgui.appendChild(this.gui.domElement);\r\n\r\n        let parameters =\r\n          {\r\n            model: {\r\n              position: { x: 0, y: 0, z: 0 },\r\n              rotation: { x: 0, y: 0, z: 0 },\r\n              wireframe: false\r\n            }\r\n          };\r\n\r\n        let _folder1 = this.gui.addFolder('Model');\r\n        let modelX = _folder1.add( parameters.model.position, 'x' ).name('position x').min(-200).max(200).step(1).listen();\r\n        let modelY = _folder1.add( parameters.model.position, 'y' ).name('position y').min(-200).max(200).step(1).listen();\r\n        let modelZ = _folder1.add( parameters.model.position, 'z' ).name('position z').min(-200).max(200).step(1).listen();\r\n\r\n        modelX.onChange(value =>  this.object.position.x = value * Math.PI / 180 );\r\n        modelY.onChange(value =>  this.object.position.y = value * Math.PI / 180 );\r\n        modelZ.onChange(value =>  this.object.position.z = value * Math.PI / 180 );\r\n\r\n        let modelRX = _folder1.add( parameters.model.rotation, 'x' ).name('rotation x').min(0).max(360).step(1).listen();\r\n        let modelRY = _folder1.add( parameters.model.rotation, 'y' ).name('rotation x').min(0).max(360).step(1).listen();\r\n        let modelRZ = _folder1.add( parameters.model.rotation, 'z' ).name('rotation x').min(0).max(360).step(1).listen();\r\n\r\n        modelRX.onChange(value =>  this.object.rotation.x = value * Math.PI / 180 );\r\n        modelRY.onChange(value =>  this.object.rotation.y = value * Math.PI / 180 );\r\n        modelRZ.onChange(value =>  this.object.rotation.z = value * Math.PI / 180 );\r\n\r\n        let modelWireframe = _folder1.add( parameters.model, 'wireframe' ).name('wireframe').listen();\r\n        modelWireframe.onChange(value =>  {\r\n          this.object.traverse( child => {\r\n            if(child.isMesh){\r\n              child.material.wireframe = value;\r\n            }\r\n          })\r\n        } );\r\n\r\n        _folder1.open();\r\n\r\n      },\r\n      updateModel() {\r\n        const object = this.object;\r\n        if ( !object ) return;\r\n        const position = this.position;\r\n        const rotation = this.rotation;\r\n        const scale = this.scale;\r\n        object.position.set( position.x, position.y, position.z );\r\n        object.rotation.set( rotation.x, rotation.y, rotation.z );\r\n        object.scale.set( scale.x, scale.y, scale.z );\r\n      },\r\n      updateRenderer() {\r\n        const renderer = this.renderer;\r\n        renderer.setSize(this.size.width, this.size.height);\r\n        renderer.setPixelRatio(window.devicePixelRatio || 1);\r\n        renderer.setClearColor(new Color(this.backgroundColor).getHex());\r\n        renderer.setClearAlpha(this.backgroundAlpha);\r\n      },\r\n      updateCubemaps() {\r\n        if(this.cubemap.length === 0) return;\r\n\r\n        this.envMap = new CubeTextureLoader().load( this.cubemap );\r\n        this.scene.background = this.envMap;\r\n      },\r\n      updateCamera() {\r\n        const camera = this.camera;\r\n        camera.aspect = this.size.width / this.size.height;\r\n        camera.updateProjectionMatrix();\r\n        if (!this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp) {\r\n          camera.position.set(1, 1, -2);\r\n          camera.position.z = 5;\r\n          camera.lookAt(new Vector3());\r\n        } else {\r\n          camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\r\n          camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\r\n          camera.up.set(this.cameraUp.x, this.cameraUp.y, this.cameraUp.z);\r\n          camera.lookAt(new Vector3(this.cameraLookAt.x, this.cameraLookAt.y, this.cameraLookAt.z));\r\n        }\r\n      },\r\n      updateLights() {\r\n        this.scene.remove.apply(this.scene, this.allLights);\r\n        this.allLights = [];\r\n        this.lights.forEach(item => {\r\n          if (!item.type) return;\r\n          const type = item.type.toLowerCase();\r\n          let light = null;\r\n          if (type === 'ambient' || type === 'ambientlight') {\r\n            const color = item.color || 0x404040;\r\n            const intensity = item.intensity || 1;\r\n            light = new AmbientLight(color, intensity);\r\n          } else if (type === 'point' || type === 'pointlight') {\r\n            const color = item.color || 0xffffff;\r\n            const intensity = item.intensity || 1;\r\n            const distance = item.distance || 0;\r\n            const decay = item.decay || 1;\r\n            light = new PointLight(color, intensity, distance, decay);\r\n            if (item.position) {\r\n              light.position.copy(item.position);\r\n            }\r\n          } else if (type === 'directional' || type === 'directionallight') {\r\n            const color = item.color || 0xffffff;\r\n            const intensity = item.intensity || 1;\r\n            light = new DirectionalLight(color, intensity);\r\n            if (item.position) {\r\n              light.position.copy(item.position);\r\n            }\r\n            if (item.target) {\r\n              light.target.copy(item.target);\r\n            }\r\n          } else if (type === 'hemisphere' || type === 'hemispherelight') {\r\n            const skyColor = item.skyColor || 0xffffff;\r\n            const groundColor = item.groundColor || 0xffffff;\r\n            const intensity = item.intensity || 1;\r\n            light = new HemisphereLight(skyColor, groundColor, intensity);\r\n            if (item.position) {\r\n              light.position.copy(item.position);\r\n            }\r\n          }\r\n          this.allLights.push(light);\r\n          this.scene.add(light);\r\n        })\r\n      },\r\n      updateControls() {\r\n        if (this.controllable && this.controls) return;\r\n        if (this.controllable) {\r\n          if (this.controls) return;\r\n          this.controls = new OrbitControls(this.camera, this.$refs.canvas);\r\n          this.controls.type = 'orbit';\r\n          this.controls.update();\r\n        } else {\r\n          if (this.controls) {\r\n            this.controls.dispose();\r\n            this.controls = null;\r\n          }\r\n        }\r\n      },\r\n      animate() {\r\n        this.reqId = requestAnimationFrame(this.animate);\r\n        // required if controls.enableDamping or controls.autoRotate are set to true\r\n        this.controls.update();\r\n\r\n        if(this.statsjs && this.stats !== null) this.stats.update();\r\n\r\n        this.render();\r\n      },\r\n      render() {\r\n        this.renderer.render(this.scene, this.camera)\r\n      },\r\n      toggleFullscreen() {\r\n        if (screenfull.enabled) {\r\n          screenfull.toggle(this.$el);\r\n          screenfull.on('change', () => {\r\n            this.fullscreen = screenfull.isFullscreen;\r\n\r\n            if (!screenfull.isFullscreen) this.size = this.initSize;\r\n\r\n            this.updateCamera();\r\n            this.updateRenderer();\r\n          });\r\n        }\r\n      },\r\n      resetCameraView() {\r\n        this.controls.reset();\r\n      },\r\n      toggleHelp() {\r\n        this.showHelp = !this.showHelp;\r\n      },\r\n      downloadModel() {\r\n\r\n      },\r\n      load(){\r\n        if ( !this.src ) return;\r\n        if ( this.object ) {\r\n          this.wrapper.remove( this.object );\r\n        }\r\n        this.loader.load( this.src, ( ...args ) => {\r\n          const object = this.getObject( ...args );\r\n          if ( this.process ) {\r\n            this.process( object );\r\n          }\r\n          this.addObject( object );\r\n          this.$emit( 'on-load' );\r\n        }, xhr => {\r\n          this.$emit( 'on-progress', xhr );\r\n          console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\r\n        }, err => {\r\n          this.$emit( 'on-error', err );\r\n          console.log( 'on-error', err);\r\n        } );\r\n      },\r\n      getObject( object ) {\r\n        return object\r\n      },\r\n      addObject( object ) {\r\n        const center = getCenter( object );\r\n        // correction position\r\n        this.wrapper.position.copy( center.negate() );\r\n        this.object = object;\r\n        this.wrapper.add( object );\r\n        this.updateCamera();\r\n        this.updateModel();\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  @import url(https://use.fontawesome.com/releases/v5.1.0/css/all.css);\r\n  @import url('https://fonts.googleapis.com/css?family=Open+Sans');\r\n\r\n  .model-viewer {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    position: relative;\r\n    overflow: hidden;\r\n    font-family: \"Open Sans\", sans-serif;\r\n  }\r\n\r\n  .webgl{\r\n    position:relative;\r\n  }\r\n\r\n  #datgui{\r\n    position: absolute;\r\n    top: 0;\r\n    right:0;\r\n  }\r\n\r\n  canvas {\r\n    width: 100%;\r\n    height: 100%\r\n  }\r\n\r\n  /** GUI **/\r\n  .gui {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 4;\r\n    pointer-events: none;\r\n    user-select: none;\r\n    opacity: 0;\r\n    transition: opacity 250ms ease-in-out;\r\n  }\r\n\r\n  .gui.enabled {\r\n    opacity: 1;\r\n  }\r\n\r\n  .controls {\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    z-index: 2;\r\n    height: 50px;\r\n    justify-content: space-between;\r\n    min-width: 0;\r\n    padding: 10px;\r\n    pointer-events: none;\r\n    display: flex;\r\n  }\r\n\r\n  .controls .general-controls {\r\n    display: flex !important;\r\n    justify-content: flex-end;\r\n    flex: 0 0 auto;\r\n    font-size: 13px;\r\n    align-items: center;\r\n    flex-flow: row nowrap !important;\r\n    margin-left: auto;\r\n  }\r\n\r\n  .controls a {\r\n    padding: 0;\r\n    margin: 0;\r\n    color: #ffffff;\r\n    text-decoration: none;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .controls .control {\r\n    position: relative;\r\n    display: inline-block;\r\n    min-width: 0;\r\n    margin: 0 5px;\r\n    font-size: 16px;\r\n    outline: none;\r\n    transition: background 200ms linear;\r\n    width: 30px;\r\n    height: 30px;\r\n    line-height: 31px;\r\n    text-align: center;\r\n    border-radius: 16px;\r\n    pointer-events: all;\r\n  }\r\n\r\n  .controls .control:hover,\r\n  .controls .control.active {\r\n    background: rgba(0, 0, 0, 0.75);\r\n  }\r\n\r\n  .controls .control:before {\r\n    color: #ffffff;\r\n    text-shadow: 0 0 1px black;\r\n  }\r\n\r\n  .controls .general-controls .control i {\r\n    color: #ffffff;\r\n    text-shadow: 0 0 1px #000000;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .control-tooltip {\r\n    position: relative;\r\n  }\r\n\r\n  .control-tooltip.tooltip-down[data-tooltip]:after {\r\n    top: 25px;\r\n    bottom: auto;\r\n  }\r\n\r\n  .control-tooltip.tooltip-down[data-tooltip]:before {\r\n    top: 20px;\r\n    bottom: auto;\r\n    border-top: 0 solid transparent;\r\n    border-right: 5px solid transparent;\r\n    border-bottom: 5px solid rgba(0, 0, 0, 0.75);\r\n    border-left: 5px solid transparent;\r\n  }\r\n\r\n  .control-tooltip.tooltip-right-bound[data-tooltip]:after {\r\n    transform: translateX(-75%);\r\n  }\r\n\r\n  .control-tooltip.tooltip-left-bound[data-tooltip]:before {\r\n    transform: translateX(100%);\r\n    left: 0;\r\n  }\r\n\r\n  .control-tooltip.tooltip-left-bound[data-tooltip]:after {\r\n    transform: translateX(0%);\r\n    left: 0;\r\n  }\r\n\r\n  .control-tooltip[data-tooltip]:before {\r\n    position: absolute;\r\n    bottom: 30px;\r\n    left: 50%;\r\n    pointer-events: none;\r\n    content: \"\";\r\n    border-top: 5px solid rgba(0, 0, 0, 0.75);\r\n    border-right: 5px solid transparent;\r\n    border-bottom: 0 solid transparent;\r\n    border-left: 5px solid transparent;\r\n    opacity: 0;\r\n    transition: opacity 250ms ease-in-out;\r\n    transform: translateX(-50%);\r\n  }\r\n\r\n  .control-tooltip[data-tooltip]:after {\r\n    position: absolute;\r\n    bottom: 35px;\r\n    left: 50%;\r\n    height: 25px;\r\n    padding: 5px 10px;\r\n    font-size: 12px;\r\n    line-height: 15px;\r\n    color: #ffffff;\r\n    white-space: nowrap;\r\n    pointer-events: none;\r\n    content: attr(data-tooltip);\r\n    background: rgba(0, 0, 0, 0.75);\r\n    border-radius: 6px;\r\n    opacity: 0;\r\n    transition: opacity 250ms ease-in-out;\r\n    transform: translateX(-50%);\r\n  }\r\n\r\n  .control-tooltip:hover:before, .control-tooltip:hover:after {\r\n    opacity: 1;\r\n  }\r\n\r\n  /** OVERLAYS **/\r\n  .overlays {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    z-index: 7;\r\n    pointer-events: none;\r\n    perspective: 1000px;\r\n    perspective-origin: center center;\r\n    transform-style: preserve-3d;\r\n  }\r\n\r\n  .overlays .overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: initial;\r\n    display: initial;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: initial;\r\n    pointer-events: all;\r\n    background: rgba(0, 0, 0, 0.8);\r\n    transition: all 250ms ease-in-out;\r\n  }\r\n\r\n  .overlays .overlay.hidden {\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    transition: all 100ms ease-in-out;\r\n    transform: translateZ(100px);\r\n  }\r\n\r\n  .overlays .overlay .close {\r\n    position: absolute;\r\n    top: 15px;\r\n    right: 25px;\r\n    z-index: 2;\r\n    font-size: 16px;\r\n    color: #ffffff;\r\n  }\r\n\r\n  .overlays .overlay .inner {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    width: 100%;\r\n    height: 100%;\r\n    color: #ffffff;\r\n    flex-flow: column nowrap;\r\n    justify-content: center;\r\n  }\r\n\r\n  .overlays .overlay .inner > * {\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -ms-flex-pack: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  /** help **/\r\n  .overlays .overlay.help .inner {\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex: 1 1 0;\r\n    justify-content: center;\r\n    overflow: auto;\r\n  }\r\n\r\n  .overlays .overlay.help .inner .tip {\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    font-size: 14px;\r\n    color: #cccccc;\r\n    text-align: center;\r\n    flex-direction: column;\r\n    flex: 1;\r\n    justify-content: center;\r\n  }\r\n\r\n  .overlays .overlay.help .tip > div {\r\n    min-height: 0;\r\n    max-height: none;\r\n  }\r\n\r\n  .overlays .overlay.help .tip i {\r\n    margin: 0 0 30px;\r\n    font-size: 28px;\r\n    color: #ffffff;\r\n  }\r\n\r\n  .overlays .overlay.help {\r\n    padding: 0 20px;\r\n    font-size: 18px;\r\n    color: #cccccc;\r\n    justify-content: center;\r\n  }\r\n\r\n  .overlays .overlay.help h2 {\r\n    position: relative;\r\n    padding-bottom: 4px;\r\n    margin: 0 0 4px;\r\n    font-size: 13px;\r\n    font-weight: bold;\r\n    text-transform: uppercase;\r\n    border-bottom: 1px solid #333333;\r\n  }\r\n\r\n  .overlays .overlay.help .section {\r\n    margin-bottom: 20px;\r\n    line-height: 1.7;\r\n  }\r\n\r\n  .overlays .overlay.help b {\r\n    display: inline-block;\r\n    width: 120px;\r\n    font-weight: bold;\r\n  }\r\n</style>\r\n\r\n<template>\r\n  <div class=\"model-viewer\" v-if=\"suportWebGL\">\r\n    <div class=\"overlays\">\r\n      <div class=\"overlay help\" :class=\"showHelp ? '' : 'hidden'\">\r\n        <a href=\"#\" class=\"close\" v-on:click=\"toggleHelp\"><i class=\"fas fa-times\"></i></a>\r\n        <div class=\"inner\">\r\n          <div class=\"tip\">\r\n            <div><i class=\"fas fa-sync-alt\"></i></div>\r\n            <div>\r\n              <b>Orbit around</b>\r\n              <div>Left mouse + drag or<br>One finger drag (touch)</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"tip\">\r\n            <div><i class=\"fas fa-search-plus\"></i></div>\r\n            <div>\r\n              <b>Zoom</b>\r\n              <div>Middle mouse or mousewheel<br>Two-finger spread or squish (touch)</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"tip\">\r\n            <div><i class=\"fas fa-arrows-alt\"></i></div>\r\n            <div>\r\n              <b>Pan</b>\r\n              <div>Right mouse + drag or arraow keys<br>Two fingers drag (touch)</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"webgl\">\r\n      <div id=\"datgui\" ref=\"datgui\"></div>\r\n      <canvas ref=\"canvas\"></canvas>\r\n      <div v-show=\"showControls\" class=\"gui enabled\">\r\n        <div class=\"controls\">\r\n          <div class=\"general-controls\">\r\n            <a class=\"control control-tooltip\" data-tooltip=\"Help\" v-on:click=\"toggleHelp\" v-show=\"visibleControls.help\">\r\n              <i class=\"fas fa-question\"></i>\r\n            </a>\r\n            <a class=\"control control-tooltip\" data-tooltip=\"Download\" v-on:click=\"downloadModel\"\r\n               v-show=\"visibleControls.download\">\r\n              <i class=\"fas fa-download\"></i>\r\n            </a>\r\n            <a class=\"control control-tooltip tooltip-right-bound\" data-tooltip=\"Fullscreen\"\r\n               v-on:click=\"toggleFullscreen\" v-show=\"visibleControls.fullscreen\">\r\n              <i class=\"fas\" :class=\"fullscreen ? 'fa-compress' : 'fa-expand-arrows-alt'\"></i></a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div v-else>\r\n    <slot name=\"error\">\r\n      Your graphics card does not seem to support\r\n      <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>\r\n      Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.\r\n    </slot>\r\n  </div>\r\n</template>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./base-mixin.vue?vue&type=template&id=42d22417&scoped=true\"\nimport script from \"./base-mixin.vue?vue&type=script&lang=js\"\nexport * from \"./base-mixin.vue?vue&type=script&lang=js\"\nimport style0 from \"./base-mixin.vue?vue&type=style&index=0&id=42d22417&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42d22417\",\n  null\n  \n)\n\nexport default component.exports","/*\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\nimport * as THREE from 'three';\r\n\r\nconst DDSLoader = function ( manager ) {\r\n\r\n\tTHREE.CompressedTextureLoader.call( this, manager );\r\n\r\n\tthis._parser = DDSLoader.parse;\r\n\r\n};\r\n\r\nDDSLoader.prototype = Object.create( THREE.CompressedTextureLoader.prototype );\r\nDDSLoader.prototype.constructor = DDSLoader;\r\n\r\nDDSLoader.parse = function ( buffer, loadMipmaps ) {\r\n\r\n\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\r\n\r\n\t// Adapted from @toji's DDS utils\r\n\t// https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js\r\n\r\n\t// All values and structures referenced from:\r\n\t// http://msdn.microsoft.com/en-us/library/bb943991.aspx/\r\n\r\n\tvar DDS_MAGIC = 0x20534444;\r\n\r\n\tvar DDSD_CAPS = 0x1,\r\n\t\tDDSD_HEIGHT = 0x2,\r\n\t\tDDSD_WIDTH = 0x4,\r\n\t\tDDSD_PITCH = 0x8,\r\n\t\tDDSD_PIXELFORMAT = 0x1000,\r\n\t\tDDSD_MIPMAPCOUNT = 0x20000,\r\n\t\tDDSD_LINEARSIZE = 0x80000,\r\n\t\tDDSD_DEPTH = 0x800000;\r\n\r\n\tvar DDSCAPS_COMPLEX = 0x8,\r\n\t\tDDSCAPS_MIPMAP = 0x400000,\r\n\t\tDDSCAPS_TEXTURE = 0x1000;\r\n\r\n\tvar DDSCAPS2_CUBEMAP = 0x200,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\r\n\t\tDDSCAPS2_VOLUME = 0x200000;\r\n\r\n\tvar DDPF_ALPHAPIXELS = 0x1,\r\n\t\tDDPF_ALPHA = 0x2,\r\n\t\tDDPF_FOURCC = 0x4,\r\n\t\tDDPF_RGB = 0x40,\r\n\t\tDDPF_YUV = 0x200,\r\n\t\tDDPF_LUMINANCE = 0x20000;\r\n\r\n\tfunction fourCCToInt32( value ) {\r\n\r\n\t\treturn value.charCodeAt( 0 ) +\r\n\t\t\t( value.charCodeAt( 1 ) << 8 ) +\r\n\t\t\t( value.charCodeAt( 2 ) << 16 ) +\r\n\t\t\t( value.charCodeAt( 3 ) << 24 );\r\n\r\n\t}\r\n\r\n\tfunction int32ToFourCC( value ) {\r\n\r\n\t\treturn String.fromCharCode(\r\n\t\t\tvalue & 0xff,\r\n\t\t\t( value >> 8 ) & 0xff,\r\n\t\t\t( value >> 16 ) & 0xff,\r\n\t\t\t( value >> 24 ) & 0xff\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tfunction loadARGBMip( buffer, dataOffset, width, height ) {\r\n\r\n\t\tvar dataLength = width * height * 4;\r\n\t\tvar srcBuffer = new Uint8Array( buffer, dataOffset, dataLength );\r\n\t\tvar byteArray = new Uint8Array( dataLength );\r\n\t\tvar dst = 0;\r\n\t\tvar src = 0;\r\n\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\r\n\t\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\r\n\t\t\t\tvar b = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar g = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar r = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar a = srcBuffer[ src ]; src ++;\r\n\t\t\t\tbyteArray[ dst ] = r; dst ++;\t//r\r\n\t\t\t\tbyteArray[ dst ] = g; dst ++;\t//g\r\n\t\t\t\tbyteArray[ dst ] = b; dst ++;\t//b\r\n\t\t\t\tbyteArray[ dst ] = a; dst ++;\t//a\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn byteArray;\r\n\r\n\t}\r\n\r\n\tvar FOURCC_DXT1 = fourCCToInt32( \"DXT1\" );\r\n\tvar FOURCC_DXT3 = fourCCToInt32( \"DXT3\" );\r\n\tvar FOURCC_DXT5 = fourCCToInt32( \"DXT5\" );\r\n\tvar FOURCC_ETC1 = fourCCToInt32( \"ETC1\" );\r\n\r\n\tvar headerLengthInt = 31; // The header length in 32 bit ints\r\n\r\n\t// Offsets into the header array\r\n\r\n\tvar off_magic = 0;\r\n\r\n\tvar off_size = 1;\r\n\tvar off_flags = 2;\r\n\tvar off_height = 3;\r\n\tvar off_width = 4;\r\n\r\n\tvar off_mipmapCount = 7;\r\n\r\n\tvar off_pfFlags = 20;\r\n\tvar off_pfFourCC = 21;\r\n\tvar off_RGBBitCount = 22;\r\n\tvar off_RBitMask = 23;\r\n\tvar off_GBitMask = 24;\r\n\tvar off_BBitMask = 25;\r\n\tvar off_ABitMask = 26;\r\n\r\n\tvar off_caps = 27;\r\n\tvar off_caps2 = 28;\r\n\tvar off_caps3 = 29;\r\n\tvar off_caps4 = 30;\r\n\r\n\t// Parse header\r\n\r\n\tvar header = new Int32Array( buffer, 0, headerLengthInt );\r\n\r\n\tif ( header[ off_magic ] !== DDS_MAGIC ) {\r\n\r\n\t\tconsole.error( 'THREE.DDSLoader.parse: Invalid magic number in DDS header.' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tif ( ! header[ off_pfFlags ] & DDPF_FOURCC ) {\r\n\r\n\t\tconsole.error( 'THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code.' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tvar blockBytes;\r\n\r\n\tvar fourCC = header[ off_pfFourCC ];\r\n\r\n\tvar isRGBAUncompressed = false;\r\n\r\n\tswitch ( fourCC ) {\r\n\r\n\t\tcase FOURCC_DXT1:\r\n\r\n\t\t\tblockBytes = 8;\r\n\t\t\tdds.format = THREE.RGB_S3TC_DXT1_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_DXT3:\r\n\r\n\t\t\tblockBytes = 16;\r\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT3_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_DXT5:\r\n\r\n\t\t\tblockBytes = 16;\r\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT5_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_ETC1:\r\n\r\n\t\t\tblockBytes = 8;\r\n\t\t\tdds.format = THREE.RGB_ETC1_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\r\n\t\t\tif ( header[ off_RGBBitCount ] === 32\r\n\t\t\t\t&& header[ off_RBitMask ] & 0xff0000\r\n\t\t\t\t&& header[ off_GBitMask ] & 0xff00\r\n\t\t\t\t&& header[ off_BBitMask ] & 0xff\r\n\t\t\t\t&& header[ off_ABitMask ] & 0xff000000 ) {\r\n\r\n\t\t\t\tisRGBAUncompressed = true;\r\n\t\t\t\tblockBytes = 64;\r\n\t\t\t\tdds.format = THREE.RGBAFormat;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC( fourCC ) );\r\n\t\t\t\treturn dds;\r\n\r\n\t\t\t}\r\n\r\n\t}\r\n\r\n\tdds.mipmapCount = 1;\r\n\r\n\tif ( header[ off_flags ] & DDSD_MIPMAPCOUNT && loadMipmaps !== false ) {\r\n\r\n\t\tdds.mipmapCount = Math.max( 1, header[ off_mipmapCount ] );\r\n\r\n\t}\r\n\r\n\tvar caps2 = header[ off_caps2 ];\r\n\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\r\n\tif ( dds.isCubemap && (\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEX ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEY ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ )\r\n\t) ) {\r\n\r\n\t\tconsole.error( 'THREE.DDSLoader.parse: Incomplete cubemap faces' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tdds.width = header[ off_width ];\r\n\tdds.height = header[ off_height ];\r\n\r\n\tvar dataOffset = header[ off_size ] + 4;\r\n\r\n\t// Extract mipmaps buffers\r\n\r\n\tvar faces = dds.isCubemap ? 6 : 1;\r\n\r\n\tfor ( var face = 0; face < faces; face ++ ) {\r\n\r\n\t\tvar width = dds.width;\r\n\t\tvar height = dds.height;\r\n\r\n\t\tfor ( var i = 0; i < dds.mipmapCount; i ++ ) {\r\n\r\n\t\t\tif ( isRGBAUncompressed ) {\r\n\r\n\t\t\t\tvar byteArray = loadARGBMip( buffer, dataOffset, width, height );\r\n\t\t\t\tvar dataLength = byteArray.length;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar dataLength = Math.max( 4, width ) / 4 * Math.max( 4, height ) / 4 * blockBytes;\r\n\t\t\t\tvar byteArray = new Uint8Array( buffer, dataOffset, dataLength );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\r\n\t\t\tdds.mipmaps.push( mipmap );\r\n\r\n\t\t\tdataOffset += dataLength;\r\n\r\n\t\t\twidth = Math.max( width >> 1, 1 );\r\n\t\t\theight = Math.max( height >> 1, 1 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn dds;\r\n\r\n};\r\n\r\nexport { DDSLoader }\r\n","var render, staticRenderFns\nimport script from \"./ModelViewer.vue?vue&type=script&lang=js\"\nexport * from \"./ModelViewer.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\r\n * @author Rich Tibbett / https://github.com/richtr\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Tony Parisi / http://www.tonyparisi.com/\r\n * @author Takahiro / https://github.com/takahirox\r\n * @author Don McCurdy / https://www.donmccurdy.com\r\n */\r\nimport * as THREE from 'three';\r\nimport { DDSLoader } from './DDSLoader'\r\nimport { BufferGeometryUtils } from '../utils'\r\n\r\nconst GLTFLoader = ( function () {\r\n\r\n\tfunction GLTFLoader( manager ) {\r\n\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\tthis.dracoLoader = null;\r\n\r\n\t}\r\n\r\n\tGLTFLoader.prototype = {\r\n\r\n\t\tconstructor: GLTFLoader,\r\n\r\n\t\tcrossOrigin: 'anonymous',\r\n\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tvar path = this.path !== undefined ? this.path : THREE.LoaderUtils.extractUrlBase( url );\r\n\r\n\t\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\r\n\t\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\t\tloader.load( url, function ( data ) {\r\n\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\tscope.parse( data, path, onLoad, onError );\r\n\r\n\t\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\t\tif ( onError !== undefined ) {\r\n\r\n\t\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthrow e;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t},\r\n\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\t\tthis.crossOrigin = value;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetPath: function ( value ) {\r\n\r\n\t\t\tthis.path = value;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetDRACOLoader: function ( dracoLoader ) {\r\n\r\n\t\t\tthis.dracoLoader = dracoLoader;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tparse: function ( data, path, onLoad, onError ) {\r\n\r\n\t\t\tvar content;\r\n\t\t\tvar extensions = {};\r\n\r\n\t\t\tif ( typeof data === 'string' ) {\r\n\r\n\t\t\t\tcontent = data;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar magic = THREE.LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\r\n\r\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\r\n\r\n\t\t\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t\t\tif ( onError ) onError( error );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcontent = THREE.LoaderUtils.decodeText( new Uint8Array( data ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar json = JSON.parse( content );\r\n\r\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\r\n\r\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.' ) );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.extensionsUsed ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\r\n\r\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\r\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\r\n\r\n\t\t\t\t\tswitch ( extensionName ) {\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFLightsExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\r\n\t\t\t\t\t\t\textensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] = new GLTFTextureDDSExtension();\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 ) {\r\n\r\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar parser = new GLTFParser( json, extensions, {\r\n\r\n\t\t\t\tpath: path || this.path || '',\r\n\t\t\t\tcrossOrigin: this.crossOrigin,\r\n\t\t\t\tmanager: this.manager\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tparser.parse( function ( scene, scenes, cameras, animations, json ) {\r\n\r\n\t\t\t\tvar glTF = {\r\n\t\t\t\t\tscene: scene,\r\n\t\t\t\t\tscenes: scenes,\r\n\t\t\t\t\tcameras: cameras,\r\n\t\t\t\t\tanimations: animations,\r\n\t\t\t\t\tasset: json.asset,\r\n\t\t\t\t\tparser: parser,\r\n\t\t\t\t\tuserData: {}\r\n\t\t\t\t};\r\n\r\n\t\t\t\taddUnknownExtensionsToUserData( extensions, glTF, json );\r\n\r\n\t\t\t\tonLoad( glTF );\r\n\r\n\t\t\t}, onError );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t/* GLTFREGISTRY */\r\n\r\n\tfunction GLTFRegistry() {\r\n\r\n\t\tvar objects = {};\r\n\r\n\t\treturn\t{\r\n\r\n\t\t\tget: function ( key ) {\r\n\r\n\t\t\t\treturn objects[ key ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tadd: function ( key, object ) {\r\n\r\n\t\t\t\tobjects[ key ] = object;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tremove: function ( key ) {\r\n\r\n\t\t\t\tdelete objects[ key ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tremoveAll: function () {\r\n\r\n\t\t\t\tobjects = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*********************************/\r\n\t/********** EXTENSIONS ***********/\r\n\t/*********************************/\r\n\r\n\tvar EXTENSIONS = {\r\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\r\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\r\n\t\tKHR_LIGHTS: 'KHR_lights',\r\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\r\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\r\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\r\n\t};\r\n\r\n\t/**\r\n\t * DDS Texture Extension\r\n\t *\r\n\t * Specification:\r\n\t * https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\r\n\t *\r\n\t */\r\n\tfunction GLTFTextureDDSExtension() {\r\n\r\n\t\tif ( ! DDSLoader ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\r\n\t\tthis.ddsLoader = new DDSLoader();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Lights Extension\r\n\t *\r\n\t * Specification: PENDING\r\n\t */\r\n\tfunction GLTFLightsExtension( json ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS;\r\n\r\n\t\tthis.lights = {};\r\n\r\n\t\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS ] ) || {};\r\n\t\tvar lights = extension.lights || {};\r\n\r\n\t\tfor ( var lightId in lights ) {\r\n\r\n\t\t\tvar light = lights[ lightId ];\r\n\t\t\tvar lightNode;\r\n\r\n\t\t\tvar color = new THREE.Color().fromArray( light.color );\r\n\r\n\t\t\tswitch ( light.type ) {\r\n\r\n\t\t\t\tcase 'directional':\r\n\t\t\t\t\tlightNode = new THREE.DirectionalLight( color );\r\n\t\t\t\t\tlightNode.target.position.set( 0, 0, 1 );\r\n\t\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'point':\r\n\t\t\t\t\tlightNode = new THREE.PointLight( color );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'spot':\r\n\t\t\t\t\tlightNode = new THREE.SpotLight( color );\r\n\t\t\t\t\t// Handle spotlight properties.\r\n\t\t\t\t\tlight.spot = light.spot || {};\r\n\t\t\t\t\tlight.spot.innerConeAngle = light.spot.innerConeAngle !== undefined ? light.spot.innerConeAngle : 0;\r\n\t\t\t\t\tlight.spot.outerConeAngle = light.spot.outerConeAngle !== undefined ? light.spot.outerConeAngle : Math.PI / 4.0;\r\n\t\t\t\t\tlightNode.angle = light.spot.outerConeAngle;\r\n\t\t\t\t\tlightNode.penumbra = 1.0 - light.spot.innerConeAngle / light.spot.outerConeAngle;\r\n\t\t\t\t\tlightNode.target.position.set( 0, 0, 1 );\r\n\t\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ambient':\r\n\t\t\t\t\tlightNode = new THREE.AmbientLight( color );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( lightNode ) {\r\n\r\n\t\t\t\tlightNode.decay = 2;\r\n\r\n\t\t\t\tif ( light.intensity !== undefined ) {\r\n\r\n\t\t\t\t\tlightNode.intensity = light.intensity;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlightNode.name = light.name || ( 'light_' + lightId );\r\n\t\t\t\tthis.lights[ lightId ] = lightNode;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Unlit Materials Extension (pending)\r\n\t *\r\n\t * PR: https://github.com/KhronosGroup/glTF/pull/1163\r\n\t */\r\n\tfunction GLTFMaterialsUnlitExtension( json ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\r\n\r\n\t}\r\n\r\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function ( material ) {\r\n\r\n\t\treturn THREE.MeshBasicMaterial;\r\n\r\n\t};\r\n\r\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, material, parser ) {\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tmaterialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\tvar metallicRoughness = material.pbrMetallicRoughness;\r\n\r\n\t\tif ( metallicRoughness ) {\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.fromArray( array );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t};\r\n\r\n\t/* BINARY EXTENSION */\r\n\r\n\tvar BINARY_EXTENSION_BUFFER_NAME = 'binary_glTF';\r\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\r\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\r\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\r\n\r\n\tfunction GLTFBinaryExtension( data ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\r\n\t\tthis.content = null;\r\n\t\tthis.body = null;\r\n\r\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\r\n\r\n\t\tthis.header = {\r\n\t\t\tmagic: THREE.LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\r\n\t\t\tversion: headerView.getUint32( 4, true ),\r\n\t\t\tlength: headerView.getUint32( 8, true )\r\n\t\t};\r\n\r\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\r\n\r\n\t\t} else if ( this.header.version < 2.0 ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\r\n\t\tvar chunkIndex = 0;\r\n\r\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\r\n\r\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\r\n\r\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\r\n\t\t\t\tthis.content = THREE.LoaderUtils.decodeText( contentArray );\r\n\r\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\r\n\r\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\r\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Clients must ignore chunks with unknown types.\r\n\r\n\t\t\tchunkIndex += chunkLength;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.content === null ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * DRACO Mesh Compression Extension\r\n\t *\r\n\t * Specification: https://github.com/KhronosGroup/glTF/pull/874\r\n\t */\r\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\r\n\r\n\t\tif ( ! dracoLoader ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\r\n\t\tthis.json = json;\r\n\t\tthis.dracoLoader = dracoLoader;\r\n\r\n\t}\r\n\r\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\r\n\r\n\t\tvar json = this.json;\r\n\t\tvar dracoLoader = this.dracoLoader;\r\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\r\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\r\n\t\tvar threeAttributeMap = {};\r\n\t\tvar attributeNormalizedMap = {};\r\n\t\tvar attributeTypeMap = {};\r\n\r\n\t\tfor ( var attributeName in gltfAttributeMap ) {\r\n\r\n\t\t\tif ( ! ( attributeName in ATTRIBUTES ) ) continue;\r\n\r\n\t\t\tthreeAttributeMap[ ATTRIBUTES[ attributeName ] ] = gltfAttributeMap[ attributeName ];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( attributeName in primitive.attributes ) {\r\n\r\n\t\t\tif ( ATTRIBUTES[ attributeName ] !== undefined && gltfAttributeMap[ attributeName ] !== undefined ) {\r\n\r\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\r\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t\tattributeTypeMap[ ATTRIBUTES[ attributeName ] ] = componentType;\r\n\t\t\t\tattributeNormalizedMap[ ATTRIBUTES[ attributeName ] ] = accessorDef.normalized === true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\r\n\r\n\t\t\treturn new Promise( function ( resolve ) {\r\n\r\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\r\n\r\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\r\n\r\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\r\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\r\n\r\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve( geometry );\r\n\r\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specular-Glossiness Extension\r\n\t *\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\r\n\t */\r\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\r\n\r\n\t\treturn {\r\n\r\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\r\n\r\n\t\t\tspecularGlossinessParams: [\r\n\t\t\t\t'color',\r\n\t\t\t\t'map',\r\n\t\t\t\t'lightMap',\r\n\t\t\t\t'lightMapIntensity',\r\n\t\t\t\t'aoMap',\r\n\t\t\t\t'aoMapIntensity',\r\n\t\t\t\t'emissive',\r\n\t\t\t\t'emissiveIntensity',\r\n\t\t\t\t'emissiveMap',\r\n\t\t\t\t'bumpMap',\r\n\t\t\t\t'bumpScale',\r\n\t\t\t\t'normalMap',\r\n\t\t\t\t'displacementMap',\r\n\t\t\t\t'displacementScale',\r\n\t\t\t\t'displacementBias',\r\n\t\t\t\t'specularMap',\r\n\t\t\t\t'specular',\r\n\t\t\t\t'glossinessMap',\r\n\t\t\t\t'glossiness',\r\n\t\t\t\t'alphaMap',\r\n\t\t\t\t'envMap',\r\n\t\t\t\t'envMapIntensity',\r\n\t\t\t\t'refractionRatio',\r\n\t\t\t],\r\n\r\n\t\t\tgetMaterialType: function () {\r\n\r\n\t\t\t\treturn THREE.ShaderMaterial;\r\n\r\n\t\t\t},\r\n\r\n\t\t\textendParams: function ( params, material, parser ) {\r\n\r\n\t\t\t\tvar pbrSpecularGlossiness = material.extensions[ this.name ];\r\n\r\n\t\t\t\tvar shader = THREE.ShaderLib[ 'standard' ];\r\n\r\n\t\t\t\tvar uniforms = THREE.UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\t\t\tvar specularMapParsFragmentChunk = [\r\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\r\n\t\t\t\t\t'\tuniform sampler2D specularMap;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar glossinessMapParsFragmentChunk = [\r\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\r\n\t\t\t\t\t'\tuniform sampler2D glossinessMap;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar specularMapFragmentChunk = [\r\n\t\t\t\t\t'vec3 specularFactor = specular;',\r\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\r\n\t\t\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\r\n\t\t\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\r\n\t\t\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t\t\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar glossinessMapFragmentChunk = [\r\n\t\t\t\t\t'float glossinessFactor = glossiness;',\r\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\r\n\t\t\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\r\n\t\t\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t\t\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar lightPhysicalFragmentChunk = [\r\n\t\t\t\t\t'PhysicalMaterial material;',\r\n\t\t\t\t\t'material.diffuseColor = diffuseColor.rgb;',\r\n\t\t\t\t\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\r\n\t\t\t\t\t'material.specularColor = specularFactor.rgb;',\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar fragmentShader = shader.fragmentShader\r\n\t\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\r\n\t\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\r\n\t\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\r\n\r\n\t\t\t\tdelete uniforms.roughness;\r\n\t\t\t\tdelete uniforms.metalness;\r\n\t\t\t\tdelete uniforms.roughnessMap;\r\n\t\t\t\tdelete uniforms.metalnessMap;\r\n\r\n\t\t\t\tuniforms.specular = { value: new THREE.Color().setHex( 0x111111 ) };\r\n\t\t\t\tuniforms.glossiness = { value: 0.5 };\r\n\t\t\t\tuniforms.specularMap = { value: null };\r\n\t\t\t\tuniforms.glossinessMap = { value: null };\r\n\r\n\t\t\t\tparams.vertexShader = shader.vertexShader;\r\n\t\t\t\tparams.fragmentShader = fragmentShader;\r\n\t\t\t\tparams.uniforms = uniforms;\r\n\t\t\t\tparams.defines = { 'STANDARD': '' };\r\n\r\n\t\t\t\tparams.color = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\t\t\t\tparams.opacity = 1.0;\r\n\r\n\t\t\t\tvar pending = [];\r\n\r\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\r\n\r\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\r\n\r\n\t\t\t\t\tparams.color.fromArray( array );\r\n\t\t\t\t\tparams.opacity = array[ 3 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\r\n\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'map', pbrSpecularGlossiness.diffuseTexture.index ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparams.emissive = new THREE.Color( 0.0, 0.0, 0.0 );\r\n\t\t\t\tparams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\r\n\t\t\t\tparams.specular = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\r\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\r\n\r\n\t\t\t\t\tparams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\r\n\r\n\t\t\t\t\tvar specGlossIndex = pbrSpecularGlossiness.specularGlossinessTexture.index;\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'glossinessMap', specGlossIndex ) );\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'specularMap', specGlossIndex ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn Promise.all( pending );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tcreateMaterial: function ( params ) {\r\n\r\n\t\t\t\t// setup material properties based on MeshStandardMaterial for Specular-Glossiness\r\n\r\n\t\t\t\tvar material = new THREE.ShaderMaterial( {\r\n\t\t\t\t\tdefines: params.defines,\r\n\t\t\t\t\tvertexShader: params.vertexShader,\r\n\t\t\t\t\tfragmentShader: params.fragmentShader,\r\n\t\t\t\t\tuniforms: params.uniforms,\r\n\t\t\t\t\tfog: true,\r\n\t\t\t\t\tlights: true,\r\n\t\t\t\t\topacity: params.opacity,\r\n\t\t\t\t\ttransparent: params.transparent\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tmaterial.isGLTFSpecularGlossinessMaterial = true;\r\n\r\n\t\t\t\tmaterial.color = params.color;\r\n\r\n\t\t\t\tmaterial.map = params.map === undefined ? null : params.map;\r\n\r\n\t\t\t\tmaterial.lightMap = null;\r\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.aoMap = params.aoMap === undefined ? null : params.aoMap;\r\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.emissive = params.emissive;\r\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\r\n\t\t\t\tmaterial.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;\r\n\r\n\t\t\t\tmaterial.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;\r\n\t\t\t\tmaterial.bumpScale = 1;\r\n\r\n\t\t\t\tmaterial.normalMap = params.normalMap === undefined ? null : params.normalMap;\r\n\t\t\t\tif ( params.normalScale ) material.normalScale = params.normalScale;\r\n\r\n\t\t\t\tmaterial.displacementMap = null;\r\n\t\t\t\tmaterial.displacementScale = 1;\r\n\t\t\t\tmaterial.displacementBias = 0;\r\n\r\n\t\t\t\tmaterial.specularMap = params.specularMap === undefined ? null : params.specularMap;\r\n\t\t\t\tmaterial.specular = params.specular;\r\n\r\n\t\t\t\tmaterial.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;\r\n\t\t\t\tmaterial.glossiness = params.glossiness;\r\n\r\n\t\t\t\tmaterial.alphaMap = null;\r\n\r\n\t\t\t\tmaterial.envMap = params.envMap === undefined ? null : params.envMap;\r\n\t\t\t\tmaterial.envMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.refractionRatio = 0.98;\r\n\r\n\t\t\t\tmaterial.extensions.derivatives = true;\r\n\r\n\t\t\t\treturn material;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can\r\n\t\t\t * copy only properties it knows about or inherits, and misses many properties that would\r\n\t\t\t * normally be defined by MeshStandardMaterial.\r\n\t\t\t *\r\n\t\t\t * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of\r\n\t\t\t * loading a glTF model, but cloning later (e.g. by the user) would require these changes\r\n\t\t\t * AND also updating `.onBeforeRender` on the parent mesh.\r\n\t\t\t *\r\n\t\t\t * @param  {THREE.ShaderMaterial} source\r\n\t\t\t * @return {THREE.ShaderMaterial}\r\n\t\t\t */\r\n\t\t\tcloneMaterial: function ( source ) {\r\n\r\n\t\t\t\tvar target = source.clone();\r\n\r\n\t\t\t\ttarget.isGLTFSpecularGlossinessMaterial = true;\r\n\r\n\t\t\t\tvar params = this.specularGlossinessParams;\r\n\r\n\t\t\t\tfor ( var i = 0, il = params.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\ttarget[ params[ i ] ] = source[ params[ i ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn target;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t// Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.\r\n\t\t\trefreshUniforms: function ( renderer, scene, camera, geometry, material, group ) {\r\n\r\n\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial !== true ) {\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uniforms = material.uniforms;\r\n\t\t\t\tvar defines = material.defines;\r\n\r\n\t\t\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t\t\tuniforms.map.value = material.map;\r\n\t\t\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t\t\t// uv repeat and offset setting priorities\r\n\t\t\t\t// 1. color map\r\n\t\t\t\t// 2. specular map\r\n\t\t\t\t// 3. normal map\r\n\t\t\t\t// 4. bump map\r\n\t\t\t\t// 5. alpha map\r\n\t\t\t\t// 6. emissive map\r\n\r\n\t\t\t\tvar uvScaleMap;\r\n\r\n\t\t\t\tif ( material.map ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t\t\t} else if ( material.glossinessMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.glossinessMap;\r\n\r\n\t\t\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\t\t\t// backwards compatibility\r\n\t\t\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuniforms.envMap.value = material.envMap;\r\n\t\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\t\t\t\tuniforms.flipEnvMap.value = ( material.envMap && material.envMap.isCubeTexture ) ? - 1 : 1;\r\n\r\n\t\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t\t\t\tuniforms.specular.value.copy( material.specular );\r\n\t\t\t\tuniforms.glossiness.value = material.glossiness;\r\n\r\n\t\t\t\tuniforms.glossinessMap.value = material.glossinessMap;\r\n\r\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\r\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t\t\tif ( uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined ) {\r\n\r\n\t\t\t\t\tdefines.USE_GLOSSINESSMAP = '';\r\n\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\r\n\t\t\t\t\tdefines.USE_ROUGHNESSMAP = '';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined ) {\r\n\r\n\t\t\t\t\tdelete defines.USE_GLOSSINESSMAP;\r\n\t\t\t\t\tdelete defines.USE_ROUGHNESSMAP;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*********************************/\r\n\t/********** INTERPOLATION ********/\r\n\t/*********************************/\r\n\r\n\t// Spline Interpolation\r\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\r\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\t\tTHREE.Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\t}\r\n\r\n\tGLTFCubicSplineInterpolant.prototype = Object.create( THREE.Interpolant.prototype );\r\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer;\r\n\t\tvar values = this.sampleValues;\r\n\t\tvar stride = this.valueSize;\r\n\r\n\t\tvar stride2 = stride * 2;\r\n\t\tvar stride3 = stride * 3;\r\n\r\n\t\tvar td = t1 - t0;\r\n\r\n\t\tvar p = ( t - t0 ) / td;\r\n\t\tvar pp = p * p;\r\n\t\tvar ppp = pp * p;\r\n\r\n\t\tvar offset1 = i1 * stride3;\r\n\t\tvar offset0 = offset1 - stride3;\r\n\r\n\t\tvar s0 = 2 * ppp - 3 * pp + 1;\r\n\t\tvar s1 = ppp - 2 * pp + p;\r\n\t\tvar s2 = - 2 * ppp + 3 * pp;\r\n\t\tvar s3 = ppp - pp;\r\n\r\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\r\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\r\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\r\n\r\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\r\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\r\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\r\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\r\n\r\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\t/*********************************/\r\n\t/********** INTERNALS ************/\r\n\t/*********************************/\r\n\r\n\t/* CONSTANTS */\r\n\r\n\tvar WEBGL_CONSTANTS = {\r\n\t\tFLOAT: 5126,\r\n\t\t//FLOAT_MAT2: 35674,\r\n\t\tFLOAT_MAT3: 35675,\r\n\t\tFLOAT_MAT4: 35676,\r\n\t\tFLOAT_VEC2: 35664,\r\n\t\tFLOAT_VEC3: 35665,\r\n\t\tFLOAT_VEC4: 35666,\r\n\t\tLINEAR: 9729,\r\n\t\tREPEAT: 10497,\r\n\t\tSAMPLER_2D: 35678,\r\n\t\tPOINTS: 0,\r\n\t\tLINES: 1,\r\n\t\tLINE_LOOP: 2,\r\n\t\tLINE_STRIP: 3,\r\n\t\tTRIANGLES: 4,\r\n\t\tTRIANGLE_STRIP: 5,\r\n\t\tTRIANGLE_FAN: 6,\r\n\t\tUNSIGNED_BYTE: 5121,\r\n\t\tUNSIGNED_SHORT: 5123\r\n\t};\r\n\r\n\tvar WEBGL_TYPE = {\r\n\t\t5126: Number,\r\n\t\t//35674: THREE.Matrix2,\r\n\t\t35675: THREE.Matrix3,\r\n\t\t35676: THREE.Matrix4,\r\n\t\t35664: THREE.Vector2,\r\n\t\t35665: THREE.Vector3,\r\n\t\t35666: THREE.Vector4,\r\n\t\t35678: THREE.Texture\r\n\t};\r\n\r\n\tvar WEBGL_COMPONENT_TYPES = {\r\n\t\t5120: Int8Array,\r\n\t\t5121: Uint8Array,\r\n\t\t5122: Int16Array,\r\n\t\t5123: Uint16Array,\r\n\t\t5125: Uint32Array,\r\n\t\t5126: Float32Array\r\n\t};\r\n\r\n\tvar WEBGL_FILTERS = {\r\n\t\t9728: THREE.NearestFilter,\r\n\t\t9729: THREE.LinearFilter,\r\n\t\t9984: THREE.NearestMipMapNearestFilter,\r\n\t\t9985: THREE.LinearMipMapNearestFilter,\r\n\t\t9986: THREE.NearestMipMapLinearFilter,\r\n\t\t9987: THREE.LinearMipMapLinearFilter\r\n\t};\r\n\r\n\tvar WEBGL_WRAPPINGS = {\r\n\t\t33071: THREE.ClampToEdgeWrapping,\r\n\t\t33648: THREE.MirroredRepeatWrapping,\r\n\t\t10497: THREE.RepeatWrapping\r\n\t};\r\n\r\n\tvar WEBGL_TEXTURE_FORMATS = {\r\n\t\t6406: THREE.AlphaFormat,\r\n\t\t6407: THREE.RGBFormat,\r\n\t\t6408: THREE.RGBAFormat,\r\n\t\t6409: THREE.LuminanceFormat,\r\n\t\t6410: THREE.LuminanceAlphaFormat\r\n\t};\r\n\r\n\tvar WEBGL_TEXTURE_DATATYPES = {\r\n\t\t5121: THREE.UnsignedByteType,\r\n\t\t32819: THREE.UnsignedShort4444Type,\r\n\t\t32820: THREE.UnsignedShort5551Type,\r\n\t\t33635: THREE.UnsignedShort565Type\r\n\t};\r\n\r\n\tvar WEBGL_SIDES = {\r\n\t\t1028: THREE.BackSide, // Culling front\r\n\t\t1029: THREE.FrontSide // Culling back\r\n\t\t//1032: THREE.NoSide   // Culling front and back, what to do?\r\n\t};\r\n\r\n\tvar WEBGL_DEPTH_FUNCS = {\r\n\t\t512: THREE.NeverDepth,\r\n\t\t513: THREE.LessDepth,\r\n\t\t514: THREE.EqualDepth,\r\n\t\t515: THREE.LessEqualDepth,\r\n\t\t516: THREE.GreaterEqualDepth,\r\n\t\t517: THREE.NotEqualDepth,\r\n\t\t518: THREE.GreaterEqualDepth,\r\n\t\t519: THREE.AlwaysDepth\r\n\t};\r\n\r\n\tvar WEBGL_BLEND_EQUATIONS = {\r\n\t\t32774: THREE.AddEquation,\r\n\t\t32778: THREE.SubtractEquation,\r\n\t\t32779: THREE.ReverseSubtractEquation\r\n\t};\r\n\r\n\tvar WEBGL_BLEND_FUNCS = {\r\n\t\t0: THREE.ZeroFactor,\r\n\t\t1: THREE.OneFactor,\r\n\t\t768: THREE.SrcColorFactor,\r\n\t\t769: THREE.OneMinusSrcColorFactor,\r\n\t\t770: THREE.SrcAlphaFactor,\r\n\t\t771: THREE.OneMinusSrcAlphaFactor,\r\n\t\t772: THREE.DstAlphaFactor,\r\n\t\t773: THREE.OneMinusDstAlphaFactor,\r\n\t\t774: THREE.DstColorFactor,\r\n\t\t775: THREE.OneMinusDstColorFactor,\r\n\t\t776: THREE.SrcAlphaSaturateFactor\r\n\t\t// The followings are not supported by Three.js yet\r\n\t\t//32769: CONSTANT_COLOR,\r\n\t\t//32770: ONE_MINUS_CONSTANT_COLOR,\r\n\t\t//32771: CONSTANT_ALPHA,\r\n\t\t//32772: ONE_MINUS_CONSTANT_COLOR\r\n\t};\r\n\r\n\tvar WEBGL_TYPE_SIZES = {\r\n\t\t'SCALAR': 1,\r\n\t\t'VEC2': 2,\r\n\t\t'VEC3': 3,\r\n\t\t'VEC4': 4,\r\n\t\t'MAT2': 4,\r\n\t\t'MAT3': 9,\r\n\t\t'MAT4': 16\r\n\t};\r\n\r\n\tvar ATTRIBUTES = {\r\n\t\tPOSITION: 'position',\r\n\t\tNORMAL: 'normal',\r\n\t\tTEXCOORD_0: 'uv',\r\n\t\tTEXCOORD0: 'uv', // deprecated\r\n\t\tTEXCOORD: 'uv', // deprecated\r\n\t\tTEXCOORD_1: 'uv2',\r\n\t\tCOLOR_0: 'color',\r\n\t\tCOLOR0: 'color', // deprecated\r\n\t\tCOLOR: 'color', // deprecated\r\n\t\tWEIGHTS_0: 'skinWeight',\r\n\t\tWEIGHT: 'skinWeight', // deprecated\r\n\t\tJOINTS_0: 'skinIndex',\r\n\t\tJOINT: 'skinIndex' // deprecated\r\n\t};\r\n\r\n\tvar PATH_PROPERTIES = {\r\n\t\tscale: 'scale',\r\n\t\ttranslation: 'position',\r\n\t\trotation: 'quaternion',\r\n\t\tweights: 'morphTargetInfluences'\r\n\t};\r\n\r\n\tvar INTERPOLATION = {\r\n\t\tCUBICSPLINE: THREE.InterpolateSmooth, // We use custom interpolation GLTFCubicSplineInterpolation for CUBICSPLINE.\r\n\t\t                                      // KeyframeTrack.optimize() can't handle glTF Cubic Spline output values layout,\r\n\t\t                                      // using THREE.InterpolateSmooth for KeyframeTrack instantiation to prevent optimization.\r\n\t\t                                      // See KeyframeTrack.optimize() for the detail.\r\n\t\tLINEAR: THREE.InterpolateLinear,\r\n\t\tSTEP: THREE.InterpolateDiscrete\r\n\t};\r\n\r\n\tvar STATES_ENABLES = {\r\n\t\t2884: 'CULL_FACE',\r\n\t\t2929: 'DEPTH_TEST',\r\n\t\t3042: 'BLEND',\r\n\t\t3089: 'SCISSOR_TEST',\r\n\t\t32823: 'POLYGON_OFFSET_FILL',\r\n\t\t32926: 'SAMPLE_ALPHA_TO_COVERAGE'\r\n\t};\r\n\r\n\tvar ALPHA_MODES = {\r\n\t\tOPAQUE: 'OPAQUE',\r\n\t\tMASK: 'MASK',\r\n\t\tBLEND: 'BLEND'\r\n\t};\r\n\r\n\t/* UTILITY FUNCTIONS */\r\n\r\n\tfunction resolveURL( url, path ) {\r\n\r\n\t\t// Invalid URL\r\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\r\n\r\n\t\t// Absolute URL http://,https://,//\r\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\r\n\r\n\t\t// Data URI\r\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\r\n\r\n\t\t// Blob URL\r\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\r\n\r\n\t\t// Relative URL\r\n\t\treturn path + url;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\r\n\t */\r\n\tfunction createDefaultMaterial() {\r\n\r\n\t\treturn new THREE.MeshStandardMaterial( {\r\n\t\t\tcolor: 0xFFFFFF,\r\n\t\t\temissive: 0x000000,\r\n\t\t\tmetalness: 1,\r\n\t\t\troughness: 1,\r\n\t\t\ttransparent: false,\r\n\t\t\tdepthTest: true,\r\n\t\t\tside: THREE.FrontSide\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\r\n\r\n\t\t// Add unknown glTF extensions to an object's userData.\r\n\r\n\t\tfor ( var name in objectDef.extensions ) {\r\n\r\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\r\n\r\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\r\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\r\n\t *\r\n\t * @param {THREE.BufferGeometry} geometry\r\n\t * @param {Array<GLTF.Target>} targets\r\n\t * @param {Array<THREE.BufferAttribute>} accessors\r\n\t */\r\n\tfunction addMorphTargets( geometry, targets, accessors ) {\r\n\r\n\t\tvar hasMorphPosition = false;\r\n\t\tvar hasMorphNormal = false;\r\n\r\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar target = targets[ i ];\r\n\r\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\r\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\r\n\r\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return;\r\n\r\n\t\tvar morphPositions = [];\r\n\t\tvar morphNormals = [];\r\n\r\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar target = targets[ i ];\r\n\t\t\tvar attributeName = 'morphTarget' + i;\r\n\r\n\t\t\tif ( hasMorphPosition ) {\r\n\r\n\t\t\t\t// Three.js morph position is absolute value. The formula is\r\n\t\t\t\t//   basePosition\r\n\t\t\t\t//     + weight0 * ( morphPosition0 - basePosition )\r\n\t\t\t\t//     + weight1 * ( morphPosition1 - basePosition )\r\n\t\t\t\t//     ...\r\n\t\t\t\t// while the glTF one is relative\r\n\t\t\t\t//   basePosition\r\n\t\t\t\t//     + weight0 * glTFmorphPosition0\r\n\t\t\t\t//     + weight1 * glTFmorphPosition1\r\n\t\t\t\t//     ...\r\n\t\t\t\t// then we need to convert from relative to absolute here.\r\n\r\n\t\t\t\tif ( target.POSITION !== undefined ) {\r\n\r\n\t\t\t\t\t// Cloning not to pollute original accessor\r\n\t\t\t\t\tvar positionAttribute = cloneBufferAttribute( accessors[ target.POSITION ] );\r\n\t\t\t\t\tpositionAttribute.name = attributeName;\r\n\r\n\t\t\t\t\tvar position = geometry.attributes.position;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = positionAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tpositionAttribute.setXYZ(\r\n\t\t\t\t\t\t\tj,\r\n\t\t\t\t\t\t\tpositionAttribute.getX( j ) + position.getX( j ),\r\n\t\t\t\t\t\t\tpositionAttribute.getY( j ) + position.getY( j ),\r\n\t\t\t\t\t\t\tpositionAttribute.getZ( j ) + position.getZ( j )\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tpositionAttribute = geometry.attributes.position;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphPositions.push( positionAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasMorphNormal ) {\r\n\r\n\t\t\t\t// see target.POSITION's comment\r\n\r\n\t\t\t\tvar normalAttribute;\r\n\r\n\t\t\t\tif ( target.NORMAL !== undefined ) {\r\n\r\n\t\t\t\t\tvar normalAttribute = cloneBufferAttribute( accessors[ target.NORMAL ] );\r\n\t\t\t\t\tnormalAttribute.name = attributeName;\r\n\r\n\t\t\t\t\tvar normal = geometry.attributes.normal;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = normalAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tnormalAttribute.setXYZ(\r\n\t\t\t\t\t\t\tj,\r\n\t\t\t\t\t\t\tnormalAttribute.getX( j ) + normal.getX( j ),\r\n\t\t\t\t\t\t\tnormalAttribute.getY( j ) + normal.getY( j ),\r\n\t\t\t\t\t\t\tnormalAttribute.getZ( j ) + normal.getZ( j )\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tnormalAttribute = geometry.attributes.normal;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphNormals.push( normalAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\r\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param {THREE.Mesh} mesh\r\n\t * @param {GLTF.Mesh} meshDef\r\n\t */\r\n\tfunction updateMorphTargets( mesh, meshDef ) {\r\n\r\n\t\tmesh.updateMorphTargets();\r\n\r\n\t\tif ( meshDef.weights !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\r\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\r\n\r\n\t\t\tvar targetNames = meshDef.extras.targetNames;\r\n\r\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\r\n\r\n\t\t\t\tmesh.morphTargetDictionary = {};\r\n\r\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction isPrimitiveEqual( a, b ) {\r\n\r\n\t\tif ( a.indices !== b.indices ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn isObjectEqual( a.attributes, b.attributes );\r\n\r\n\t}\r\n\r\n\tfunction isObjectEqual( a, b ) {\r\n\r\n\t\tif ( Object.keys( a ).length !== Object.keys( b ).length ) return false;\r\n\r\n\t\tfor ( var key in a ) {\r\n\r\n\t\t\tif ( a[ key ] !== b[ key ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction isArrayEqual( a, b ) {\r\n\r\n\t\tif ( a.length !== b.length ) return false;\r\n\r\n\t\tfor ( var i = 0, il = a.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( a[ i ] !== b[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction getCachedGeometry( cache, newPrimitive ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( isPrimitiveEqual( cached.primitive, newPrimitive ) ) return cached.promise;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction getCachedCombinedGeometry( cache, geometries ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( isArrayEqual( geometries, cached.baseGeometries ) ) return cached.geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction getCachedMultiPassGeometry( cache, geometry, primitives ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( geometry === cached.baseGeometry && isArrayEqual( primitives, cached.primitives ) ) return cached.geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction cloneBufferAttribute( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tvar count = attribute.count;\r\n\t\t\tvar itemSize = attribute.itemSize;\r\n\t\t\tvar array = attribute.array.slice( 0, count * itemSize );\r\n\r\n\t\t\tfor ( var i = 0; i < count; ++ i ) {\r\n\r\n\t\t\t\tarray[ i ] = attribute.getX( i );\r\n\t\t\t\tif ( itemSize >= 2 ) array[ i + 1 ] = attribute.getY( i );\r\n\t\t\t\tif ( itemSize >= 3 ) array[ i + 2 ] = attribute.getZ( i );\r\n\t\t\t\tif ( itemSize >= 4 ) array[ i + 3 ] = attribute.getW( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new THREE.BufferAttribute( array, itemSize, attribute.normalized );\r\n\r\n\t\t}\r\n\r\n\t\treturn attribute.clone();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if we can build a single Mesh with MultiMaterial from multiple primitives.\r\n\t * Returns true if all primitives use the same attributes/morphAttributes/mode\r\n\t * and also have index. Otherwise returns false.\r\n\t *\r\n\t * @param {Array<GLTF.Primitive>} primitives\r\n\t * @return {Boolean}\r\n\t */\r\n\tfunction isMultiPassGeometry( primitives ) {\r\n\r\n\t\tif ( primitives.length < 2 ) return false;\r\n\r\n\t\tvar primitive0 = primitives[ 0 ];\r\n\t\tvar targets0 = primitive0.targets || [];\r\n\r\n\t\tif ( primitive0.indices === undefined ) return false;\r\n\r\n\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\tif ( primitive0.mode !== primitive.mode ) return false;\r\n\t\t\tif ( primitive.indices === undefined ) return false;\r\n\t\t\tif ( ! isObjectEqual( primitive0.attributes, primitive.attributes ) ) return false;\r\n\r\n\t\t\tvar targets = primitive.targets || [];\r\n\r\n\t\t\tif ( targets0.length !== targets.length ) return false;\r\n\r\n\t\t\tfor ( var j = 0, jl = targets0.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tif ( ! isObjectEqual( targets0[ j ], targets[ j ] ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\t/* GLTF PARSER */\r\n\r\n\tfunction GLTFParser( json, extensions, options ) {\r\n\r\n\t\tthis.json = json || {};\r\n\t\tthis.extensions = extensions || {};\r\n\t\tthis.options = options || {};\r\n\r\n\t\t// loader object cache\r\n\t\tthis.cache = new GLTFRegistry();\r\n\r\n\t\t// BufferGeometry caching\r\n\t\tthis.primitiveCache = [];\r\n\t\tthis.multiplePrimitivesCache = [];\r\n\t\tthis.multiPassGeometryCache = [];\r\n\r\n\t\tthis.textureLoader = new THREE.TextureLoader( this.options.manager );\r\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\r\n\r\n\t\tthis.fileLoader = new THREE.FileLoader( this.options.manager );\r\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\r\n\r\n\t}\r\n\r\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\r\n\r\n\t\tvar json = this.json;\r\n\r\n\t\t// Clear the loader cache\r\n\t\tthis.cache.removeAll();\r\n\r\n\t\t// Mark the special nodes/meshes in json for efficient parse\r\n\t\tthis.markDefs();\r\n\r\n\t\t// Fire the callback on complete\r\n\t\tthis.getMultiDependencies( [\r\n\r\n\t\t\t'scene',\r\n\t\t\t'animation',\r\n\t\t\t'camera'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar scenes = dependencies.scenes || [];\r\n\t\t\tvar scene = scenes[ json.scene || 0 ];\r\n\t\t\tvar animations = dependencies.animations || [];\r\n\t\t\tvar cameras = dependencies.cameras || [];\r\n\r\n\t\t\tonLoad( scene, scenes, cameras, animations, json );\r\n\r\n\t\t} ).catch( onError );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Marks the special nodes/meshes in json for efficient parse.\r\n\t */\r\n\tGLTFParser.prototype.markDefs = function () {\r\n\r\n\t\tvar nodeDefs = this.json.nodes || [];\r\n\t\tvar skinDefs = this.json.skins || [];\r\n\t\tvar meshDefs = this.json.meshes || [];\r\n\r\n\t\tvar meshReferences = {};\r\n\t\tvar meshUses = {};\r\n\r\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\r\n\t\t// Object3D. Use the skins' joint references to mark bones.\r\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\r\n\r\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\r\n\r\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\r\n\t\t// avoid having more than one THREE.Mesh with the same name, count\r\n\t\t// references and rename instances below.\r\n\t\t//\r\n\t\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\r\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\r\n\r\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\r\n\r\n\t\t\tif ( nodeDef.mesh !== undefined ) {\r\n\r\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] === undefined ) {\r\n\r\n\t\t\t\t\tmeshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmeshReferences[ nodeDef.mesh ] ++;\r\n\r\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\r\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\r\n\t\t\t\t// to mark SkinnedMesh if node has skin.\r\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\r\n\r\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.json.meshReferences = meshReferences;\r\n\t\tthis.json.meshUses = meshUses;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests the specified dependency asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @param {number} index\r\n\t * @return {Promise<Object>}\r\n\t */\r\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\r\n\r\n\t\tvar cacheKey = type + ':' + index;\r\n\t\tvar dependency = this.cache.get( cacheKey );\r\n\r\n\t\tif ( ! dependency ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 'scene':\r\n\t\t\t\t\tdependency = this.loadScene( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'node':\r\n\t\t\t\t\tdependency = this.loadNode( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'mesh':\r\n\t\t\t\t\tdependency = this.loadMesh( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'accessor':\r\n\t\t\t\t\tdependency = this.loadAccessor( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bufferView':\r\n\t\t\t\t\tdependency = this.loadBufferView( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'buffer':\r\n\t\t\t\t\tdependency = this.loadBuffer( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'material':\r\n\t\t\t\t\tdependency = this.loadMaterial( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'texture':\r\n\t\t\t\t\tdependency = this.loadTexture( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'skin':\r\n\t\t\t\t\tdependency = this.loadSkin( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'animation':\r\n\t\t\t\t\tdependency = this.loadAnimation( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'camera':\r\n\t\t\t\t\tdependency = this.loadCamera( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.cache.add( cacheKey, dependency );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependency;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests all dependencies of the specified type asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @return {Promise<Array<Object>>}\r\n\t */\r\n\tGLTFParser.prototype.getDependencies = function ( type ) {\r\n\r\n\t\tvar dependencies = this.cache.get( type );\r\n\r\n\t\tif ( ! dependencies ) {\r\n\r\n\t\t\tvar parser = this;\r\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\r\n\r\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\r\n\r\n\t\t\t\treturn parser.getDependency( type, index );\r\n\r\n\t\t\t} ) );\r\n\r\n\t\t\tthis.cache.add( type, dependencies );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependencies;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests all multiple dependencies of the specified types asynchronously, with caching.\r\n\t * @param {Array<string>} types\r\n\t * @return {Promise<Object<Array<Object>>>}\r\n\t */\r\n\tGLTFParser.prototype.getMultiDependencies = function ( types ) {\r\n\r\n\t\tvar results = {};\r\n\t\tvar pendings = [];\r\n\r\n\t\tfor ( var i = 0, il = types.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar type = types[ i ];\r\n\t\t\tvar value = this.getDependencies( type );\r\n\r\n\t\t\tvalue = value.then( function ( key, value ) {\r\n\r\n\t\t\t\tresults[ key ] = value;\r\n\r\n\t\t\t}.bind( this, type + ( type === 'mesh' ? 'es' : 's' ) ) );\r\n\r\n\t\t\tpendings.push( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pendings ).then( function () {\r\n\r\n\t\t\treturn results;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\r\n\r\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\r\n\t\tvar loader = this.fileLoader;\r\n\r\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\t// If present, GLB container is required to be the first buffer.\r\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\r\n\r\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\r\n\r\n\t\t}\r\n\r\n\t\tvar options = this.options;\r\n\r\n\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\r\n\r\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferViewIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\r\n\r\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\r\n\r\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\r\n\r\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\r\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\r\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\r\n\t * @param {number} accessorIndex\r\n\t * @return {Promise<THREE.BufferAttribute|THREE.InterleavedBufferAttribute>}\r\n\t */\r\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\r\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\r\n\r\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\r\n\r\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\r\n\t\t\t// information about attributes coming from another source (e.g. Draco\r\n\t\t\t// compression extension).\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar pendingBufferViews = [];\r\n\r\n\t\tif ( accessorDef.bufferView !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpendingBufferViews.push( null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\r\n\r\n\t\t\tvar bufferView = bufferViews[ 0 ];\r\n\r\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\r\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\r\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\r\n\t\t\tvar itemBytes = elementBytes * itemSize;\r\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\r\n\t\t\tvar byteStride = json.bufferViews[ accessorDef.bufferView ].byteStride;\r\n\t\t\tvar normalized = accessorDef.normalized === true;\r\n\t\t\tvar array, bufferAttribute;\r\n\r\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\r\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\r\n\r\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType;\r\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\r\n\r\n\t\t\t\tif ( ! ib ) {\r\n\r\n\t\t\t\t\t// Use the full buffer if it's interleaved.\r\n\t\t\t\t\tarray = new TypedArray( bufferView );\r\n\r\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\r\n\t\t\t\t\tib = new THREE.InterleavedBuffer( array, byteStride / elementBytes );\r\n\r\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new THREE.InterleavedBufferAttribute( ib, itemSize, byteOffset / elementBytes, normalized );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( bufferView === null ) {\r\n\r\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new THREE.BufferAttribute( array, itemSize, normalized );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\r\n\t\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\r\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\r\n\r\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\r\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\r\n\r\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\r\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\r\n\r\n\t\t\t\tif ( bufferView !== null ) {\r\n\r\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\r\n\t\t\t\t\tbufferAttribute.setArray( bufferAttribute.array.slice() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar index = sparseIndices[ i ];\r\n\r\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\r\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\r\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\r\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\r\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn bufferAttribute;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\r\n\t * @param {number} textureIndex\r\n\t * @return {Promise<THREE.Texture>}\r\n\t */\r\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\t\tvar options = this.options;\r\n\t\tvar textureLoader = this.textureLoader;\r\n\r\n\t\tvar URL = window.URL || window.webkitURL;\r\n\r\n\t\tvar textureDef = json.textures[ textureIndex ];\r\n\r\n\t\tvar textureExtensions = textureDef.extensions || {};\r\n\r\n\t\tvar source;\r\n\r\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\r\n\r\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tsource = json.images[ textureDef.source ];\r\n\r\n\t\t}\r\n\r\n\t\tvar sourceURI = source.uri;\r\n\t\tvar isObjectURL = false;\r\n\r\n\t\tif ( source.bufferView !== undefined ) {\r\n\r\n\t\t\t// Load binary image data from bufferView, if provided.\r\n\r\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\r\n\r\n\t\t\t\tisObjectURL = true;\r\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\r\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\r\n\t\t\t\treturn sourceURI;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\r\n\r\n\t\t\t// Load Texture resource.\r\n\r\n\t\t\tvar loader = THREE.Loader.Handlers.get( sourceURI );\r\n\r\n\t\t\tif ( ! loader ) {\r\n\r\n\t\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\r\n\t\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\r\n\t\t\t\t\t: textureLoader;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} ).then( function ( texture ) {\r\n\r\n\t\t\t// Clean up resources and configure Texture.\r\n\r\n\t\t\tif ( isObjectURL === true ) {\r\n\r\n\t\t\t\tURL.revokeObjectURL( sourceURI );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.flipY = false;\r\n\r\n\t\t\tif ( textureDef.name !== undefined ) texture.name = textureDef.name;\r\n\r\n\t\t\t// .format of dds texture is set in DDSLoader\r\n\t\t\tif ( ! textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\r\n\r\n\t\t\t\ttexture.format = textureDef.format !== undefined ? WEBGL_TEXTURE_FORMATS[ textureDef.format ] : THREE.RGBAFormat;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( textureDef.internalFormat !== undefined && texture.format !== WEBGL_TEXTURE_FORMATS[ textureDef.internalFormat ] ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. ' +\r\n\t\t\t\t\t\t\t\t\t\t\t'internalFormat will be forced to be the same value as format.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.type = textureDef.type !== undefined ? WEBGL_TEXTURE_DATATYPES[ textureDef.type ] : THREE.UnsignedByteType;\r\n\r\n\t\t\tvar samplers = json.samplers || {};\r\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\r\n\r\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || THREE.LinearMipMapLinearFilter;\r\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || THREE.RepeatWrapping;\r\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || THREE.RepeatWrapping;\r\n\r\n\t\t\treturn texture;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Asynchronously assigns a texture to the given material parameters.\r\n\t * @param {Object} materialParams\r\n\t * @param {string} textureName\r\n\t * @param {number} textureIndex\r\n\t * @return {Promise}\r\n\t */\r\n\tGLTFParser.prototype.assignTexture = function ( materialParams, textureName, textureIndex ) {\r\n\r\n\t\treturn this.getDependency( 'texture', textureIndex ).then( function ( texture ) {\r\n\r\n\t\t\tmaterialParams[ textureName ] = texture;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\r\n\t * @param {number} materialIndex\r\n\t * @return {Promise<THREE.Material>}\r\n\t */\r\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\t\tvar materialDef = this.json.materials[ materialIndex ];\r\n\r\n\t\tvar materialType;\r\n\t\tvar materialParams = {};\r\n\t\tvar materialExtensions = materialDef.extensions || {};\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\r\n\r\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\r\n\t\t\tmaterialType = sgExtension.getMaterialType( materialDef );\r\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\r\n\r\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\r\n\r\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\r\n\t\t\tmaterialType = kmuExtension.getMaterialType( materialDef );\r\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Specification:\r\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\r\n\r\n\t\t\tmaterialType = THREE.MeshStandardMaterial;\r\n\r\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\r\n\r\n\t\t\tmaterialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\t\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.fromArray( array );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\r\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\r\n\r\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\r\n\r\n\t\t\t\tvar textureIndex = metallicRoughness.metallicRoughnessTexture.index;\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', textureIndex ) );\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', textureIndex ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.doubleSided === true ) {\r\n\r\n\t\t\tmaterialParams.side = THREE.DoubleSide;\r\n\r\n\t\t}\r\n\r\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\r\n\r\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\r\n\r\n\t\t\tmaterialParams.transparent = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterialParams.transparent = false;\r\n\r\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\r\n\r\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture.index ) );\r\n\r\n\t\t\tmaterialParams.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\r\n\r\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture.index ) );\r\n\r\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\r\n\r\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tmaterialParams.emissive = new THREE.Color().fromArray( materialDef.emissiveFactor );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture.index ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function () {\r\n\r\n\t\t\tvar material;\r\n\r\n\t\t\tif ( materialType === THREE.ShaderMaterial ) {\r\n\r\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial = new materialType( materialParams );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materialDef.name !== undefined ) material.name = materialDef.name;\r\n\r\n\t\t\t// Normal map textures use OpenGL conventions:\r\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#materialnormaltexture\r\n\t\t\tif ( material.normalScale ) {\r\n\r\n\t\t\t\tmaterial.normalScale.y = - material.normalScale.y;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\r\n\t\t\tif ( material.map ) material.map.encoding = THREE.sRGBEncoding;\r\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = THREE.sRGBEncoding;\r\n\t\t\tif ( material.specularMap ) material.specularMap.encoding = THREE.sRGBEncoding;\r\n\r\n\t\t\tif ( materialDef.extras ) material.userData = materialDef.extras;\r\n\r\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * @param  {THREE.BufferGeometry} geometry\r\n\t * @param  {GLTF.Primitive} primitiveDef\r\n\t * @param  {Array<THREE.BufferAttribute>} accessors\r\n\t */\r\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, accessors ) {\r\n\r\n\t\tvar attributes = primitiveDef.attributes;\r\n\r\n\t\tfor ( var gltfAttributeName in attributes ) {\r\n\r\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ];\r\n\t\t\tvar bufferAttribute = accessors[ attributes[ gltfAttributeName ] ];\r\n\r\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\r\n\t\t\tif ( ! threeAttributeName ) continue;\r\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\r\n\r\n\t\t\tgeometry.addAttribute( threeAttributeName, bufferAttribute );\r\n\r\n\t\t}\r\n\r\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\r\n\r\n\t\t\tgeometry.setIndex( accessors[ primitiveDef.indices ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( primitiveDef.targets !== undefined ) {\r\n\r\n\t\t\taddMorphTargets( geometry, primitiveDef.targets, accessors );\r\n\r\n\t\t}\r\n\r\n\t\tif ( primitiveDef.extras !== undefined ) {\r\n\r\n\t\t\tgeometry.userData = primitiveDef.extras;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\r\n\t *\r\n\t * Creates BufferGeometries from primitives.\r\n\t * If we can build a single BufferGeometry with .groups from multiple primitives, returns one BufferGeometry.\r\n\t * Otherwise, returns BufferGeometries without .groups as many as primitives.\r\n\t *\r\n\t * @param {Array<Object>} primitives\r\n\t * @return {Promise<Array<THREE.BufferGeometry>>}\r\n\t */\r\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar extensions = this.extensions;\r\n\t\tvar cache = this.primitiveCache;\r\n\r\n\t\tvar isMultiPass = isMultiPassGeometry( primitives );\r\n\t\tvar originalPrimitives;\r\n\r\n\t\tif ( isMultiPass ) {\r\n\r\n\t\t\toriginalPrimitives = primitives; // save original primitives and use later\r\n\r\n\t\t\t// We build a single BufferGeometry with .groups from multiple primitives\r\n\t\t\t// because all primitives share the same attributes/morph/mode and have indices.\r\n\r\n\t\t\tprimitives = [ primitives[ 0 ] ];\r\n\r\n\t\t\t// Sets .groups and combined indices to a geometry later in this method.\r\n\r\n\t\t}\r\n\r\n\t\treturn this.getDependencies( 'accessor' ).then( function ( accessors ) {\r\n\r\n\t\t\tvar pending = [];\r\n\r\n\t\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\t\t// See if we've already created this geometry\r\n\t\t\t\tvar cached = getCachedGeometry( cache, primitive );\r\n\r\n\t\t\t\tif ( cached ) {\r\n\r\n\t\t\t\t\t// Use the cached geometry if it exists\r\n\t\t\t\t\tpending.push( cached );\r\n\r\n\t\t\t\t} else if ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\r\n\r\n\t\t\t\t\t// Use DRACO geometry if available\r\n\t\t\t\t\tvar geometryPromise = extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\r\n\t\t\t\t\t\t.decodePrimitive( primitive, parser )\r\n\t\t\t\t\t\t.then( function ( geometry ) {\r\n\r\n\t\t\t\t\t\t\taddPrimitiveAttributes( geometry, primitive, accessors );\r\n\r\n\t\t\t\t\t\t\treturn geometry;\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\tcache.push( { primitive: primitive, promise: geometryPromise } );\r\n\r\n\t\t\t\t\tpending.push( geometryPromise );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Otherwise create a new geometry\r\n\t\t\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\t\t\t\taddPrimitiveAttributes( geometry, primitive, accessors );\r\n\r\n\t\t\t\t\tvar geometryPromise = Promise.resolve( geometry );\r\n\r\n\t\t\t\t\t// Cache this geometry\r\n\t\t\t\t\tcache.push( { primitive: primitive, promise: geometryPromise } );\r\n\r\n\t\t\t\t\tpending.push( geometryPromise );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn Promise.all( pending ).then( function ( geometries ) {\r\n\r\n\t\t\t\tif ( isMultiPass ) {\r\n\r\n\t\t\t\t\tvar baseGeometry = geometries[ 0 ];\r\n\r\n\t\t\t\t\t// See if we've already created this combined geometry\r\n\t\t\t\t\tvar cache = parser.multiPassGeometryCache;\r\n\t\t\t\t\tvar cached = getCachedMultiPassGeometry( cache, baseGeometry, originalPrimitives );\r\n\r\n\t\t\t\t\tif ( cached !== null ) return [ cached.geometry ];\r\n\r\n\t\t\t\t\t// Cloning geometry because of index override.\r\n\t\t\t\t\t// Attributes can be reused so cloning by myself here.\r\n\t\t\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\t\t\t\tgeometry.name = baseGeometry.name;\r\n\t\t\t\t\tgeometry.userData = baseGeometry.userData;\r\n\r\n\t\t\t\t\tfor ( var key in baseGeometry.attributes ) geometry.addAttribute( key, baseGeometry.attributes[ key ] );\r\n\t\t\t\t\tfor ( var key in baseGeometry.morphAttributes ) geometry.morphAttributes[ key ] = baseGeometry.morphAttributes[ key ];\r\n\r\n\t\t\t\t\tvar indices = [];\r\n\t\t\t\t\tvar offset = 0;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = originalPrimitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar accessor = accessors[ originalPrimitives[ i ].indices ];\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = accessor.count; j < jl; j ++ ) indices.push( accessor.array[ j ] );\r\n\r\n\t\t\t\t\t\tgeometry.addGroup( offset, accessor.count, i );\r\n\r\n\t\t\t\t\t\toffset += accessor.count;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.setIndex( indices );\r\n\r\n\t\t\t\t\tcache.push( { geometry: geometry, baseGeometry: baseGeometry, primitives: originalPrimitives } );\r\n\r\n\t\t\t\t\treturn [ geometry ];\r\n\r\n\t\t\t\t} else if ( geometries.length > 1 && BufferGeometryUtils !== undefined ) {\r\n\r\n\t\t\t\t\t// Tries to merge geometries with BufferGeometryUtils if possible\r\n\r\n\t\t\t\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t// can't merge if draw mode is different\r\n\t\t\t\t\t\tif ( primitives[ 0 ].mode !== primitives[ i ].mode ) return geometries;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// See if we've already created this combined geometry\r\n\t\t\t\t\tvar cache = parser.multiplePrimitivesCache;\r\n\t\t\t\t\tvar cached = getCachedCombinedGeometry( cache, geometries );\r\n\r\n\t\t\t\t\tif ( cached ) {\r\n\r\n\t\t\t\t\t\tif ( cached.geometry !== null ) return [ cached.geometry ];\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar geometry = BufferGeometryUtils.mergeBufferGeometries( geometries, true );\r\n\r\n\t\t\t\t\t\tcache.push( { geometry: geometry, baseGeometries: geometries } );\r\n\r\n\t\t\t\t\t\tif ( geometry !== null ) return [ geometry ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometries;\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\r\n\t * @param {number} meshIndex\r\n\t * @return {Promise<THREE.Group|THREE.Mesh|THREE.SkinnedMesh>}\r\n\t */\r\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\r\n\r\n\t\tvar scope = this;\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\r\n\t\tvar meshDef = this.json.meshes[ meshIndex ];\r\n\r\n\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t'accessor',\r\n\t\t\t'material'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar primitives = meshDef.primitives;\r\n\t\t\tvar originalMaterials = [];\r\n\r\n\t\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\toriginalMaterials[ i ] = primitives[ i ].material === undefined\r\n\t\t\t\t\t? createDefaultMaterial()\r\n\t\t\t\t\t: dependencies.materials[ primitives[ i ].material ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn scope.loadGeometries( primitives ).then( function ( geometries ) {\r\n\r\n\t\t\t\tvar isMultiMaterial = geometries.length === 1 && geometries[ 0 ].groups.length > 0;\r\n\r\n\t\t\t\tvar meshes = [];\r\n\r\n\t\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar geometry = geometries[ i ];\r\n\t\t\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\t\t\t// 1. create Mesh\r\n\r\n\t\t\t\t\tvar mesh;\r\n\r\n\t\t\t\t\tvar material = isMultiMaterial ? originalMaterials : originalMaterials[ i ];\r\n\r\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\r\n\t\t\t\t\t\tprimitive.mode === undefined ) {\r\n\r\n\t\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See .markDefs()\r\n\t\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\r\n\t\t\t\t\t\t\t? new THREE.SkinnedMesh( geometry, material )\r\n\t\t\t\t\t\t\t: new THREE.Mesh( geometry, material );\r\n\r\n\t\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\r\n\r\n\t\t\t\t\t\t\tmesh.drawMode = THREE.TriangleStripDrawMode;\r\n\r\n\t\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\r\n\r\n\t\t\t\t\t\t\tmesh.drawMode = THREE.TriangleFanDrawMode;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.LineSegments( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Line( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.LineLoop( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Points( geometry, material );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\r\n\r\n\t\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\r\n\r\n\t\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\r\n\r\n\t\t\t\t\tif ( meshDef.extras !== undefined ) mesh.userData = meshDef.extras;\r\n\r\n\t\t\t\t\tmeshes.push( mesh );\r\n\r\n\t\t\t\t\t// 2. update Material depending on Mesh and BufferGeometry\r\n\r\n\t\t\t\t\tvar materials = isMultiMaterial ? mesh.material : [ mesh.material ];\r\n\r\n\t\t\t\t\tvar useVertexColors = geometry.attributes.color !== undefined;\r\n\t\t\t\t\tvar useFlatShading = geometry.attributes.normal === undefined;\r\n\t\t\t\t\tvar useSkinning = mesh.isSkinnedMesh === true;\r\n\t\t\t\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\r\n\t\t\t\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = materials.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar material = materials[ j ];\r\n\r\n\t\t\t\t\t\tif ( mesh.isPoints ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\r\n\r\n\t\t\t\t\t\t\tvar pointsMaterial = scope.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! pointsMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tpointsMaterial = new THREE.PointsMaterial();\r\n\t\t\t\t\t\t\t\tTHREE.Material.prototype.copy.call( pointsMaterial, material );\r\n\t\t\t\t\t\t\t\tpointsMaterial.color.copy( material.color );\r\n\t\t\t\t\t\t\t\tpointsMaterial.map = material.map;\r\n\t\t\t\t\t\t\t\tpointsMaterial.lights = false; // PointsMaterial doesn't support lights yet\r\n\r\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, pointsMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = pointsMaterial;\r\n\r\n\t\t\t\t\t\t} else if ( mesh.isLine ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\r\n\r\n\t\t\t\t\t\t\tvar lineMaterial = scope.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! lineMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tlineMaterial = new THREE.LineBasicMaterial();\r\n\t\t\t\t\t\t\t\tTHREE.Material.prototype.copy.call( lineMaterial, material );\r\n\t\t\t\t\t\t\t\tlineMaterial.color.copy( material.color );\r\n\t\t\t\t\t\t\t\tlineMaterial.lights = false; // LineBasicMaterial doesn't support lights yet\r\n\r\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, lineMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = lineMaterial;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Clone the material if it will be modified\r\n\t\t\t\t\t\tif ( useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\r\n\r\n\t\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\r\n\t\t\t\t\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\r\n\t\t\t\t\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\r\n\t\t\t\t\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\r\n\t\t\t\t\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\r\n\t\t\t\t\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\r\n\r\n\t\t\t\t\t\t\tvar cachedMaterial = scope.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! cachedMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tcachedMaterial = material.isGLTFSpecularGlossinessMaterial\r\n\t\t\t\t\t\t\t\t\t? extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].cloneMaterial( material )\r\n\t\t\t\t\t\t\t\t\t: material.clone();\r\n\r\n\t\t\t\t\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\r\n\t\t\t\t\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = THREE.VertexColors;\r\n\t\t\t\t\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\r\n\t\t\t\t\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\r\n\t\t\t\t\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\r\n\r\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, cachedMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = cachedMaterial;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmaterials[ j ] = material;\r\n\r\n\t\t\t\t\t\t// workarounds for mesh and geometry\r\n\r\n\t\t\t\t\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tconsole.log( 'THREE.GLTFLoader: Duplicating UVs to support aoMap.' );\r\n\t\t\t\t\t\t\tgeometry.addAttribute( 'uv2', new THREE.BufferAttribute( geometry.attributes.uv.array, 2 ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\r\n\r\n\t\t\t\t\t\t\t// for GLTFSpecularGlossinessMaterial(ShaderMaterial) uniforms runtime update\r\n\t\t\t\t\t\t\tmesh.onBeforeRender = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].refreshUniforms;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.material = isMultiMaterial ? materials : materials[ 0 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( meshes.length === 1 ) {\r\n\r\n\t\t\t\t\treturn meshes[ 0 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar group = new THREE.Group();\r\n\r\n\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tgroup.add( meshes[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn group;\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\r\n\t * @param {number} cameraIndex\r\n\t * @return {Promise<THREE.Camera>}\r\n\t */\r\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\r\n\r\n\t\tvar camera;\r\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\r\n\t\tvar params = cameraDef[ cameraDef.type ];\r\n\r\n\t\tif ( ! params ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.type === 'perspective' ) {\r\n\r\n\t\t\tcamera = new THREE.PerspectiveCamera( THREE.Math.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\r\n\r\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\r\n\r\n\t\t\tcamera = new THREE.OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.name !== undefined ) camera.name = cameraDef.name;\r\n\t\tif ( cameraDef.extras ) camera.userData = cameraDef.extras;\r\n\r\n\t\treturn Promise.resolve( camera );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\r\n\t * @param {number} skinIndex\r\n\t * @return {Promise<Object>}\r\n\t */\r\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\r\n\r\n\t\tvar skinDef = this.json.skins[ skinIndex ];\r\n\r\n\t\tvar skinEntry = { joints: skinDef.joints };\r\n\r\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\r\n\r\n\t\t\treturn Promise.resolve( skinEntry );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\r\n\r\n\t\t\tskinEntry.inverseBindMatrices = accessor;\r\n\r\n\t\t\treturn skinEntry;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\r\n\t * @param {number} animationIndex\r\n\t * @return {Promise<THREE.AnimationClip>}\r\n\t */\r\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\r\n\r\n\t\tvar json = this.json;\r\n\r\n\t\tvar animationDef = this.json.animations[ animationIndex ];\r\n\r\n\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t'accessor',\r\n\t\t\t'node'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar tracks = [];\r\n\r\n\t\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar channel = animationDef.channels[ i ];\r\n\t\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\r\n\r\n\t\t\t\tif ( sampler ) {\r\n\r\n\t\t\t\t\tvar target = channel.target;\r\n\t\t\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\r\n\t\t\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\r\n\t\t\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\r\n\r\n\t\t\t\t\tvar inputAccessor = dependencies.accessors[ input ];\r\n\t\t\t\t\tvar outputAccessor = dependencies.accessors[ output ];\r\n\r\n\t\t\t\t\tvar node = dependencies.nodes[ name ];\r\n\r\n\t\t\t\t\tif ( node ) {\r\n\r\n\t\t\t\t\t\tnode.updateMatrix();\r\n\t\t\t\t\t\tnode.matrixAutoUpdate = true;\r\n\r\n\t\t\t\t\t\tvar TypedKeyframeTrack;\r\n\r\n\t\t\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\r\n\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.weights:\r\n\r\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.NumberKeyframeTrack;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.rotation:\r\n\r\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.QuaternionKeyframeTrack;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.position:\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.scale:\r\n\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.VectorKeyframeTrack;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\r\n\r\n\t\t\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : THREE.InterpolateLinear;\r\n\r\n\t\t\t\t\t\tvar targetNames = [];\r\n\r\n\t\t\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\r\n\r\n\t\t\t\t\t\t\t// node can be THREE.Group here but\r\n\t\t\t\t\t\t\t// PATH_PROPERTIES.weights(morphTargetInfluences) should be\r\n\t\t\t\t\t\t\t// the property of a mesh object under group.\r\n\r\n\t\t\t\t\t\t\tnode.traverse( function ( object ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\r\n\r\n\t\t\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\ttargetNames.push( targetName );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// KeyframeTrack.optimize() will modify given 'times' and 'values'\r\n\t\t\t\t\t\t// buffers before creating a truncated copy to keep. Because buffers may\r\n\t\t\t\t\t\t// be reused by other tracks, make copies here.\r\n\t\t\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar track = new TypedKeyframeTrack(\r\n\t\t\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\r\n\t\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( inputAccessor.array, 0 ),\r\n\t\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( outputAccessor.array, 0 ),\r\n\t\t\t\t\t\t\t\tinterpolation\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Here is the trick to enable custom interpolation.\r\n\t\t\t\t\t\t\t// Overrides .createInterpolant in a factory method which creates custom interpolation.\r\n\t\t\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\r\n\r\n\t\t\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\r\n\r\n\t\t\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\r\n\t\t\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\r\n\t\t\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\r\n\r\n\t\t\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\r\n\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t// Workaround, provide an alternate way to know if the interpolant type is cubis spline to track.\r\n\t\t\t\t\t\t\t\t// track.getInterpolation() doesn't return valid value for custom interpolant.\r\n\t\t\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ttracks.push( track );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;\r\n\r\n\t\t\treturn new THREE.AnimationClip( name, undefined, tracks );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\r\n\t * @param {number} nodeIndex\r\n\t * @return {Promise<THREE.Object3D>}\r\n\t */\r\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\r\n\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\r\n\t\tvar meshReferences = this.json.meshReferences;\r\n\t\tvar meshUses = this.json.meshUses;\r\n\r\n\t\tvar nodeDef = this.json.nodes[ nodeIndex ];\r\n\r\n\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t'mesh',\r\n\t\t\t'skin',\r\n\t\t\t'camera',\r\n\t\t\t'light'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar node;\r\n\r\n\t\t\t// .isBone isn't in glTF spec. See .markDefs\r\n\t\t\tif ( nodeDef.isBone === true ) {\r\n\r\n\t\t\t\tnode = new THREE.Bone();\r\n\r\n\t\t\t} else if ( nodeDef.mesh !== undefined ) {\r\n\r\n\t\t\t\tvar mesh = dependencies.meshes[ nodeDef.mesh ];\r\n\r\n\t\t\t\tnode = mesh.clone();\r\n\r\n\t\t\t\t// for Specular-Glossiness\r\n\t\t\t\tif ( mesh.isGroup === true ) {\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = mesh.children.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar child = mesh.children[ i ];\r\n\r\n\t\t\t\t\t\tif ( child.material && child.material.isGLTFSpecularGlossinessMaterial === true ) {\r\n\r\n\t\t\t\t\t\t\tnode.children[ i ].onBeforeRender = child.onBeforeRender;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( mesh.material && mesh.material.isGLTFSpecularGlossinessMaterial === true ) {\r\n\r\n\t\t\t\t\t\tnode.onBeforeRender = mesh.onBeforeRender;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] > 1 ) {\r\n\r\n\t\t\t\t\tnode.name += '_instance_' + meshUses[ nodeDef.mesh ] ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( nodeDef.camera !== undefined ) {\r\n\r\n\t\t\t\tnode = dependencies.cameras[ nodeDef.camera ];\r\n\r\n\t\t\t} else if ( nodeDef.extensions\r\n\t\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ]\r\n\t\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {\r\n\r\n\t\t\t\tvar lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;\r\n\t\t\t\tnode = lights[ nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnode = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nodeDef.name !== undefined ) {\r\n\r\n\t\t\t\tnode.name = THREE.PropertyBinding.sanitizeNodeName( nodeDef.name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nodeDef.extras ) node.userData = nodeDef.extras;\r\n\r\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\r\n\r\n\t\t\tif ( nodeDef.matrix !== undefined ) {\r\n\r\n\t\t\t\tvar matrix = new THREE.Matrix4();\r\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\r\n\t\t\t\tnode.applyMatrix( matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\r\n\r\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\r\n\t * @param {number} sceneIndex\r\n\t * @return {Promise<THREE.Scene>}\r\n\t */\r\n\tGLTFParser.prototype.loadScene = function () {\r\n\r\n\t\t// scene node hierachy builder\r\n\r\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, allNodes, skins ) {\r\n\r\n\t\t\tvar node = allNodes[ nodeId ];\r\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\r\n\r\n\t\t\t// build skeleton here as well\r\n\r\n\t\t\tif ( nodeDef.skin !== undefined ) {\r\n\r\n\t\t\t\tvar meshes = node.isGroup === true ? node.children : [ node ];\r\n\r\n\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar mesh = meshes[ i ];\r\n\t\t\t\t\tvar skinEntry = skins[ nodeDef.skin ];\r\n\r\n\t\t\t\t\tvar bones = [];\r\n\t\t\t\t\tvar boneInverses = [];\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = skinEntry.joints.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar jointId = skinEntry.joints[ j ];\r\n\t\t\t\t\t\tvar jointNode = allNodes[ jointId ];\r\n\r\n\t\t\t\t\t\tif ( jointNode ) {\r\n\r\n\t\t\t\t\t\t\tbones.push( jointNode );\r\n\r\n\t\t\t\t\t\t\tvar mat = new THREE.Matrix4();\r\n\r\n\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tboneInverses.push( mat );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', jointId );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.bind( new THREE.Skeleton( bones, boneInverses ), mesh.matrixWorld );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// build node hierachy\r\n\r\n\t\t\tparentObject.add( node );\r\n\r\n\t\t\tif ( nodeDef.children ) {\r\n\r\n\t\t\t\tvar children = nodeDef.children;\r\n\r\n\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar child = children[ i ];\r\n\t\t\t\t\tbuildNodeHierachy( child, node, json, allNodes, skins );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn function loadScene( sceneIndex ) {\r\n\r\n\t\t\tvar json = this.json;\r\n\t\t\tvar extensions = this.extensions;\r\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\r\n\r\n\t\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t\t'node',\r\n\t\t\t\t'skin'\r\n\r\n\t\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\t\tvar scene = new THREE.Scene();\r\n\t\t\t\tif ( sceneDef.name !== undefined ) scene.name = sceneDef.name;\r\n\r\n\t\t\t\tif ( sceneDef.extras ) scene.userData = sceneDef.extras;\r\n\r\n\t\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\r\n\r\n\t\t\t\tvar nodeIds = sceneDef.nodes || [];\r\n\r\n\t\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tbuildNodeHierachy( nodeIds[ i ], scene, json, dependencies.nodes, dependencies.skins );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Ambient lighting, if present, is always attached to the scene root.\r\n\t\t\t\tif ( sceneDef.extensions\r\n\t\t\t\t\t\t && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ]\r\n\t\t\t\t\t\t && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {\r\n\r\n\t\t\t\t\tvar lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;\r\n\t\t\t\t\tscene.add( lights[ sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn scene;\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\treturn GLTFLoader;\r\n\r\n} )();\r\n\r\nexport { GLTFLoader }\r\n","<script>\r\n  import base from '../mixins/base-mixin.vue'\r\n  import {GLTFLoader} from \"../loaders\";\r\n\r\n  export default {\r\n    name: 'model-viewer',\r\n    mixins: [ base ],\r\n    data() {\r\n      return {\r\n        loader: new GLTFLoader()\r\n      }\r\n    },\r\n    methods: {\r\n      load() {\r\n        if ( !this.src ) return;\r\n        if ( this.object ) {\r\n          this.wrapper.remove( this.object );\r\n        }\r\n        this.loader.load( this.src, data => {\r\n          if(this.envMap !== null){\r\n            data.scene.traverse( child => {\r\n              if(child.isMesh){\r\n                child.material.envMap = this.envMap;\r\n              }\r\n            })\r\n          }\r\n          this.addObject( data.scene );\r\n          this.$emit( 'on-load' );\r\n        }, xhr => {\r\n          this.$emit( 'on-progress', xhr );\r\n        }, err => {\r\n          console.log( err );\r\n          this.$emit( 'on-error', err );\r\n        } );\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelViewer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelViewer.vue?vue&type=script&lang=js\"","<template>\r\n  <section>\r\n    <GithubCorner></GithubCorner>\r\n    <main role=\"main\" class=\"container\">\r\n      <div class=\"mt-5 text-center\">\r\n        <h2>Vue.JS 3D Model Viewer Example</h2>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n          <ModelViewer\r\n            :lights=\"lights\"\r\n            :background-color=\"backgroundColor\"\r\n            :show-controls=\"true\"\r\n            :visible-controls=\"visibleControls\"\r\n            :src=\"src\"\r\n            :cubemap=\"cubemap\"\r\n            :statsjs=\"statsjs\"\r\n            :datgui=\"datgui\"\r\n          ></ModelViewer>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </section>\r\n</template>\r\n<script>\r\n  import {Vector3} from 'three';\r\n\r\n  import GithubCorner from './components/GithubCorner.vue';\r\n\r\n  import ModelViewer from '../src/components/ModelViewer.vue'\r\n\r\n  export default {\r\n    name: 'app',\r\n    components: {\r\n      ModelViewer,\r\n      GithubCorner\r\n    },\r\n    data() {\r\n      return {\r\n        lights: [\r\n          {\r\n            type: 'hemisphere',\r\n            skyColor: 0xbbbbff,\r\n            groundColor: 0x444422,\r\n            position: new Vector3(0,1,0)\r\n          }/*,\r\n          {\r\n            type: 'AmbientLight',\r\n            color: 0xaaaaaa\r\n          },\r\n          {\r\n            type: 'DirectionalLight',\r\n            position: { x: 1, y: 1, z: 1 },\r\n            color: 0xffffff,\r\n            intensity: 0.8\r\n          }\r\n          ,{\r\n            type: 'ambient',\r\n            color: 0x1e1e23\r\n          },\r\n          {\r\n            type: 'directional',\r\n            color: 0xcfcfcf,\r\n            position: new Vector3(20, 40, -15)\r\n          }*/\r\n        ],\r\n        src: 'models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf',\r\n        backgroundColor: 0xffffff,\r\n        visibleControls: {help: true, fullscreen: true, download: true},\r\n        statsjs: true,\r\n        datgui: true,\r\n        cubemap: [\r\n          'textures/cube/Bridge2/posx.jpg',\r\n          'textures/cube/Bridge2/negx.jpg',\r\n          'textures/cube/Bridge2/posy.jpg',\r\n          'textures/cube/Bridge2/negy.jpg',\r\n          'textures/cube/Bridge2/posz.jpg',\r\n          'textures/cube/Bridge2/negz.jpg',\r\n        ],\r\n      }\r\n    }\r\n  }\r\n</script>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=343e3538\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n"],"sourceRoot":""}
{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./examples/components/GithubCorner.vue?60f4","webpack:///./src/mixins/base-mixin.vue?5dc6","webpack:///./examples/App.vue?a713","webpack:///./examples/components/GithubCorner.vue?1406","webpack:///./examples/components/GithubCorner.vue","webpack:///./src/mixins/base-mixin.vue?12ae","webpack:///./src/controls/OrbitControls.js","webpack:///./src/utils/BufferGeometryUtils.js","webpack:///./src/utils/index.js","webpack:///src/mixins/base-mixin.vue","webpack:///./src/mixins/base-mixin.vue?7363","webpack:///./src/mixins/base-mixin.vue","webpack:///./src/loaders/DDSLoader.js","webpack:///./src/components/ModelViewer.vue","webpack:///./src/loaders/GLTFLoader.js","webpack:///src/components/ModelViewer.vue","webpack:///./src/components/ModelViewer.vue?63dc","webpack:///examples/App.vue","webpack:///./examples/App.vue?3d61","webpack:///./examples/App.vue","webpack:///./examples/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GithubCorner_vue_vue_type_style_index_0_id_11f1e5bb_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_base_mixin_vue_vue_type_style_index_0_id_79437372_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_7be236ed_render","_vm","this","_h","$createElement","_c","_self","attrs","id","_m","staticClass","lights","background-color","backgroundColor","show-controls","visible-controls","visibleControls","src","cubemap","staticRenderFns","_v","GithubCornervue_type_template_id_11f1e5bb_scoped_true_render","href","aria-label","alt","staticStyle","fill","color","position","top","border","right","z-index","width","height","viewBox","aria-hidden","transform-origin","GithubCornervue_type_template_id_11f1e5bb_scoped_true_staticRenderFns","script","component","componentNormalizer","GithubCorner","base_mixinvue_type_template_id_79437372_scoped_true_render","class","showHelp","on","click","toggleHelp","ref","directives","rawName","expression","data-tooltip","downloadModel","toggleFullscreen","fullscreen","_t","base_mixinvue_type_template_id_79437372_scoped_true_staticRenderFns","OrbitControls_OrbitControls","domElement","undefined","document","enabled","target","three_module","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","ZOOM","MIDDLE","PAN","target0","clone","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY_PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","left","clientWidth","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","x","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDollyPan","dx","dy","sqrt","handleTouchMoveRotate","handleTouchMoveDollyPan","handleTouchEnd","preventDefault","button","addEventListener","stopPropagation","constructor","defineProperties","center","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","BufferGeometryUtils","computeTangents","geometry","index","attributes","normal","uv","indices","array","positions","normals","uvs","nVertices","tangent","addAttribute","Float32Array","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","groups","start","count","il","group","jl","handleTriangle","w","test","tmp","tmp2","n2","handleVertex","a","b","fromArray","x1","x2","y1","y2","z1","z","z2","s1","s2","t1","t2","normalize","mergeBufferGeometries","geometries","useGroups","isIndexed","attributesUsed","Set","morphAttributesUsed","morphAttributes","mergedGeometry","has","userData","mergedUserData","addGroup","indexOffset","mergedIndex","getX","setIndex","mergedAttribute","mergeBufferAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","itemSize","normalized","arrayLength","attribute","isInterleavedBufferAttribute","box","getCenter","setFromObject","suportWebGL","canvas","createElement","WebGLRenderingContext","getContext","e","base_mixinvue_type_script_lang_js","props","String","modelType","default","rotation","Array","backgroundAlpha","Number","cameraPosition","cameraRotation","cameraUp","cameraLookAt","showControls","Boolean","help","download","controllable","size","initSize","wrapper","camera","scene","renderer","controls","allLights","envMap","loader","reqId","mounted","$el","offsetWidth","offsetHeight","antialias","alpha","$refs","shadowMap","gammaOutput","load","onKeydown","onResize","animate","beforeDestroy","cancelAnimationFrame","watch","deep","handler","val","updateLights","updateCubemaps","updateCamera","updateRenderer","updateControls","computed","methods","log","which","resetCameraView","_this","$nextTick","updateModel","setSize","setPixelRatio","devicePixelRatio","setClearColor","getHex","setClearAlpha","background","aspect","_this2","remove","forEach","item","toLowerCase","light","intensity","_color","_intensity","decay","_color2","_intensity2","skyColor","groundColor","_intensity3","requestAnimationFrame","render","_this3","screenfull","_this4","getObject","arguments","process","addObject","$emit","xhr","loaded","total","err","negate","mixins_base_mixinvue_type_script_lang_js","base_mixin_component","base_mixin","DDSLoader_DDSLoader","DDSLoader","manager","_parser","parse","buffer","loadMipmaps","dds","mipmaps","format","mipmapCount","DDS_MAGIC","DDSD_MIPMAPCOUNT","DDSCAPS2_CUBEMAP","DDSCAPS2_CUBEMAP_POSITIVEX","DDSCAPS2_CUBEMAP_NEGATIVEX","DDSCAPS2_CUBEMAP_POSITIVEY","DDSCAPS2_CUBEMAP_NEGATIVEY","DDSCAPS2_CUBEMAP_POSITIVEZ","DDSCAPS2_CUBEMAP_NEGATIVEZ","DDPF_FOURCC","fourCCToInt32","charCodeAt","int32ToFourCC","fromCharCode","loadARGBMip","dataOffset","dataLength","srcBuffer","Uint8Array","byteArray","dst","g","blockBytes","FOURCC_DXT1","FOURCC_DXT3","FOURCC_DXT5","FOURCC_ETC1","headerLengthInt","off_magic","off_size","off_flags","off_height","off_width","off_mipmapCount","off_pfFlags","off_pfFourCC","off_RGBBitCount","off_RBitMask","off_GBitMask","off_BBitMask","off_ABitMask","off_caps2","header","Int32Array","error","fourCC","isRGBAUncompressed","caps2","isCubemap","faces","face","mipmap","ModelViewer_render","ModelViewer_staticRenderFns","GLTFLoader_GLTFLoader","GLTFLoader","dracoLoader","GLTFRegistry","objects","removeAll","crossOrigin","url","onLoad","onProgress","onError","path","extractUrlBase","setResponseType","setCrossOrigin","setPath","setDRACOLoader","content","extensions","magic","decodeText","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","version","Error","extensionsUsed","extensionName","extensionsRequired","KHR_LIGHTS","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","indexOf","parser","GLTFParser","scenes","cameras","animations","glTF","addUnknownExtensionsToUserData","ddsLoader","extension","lightId","lightNode","spot","innerConeAngle","outerConeAngle","penumbra","getMaterialType","material","extendParams","materialParams","pending","opacity","metallicRoughness","pbrMetallicRoughness","isArray","baseColorFactor","baseColorTexture","assignTexture","Promise","all","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","headerView","DataView","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","specularGlossinessParams","params","pbrSpecularGlossiness","shader","uniforms","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","fragmentShader","replace","roughness","metalness","roughnessMap","metalnessMap","specular","setHex","glossiness","specularMap","glossinessMap","vertexShader","defines","STANDARD","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossIndex","createMaterial","fog","transparent","isGLTFSpecularGlossinessMaterial","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMapIntensity","refractionRatio","derivatives","cloneMaterial","source","refreshUniforms","uvScaleMap","diffuse","isWebGLRenderTarget","texture","matrixAutoUpdate","updateMatrix","uvTransform","flipEnvMap","isCubeTexture","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","getDependency","then","resolve","decodeDracoFile","interpolate_","i1","t0","values","stride","valueSize","stride2","stride3","td","pp","ppp","offset1","offset0","s0","s3","p0","m0","p1","m1","WEBGL_CONSTANTS","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","UNSIGNED_BYTE","UNSIGNED_SHORT","5120","Int8Array","5121","5122","Int16Array","5123","Uint16Array","5125","Uint32Array","5126","WEBGL_FILTERS","9728","9729","9984","9985","9986","9987","WEBGL_WRAPPINGS","33071","33648","10497","WEBGL_TEXTURE_FORMATS","6406","6407","6408","6409","6410","WEBGL_TEXTURE_DATATYPES","32819","32820","33635","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TEXCOORD_0","TEXCOORD0","TEXCOORD","TEXCOORD_1","COLOR_0","COLOR0","COLOR","WEIGHTS_0","WEIGHT","JOINTS_0","JOINT","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","STEP","ALPHA_MODES","OPAQUE","MASK","BLEND","resolveURL","createDefaultMaterial","depthTest","side","knownExtensions","objectDef","gltfExtensions","addMorphTargets","targets","hasMorphPosition","hasMorphNormal","morphPositions","morphNormals","positionAttribute","cloneBufferAttribute","setXYZ","getY","getZ","normalAttribute","updateMorphTargets","mesh","meshDef","morphTargetInfluences","extras","targetNames","morphTargetDictionary","isPrimitiveEqual","isObjectEqual","isArrayEqual","getCachedGeometry","cache","newPrimitive","cached","promise","getCachedCombinedGeometry","baseGeometries","getCachedMultiPassGeometry","primitives","baseGeometry","getW","isMultiPassGeometry","primitive0","targets0","options","primitiveCache","multiplePrimitivesCache","multiPassGeometryCache","textureLoader","fileLoader","addPrimitiveAttributes","primitiveDef","gltfAttributeName","threeAttributeName","bufferAttribute","markDefs","getMultiDependencies","dependencies","catch","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","getDependencies","defs","def","types","results","pendings","bufferIndex","bufferDef","buffers","uri","reject","bufferViewDef","bufferViews","accessorIndex","sparse","pendingBufferViews","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibCacheKey","ib","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setArray","setX","setY","setZ","setW","textureIndex","URL","webkitURL","textureDef","textures","textureExtensions","images","sourceURI","isObjectURL","blob","Blob","mimeType","createObjectURL","Handlers","revokeObjectURL","flipY","internalFormat","samplers","sampler","magFilter","minFilter","wrapS","wrapT","textureName","materialIndex","materialType","materialDef","materials","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","alphaMode","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","loadGeometries","originalPrimitives","isMultiPass","geometryPromise","accessor","meshIndex","originalMaterials","isMultiMaterial","drawMode","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","isLine","lineMaterial","cachedMaterial","skinning","vertexColors","flatShading","morphTargets","uv2","onBeforeRender","cameraIndex","cameraDef","radToDeg","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","tracks","channels","channel","node","input","parameters","output","inputAccessor","outputAccessor","TypedKeyframeTrack","targetName","interpolation","traverse","isMesh","track","arraySlice","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","isGroup","children","child","sanitizeNodeName","applyMatrix","buildNodeHierachy","nodeId","parentObject","allNodes","bones","boneInverses","jointId","jointNode","mat","matrixWorld","sceneIndex","sceneDef","nodeIds","ModelViewervue_type_script_lang_js","mixins","components_ModelViewervue_type_script_lang_js","ModelViewer_component","ModelViewer","Appvue_type_script_lang_js","components","examples_Appvue_type_script_lang_js","App_component","App","vue_runtime_esm","config","productionTip","h","$mount"],"mappings":"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","file":"js/app.081bc9c6.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vue-3dmodel-viewer/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"wx8R\",0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GithubCorner.vue?vue&type=style&index=0&id=11f1e5bb&scoped=true&lang=css\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GithubCorner.vue?vue&type=style&index=0&id=11f1e5bb&scoped=true&lang=css\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=style&index=0&id=79437372&scoped=true&lang=css\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=style&index=0&id=79437372&scoped=true&lang=css\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('GithubCorner'),_vm._m(0),_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"container\"},[_c('ModelViewer',{attrs:{\"lights\":_vm.lights,\"background-color\":_vm.backgroundColor,\"show-controls\":true,\"visible-controls\":_vm.visibleControls,\"src\":_vm.src,\"cubemap\":_vm.cubemap}})],1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"\\n        Vue.JS 3D Model Viewer Example\\n      \")])])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"github-corner\",attrs:{\"href\":\"https://github.com/XpycT/vue-3dmodel-viewer\",\"aria-label\":\"View source on Github\"}},[_c('img',{attrs:{\"src\":\"https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png\",\"alt\":\"Fork me on GitHub\"}}),_c('svg',{staticStyle:{\"fill\":\"#151513\",\"color\":\"#fff\",\"position\":\"absolute\",\"top\":\"0\",\"border\":\"0\",\"right\":\"0\",\"z-index\":\"20\"},attrs:{\"width\":\"80\",\"height\":\"80\",\"viewBox\":\"0 0 250 250\",\"aria-hidden\":\"true\"}},[_c('path',{attrs:{\"d\":\"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z\"}}),_c('path',{staticClass:\"octo-arm\",staticStyle:{\"transform-origin\":\"130px 106px\"},attrs:{\"d\":\"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2\",\"fill\":\"currentColor\"}}),_c('path',{staticClass:\"octo-body\",attrs:{\"d\":\"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z\",\"fill\":\"currentColor\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./GithubCorner.vue?vue&type=template&id=11f1e5bb&scoped=true\"\nvar script = {}\nimport style0 from \"./GithubCorner.vue?vue&type=style&index=0&id=11f1e5bb&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11f1e5bb\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.suportWebGL)?_c('div',{staticClass:\"model-viewer\"},[_c('div',{staticClass:\"overlays\"},[_c('div',{staticClass:\"overlay help\",class:_vm.showHelp ? '' : 'hidden'},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"},on:{\"click\":_vm.toggleHelp}},[_c('i',{staticClass:\"fas fa-times\"})]),_vm._m(0)])]),_c('div',{staticClass:\"webgl\"},[_c('canvas',{ref:\"canvas\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showControls),expression:\"showControls\"}],staticClass:\"gui enabled\"},[_c('div',{staticClass:\"controls\"},[_c('div',{staticClass:\"general-controls\"},[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visibleControls.help),expression:\"visibleControls.help\"}],staticClass:\"control tooltip\",attrs:{\"data-tooltip\":\"Help\"},on:{\"click\":_vm.toggleHelp}},[_c('i',{staticClass:\"fas fa-question\"})]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visibleControls.download),expression:\"visibleControls.download\"}],staticClass:\"control tooltip\",attrs:{\"data-tooltip\":\"Download\"},on:{\"click\":_vm.downloadModel}},[_c('i',{staticClass:\"fas fa-download\"})]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visibleControls.fullscreen),expression:\"visibleControls.fullscreen\"}],staticClass:\"control tooltip tooltip-right-bound\",attrs:{\"data-tooltip\":\"Fullscreen\"},on:{\"click\":_vm.toggleFullscreen}},[_c('i',{staticClass:\"fas\",class:_vm.fullscreen ? 'fa-compress' : 'fa-expand-arrows-alt'})])])])])])]):_c('div',[_vm._t(\"error\",[_vm._v(\"\\n    Your graphics card does not seem to support\\n    \"),_c('a',{staticStyle:{\"color\":\"#000\"},attrs:{\"href\":\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"}},[_vm._v(\"WebGL\")]),_vm._v(\".\"),_c('br'),_vm._v(\"\\n    Find out how to get it \"),_c('a',{staticStyle:{\"color\":\"#000\"},attrs:{\"href\":\"http://get.webgl.org/\"}},[_vm._v(\"here\")]),_vm._v(\".\\n  \")])],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"inner\"},[_c('div',{staticClass:\"tip\"},[_c('div',[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',[_c('b',[_vm._v(\"Orbit around\")]),_c('div',[_vm._v(\"Left mouse + drag or\"),_c('br'),_vm._v(\"One finger drag (touch)\")])])]),_c('div',{staticClass:\"tip\"},[_c('div',[_c('i',{staticClass:\"fas fa-search-plus\"})]),_c('div',[_c('b',[_vm._v(\"Zoom\")]),_c('div',[_vm._v(\"Middle mouse or mousewheel\"),_c('br'),_vm._v(\"Two-finger spread or squish (touch)\")])])]),_c('div',{staticClass:\"tip\"},[_c('div',[_c('i',{staticClass:\"fas fa-arrows-alt\"})]),_c('div',[_c('b',[_vm._v(\"Pan\")]),_c('div',[_vm._v(\"Right mouse + drag or arraow keys\"),_c('br'),_vm._v(\"Two fingers drag (touch)\")])])])])}]\n\nexport { render, staticRenderFns }","/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: two-finger move\nimport * as THREE from 'three';\n\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/controls/OrbitControls.js\n\nconst OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n// eslint-disable-next-line no-unused-vars\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t// console.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t//console.log( 'handleKeyDown' );\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchStartDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchMoveDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyIn( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n// eslint-disable-next-line no-unused-vars\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\nObject.defineProperties( OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n\nexport { OrbitControls };","/**\n * @author mrdoob / http://mrdoob.com/\n */\nimport * as THREE from 'three';\n\nconst BufferGeometryUtils = {\n\n\tcomputeTangents: function ( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar attributes = geometry.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n        attributes.position === undefined ||\n        attributes.normal === undefined ||\n        attributes.uv === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar indices = index.array;\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal.array;\n\t\tvar uvs = attributes.uv.array;\n\n\t\tvar nVertices = positions.length / 3;\n\n\t\tif ( attributes.tangent === undefined ) {\n\n\t\t\tgeometry.addAttribute( 'tangent', new THREE.BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tvar tangents = attributes.tangent.array;\n\n\t\tvar tan1 = [], tan2 = [];\n\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new THREE.Vector3();\n\t\t\ttan2[ i ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tvar vA = new THREE.Vector3(),\n\t\t\tvB = new THREE.Vector3(),\n\t\t\tvC = new THREE.Vector3(),\n\n\t\t\tuvA = new THREE.Vector2(),\n\t\t\tuvB = new THREE.Vector2(),\n\t\t\tuvC = new THREE.Vector2(),\n\n\t\t\tsdir = new THREE.Vector3(),\n\t\t\ttdir = new THREE.Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvar x1 = vB.x - vA.x;\n\t\t\tvar x2 = vC.x - vA.x;\n\n\t\t\tvar y1 = vB.y - vA.y;\n\t\t\tvar y2 = vC.y - vA.y;\n\n\t\t\tvar z1 = vB.z - vA.z;\n\t\t\tvar z2 = vC.z - vA.z;\n\n\t\t\tvar s1 = uvB.x - uvA.x;\n\t\t\tvar s2 = uvC.x - uvA.x;\n\n\t\t\tvar t1 = uvB.y - uvA.y;\n\t\t\tvar t2 = uvC.y - uvA.y;\n\n\t\t\tvar r = 1.0 / ( s1 * t2 - s2 * t1 );\n\n\t\t\tsdir.set(\n\t\t\t\t( t2 * x1 - t1 * x2 ) * r,\n\t\t\t\t( t2 * y1 - t1 * y2 ) * r,\n\t\t\t\t( t2 * z1 - t1 * z2 ) * r\n\t\t\t);\n\n\t\t\ttdir.set(\n\t\t\t\t( s1 * x2 - s2 * x1 ) * r,\n\t\t\t\t( s1 * y2 - s2 * y1 ) * r,\n\t\t\t\t( s1 * z2 - s2 * z1 ) * r\n\t\t\t);\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n    let groups = geometry.groups;\n\n    if ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tlet group = groups[ i ];\n\n\t\t\tlet start = group.start;\n      let count = group.count;\n\n      for ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmp = new THREE.Vector3(), tmp2 = new THREE.Vector3();\n\t\tvar n = new THREE.Vector3(), n2 = new THREE.Vector3();\n\t\tvar w, t, test;\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tt = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\ttest = tmp2.dot( tan2[ v ] );\n\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tlet group = groups[ i ];\n\n\t\t\tlet start = group.start;\n\t\t\tlet count = group.count;\n\n\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t * @param  {Array<THREE.BufferGeometry>} geometries\n\t * @return {THREE.BufferGeometry}\n\t */\n\tmergeBufferGeometries: function ( geometries, useGroups ) {\n\n\t\tvar isIndexed = geometries[ 0 ].index !== null;\n\n\t\tvar attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\t\tvar morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\n\n\t\tvar attributes = {};\n\t\tvar morphAttributes = {};\n\n\t\tvar mergedGeometry = new THREE.BufferGeometry();\n\n\t\tvar offset = 0;\n\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\tvar geometry = geometries[ i ];\n\n\t\t\t// ensure that all geometries are indexed, or none\n\n\t\t\tif ( isIndexed !== ( geometry.index !== null ) ) return null;\n\n\t\t\t// gather attributes, exit early if they're different\n\n\t\t\tfor ( let name in geometry.attributes ) {\n\n\t\t\t\tif ( ! attributesUsed.has( name ) ) return null;\n\n\t\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\n\n\t\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\n\t\t\t}\n\n\t\t\t// gather morph attributes, exit early if they're different\n\n\t\t\tfor ( let name in geometry.morphAttributes ) {\n\n\t\t\t\tif ( ! morphAttributesUsed.has( name ) ) return null;\n\n\t\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\n\n\t\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\n\n\t\t\t}\n\n\t\t\t// gather .userData\n\n\t\t\tmergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\n\t\t\tmergedGeometry.userData.mergedUserData.push( geometry.userData );\n\n\t\t\tif ( useGroups ) {\n\n\t\t\t\tvar count;\n\n\t\t\t\tif ( isIndexed ) {\n\n\t\t\t\t\tcount = geometry.index.count;\n\n\t\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\tmergedGeometry.addGroup( offset, count, i );\n\n\t\t\t\toffset += count;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// merge indices\n\n\t\tif ( isIndexed ) {\n\n\t\t\tvar indexOffset = 0;\n\t\t\tvar mergedIndex = [];\n\n\t\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\t\tlet index = geometries[ i ].index;\n\n\t\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\n\n\t\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\n\n\t\t\t\t}\n\n\t\t\t\tindexOffset += geometries[ i ].attributes.position.count;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.setIndex( mergedIndex );\n\n\t\t}\n\n\t\t// merge attributes\n\n\t\tfor ( let name in attributes ) {\n\n\t\t\tvar mergedAttribute = this.mergeBufferAttributes( attributes[ name ] );\n\n\t\t\tif ( ! mergedAttribute ) return null;\n\n\t\t\tmergedGeometry.addAttribute( name, mergedAttribute );\n\n\t\t}\n\n\t\t// merge morph attributes\n\n\t\tfor ( let name in morphAttributes ) {\n\n\t\t\tvar numMorphTargets = morphAttributes[ name ][ 0 ].length;\n\n\t\t\tif ( numMorphTargets === 0 ) break;\n\n\t\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n\t\t\tmergedGeometry.morphAttributes[ name ] = [];\n\n\t\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\n\n\t\t\t\tvar morphAttributesToMerge = [];\n\n\t\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\n\n\t\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tvar mergedMorphAttribute = this.mergeBufferAttributes( morphAttributesToMerge );\n\n\t\t\t\tif ( ! mergedMorphAttribute ) return null;\n\n\t\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn mergedGeometry;\n\n\t},\n\n\t/**\n\t * @param {Array<THREE.BufferAttribute>} attributes\n\t * @return {THREE.BufferAttribute}\n\t */\n\tmergeBufferAttributes: function ( attributes ) {\n\n\t\tvar TypedArray;\n\t\tvar itemSize;\n\t\tvar normalized;\n\t\tvar arrayLength = 0;\n\n\t\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\t\tvar attribute = attributes[ i ];\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) return null;\n\n\t\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\t\tif ( TypedArray !== attribute.array.constructor ) return null;\n\n\t\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\n\t\t\tif ( itemSize !== attribute.itemSize ) return null;\n\n\t\t\tif ( normalized === undefined ) normalized = attribute.normalized;\n\t\t\tif ( normalized !== attribute.normalized ) return null;\n\n\t\t\tarrayLength += attribute.array.length;\n\n\t\t}\n\n\t\tvar array = new TypedArray( arrayLength );\n\t\tvar offset = 0;\n\n\t\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\t\tarray.set( attributes[ i ].array, offset );\n\n\t\t\toffset += attributes[ i ].array.length;\n\n\t\t}\n\n\t\treturn new THREE.BufferAttribute( array, itemSize, normalized );\n\n\t}\n\n};\n\nexport { BufferGeometryUtils }\n","import {Box3, Vector3} from 'three';\nimport {BufferGeometryUtils} from './BufferGeometryUtils'\n\n\nconst box = new Box3();\n\nfunction getSize(object) {\n  box.setFromObject(object);\n  return box.getSize();\n}\n\nfunction getCenter(object) {\n  box.setFromObject(object);\n  return box.getCenter(new Vector3());\n}\n\nexport default {\n  BufferGeometryUtils,\n  getSize, getCenter\n}\n\nexport {\n  BufferGeometryUtils,\n  getSize, getCenter\n}\n","<script>\n  import {\n    Color,\n    Vector3,\n    Object3D,\n    Scene,\n    WebGLRenderer,\n    PerspectiveCamera,\n    AmbientLight,\n    PointLight,\n    DirectionalLight,\n    HemisphereLight,\n    CubeTextureLoader\n  } from 'three'\n\n  import {OrbitControls} from '../controls/OrbitControls'\n\n  import { getCenter } from '../utils'\n\n  import * as screenfull from 'screenfull';\n\n  const suportWebGL = (() => {\n    try {\n      let canvas = document.createElement('canvas');\n      return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  export default {\n    props: {\n      src: {\n        type: String\n      },\n      modelType: {\n        type: String\n      },\n      position: {\n        type: Object,\n        default() {\n          return { x: 0, y: 0, z: 0 }\n        }\n      },\n      rotation: {\n        type: Object,\n        default() {\n          return { x: 0, y: 0, z: 0 }\n        }\n      },\n      scale: {\n        type: Object,\n        default() {\n          return { x: 1, y: 1, z: 1 }\n        }\n      },\n      lights: {\n        type: Array,\n        default() {\n          return [\n            {\n              type: 'ambient',\n              color: 0x1e1e23\n            },\n            {\n              type: 'directional',\n              color: 0xcfcfcf,\n              position: new Vector3(20, 40, -15)\n            }\n          ];\n        }\n      },\n      backgroundColor: {\n        default: 0x444444\n      },\n      backgroundAlpha: {\n        type: Number,\n        default: 1\n      },\n      cameraPosition: {\n        type: Object\n      },\n      cameraRotation: {\n        type: Object\n      },\n      cameraUp: {\n        type: Object\n      },\n      cameraLookAt: {\n        type: Object\n      },\n      showControls: {\n        type: Boolean,\n        default: true\n      },\n      visibleControls: {\n        type: Object,\n        default() {\n          return {\n            help: true,\n            download: true,\n            fullscreen: true\n          }\n        }\n      },\n      controllable: {\n        type: Boolean,\n        default: true\n      },\n      cubemap: {\n        type: Array,\n        default() {\n          return []\n        }\n      }\n    },\n    data() {\n      return {\n        suportWebGL,\n        fullscreen: false,\n        showHelp: false,\n        size: {\n          width: this.width,\n          height: this.height\n        },\n        initSize: {\n          width: 0,\n          height: 0\n        },\n        object: null,\n        wrapper: new Object3D(),\n        camera: new PerspectiveCamera(45, 1, 0.01, 100000),\n        scene: new Scene(),\n        renderer: null,\n        controls: null,\n        allLights: [],\n        envMap: null,\n        loader: null,\n        reqId: null    // requestAnimationFrame id\n      }\n    },\n    mounted() {\n      if (this.width === undefined || this.height === undefined) {\n        this.size = {\n          width: this.$el.offsetWidth,\n          height: this.$el.offsetHeight\n        }\n      }\n      this.initSize = this.size;\n\n      this.renderer = new WebGLRenderer({antialias: true, alpha: true, canvas: this.$refs.canvas});\n      this.renderer.shadowMap.enabled = false;\n      this.renderer.gammaOutput = false;\n\n      this.scene.add( this.wrapper );\n\n      this.load();\n      this.update();\n\n      window.addEventListener( 'keydown', this.onKeydown, false );\n      window.addEventListener('resize', this.onResize, false);\n\n      this.animate();\n    },\n    beforeDestroy() {\n      cancelAnimationFrame(this.reqId);\n\n      window.removeEventListener( 'keydown', this.onKeydown, false );\n      window.removeEventListener('resize', this.onResize, false);\n    },\n    watch: {\n      src() {\n        this.load();\n      },\n      rotation: {\n        deep: true,\n        handler( val ) {\n          if ( !this.object ) return;\n          this.object.rotation.set( val.x, val.y, val.z );\n        }\n      },\n      position: {\n        deep: true,\n        handler( val ) {\n          if ( !this.object ) return;\n          this.object.position.set( val.x, val.y, val.z );\n        }\n      },\n      scale: {\n        deep: true,\n        handler( val ) {\n          if ( !this.object ) return;\n          this.object.scale.set( val.x, val.y, val.z );\n        }\n      },\n      lights: {\n        deep: true,\n        handler() {\n          this.updateLights();\n        }\n      },\n      cubemap: {\n        deep: true,\n        handler() {\n          this.updateCubemaps();\n        }\n      },\n      size: {\n        deep: true,\n        handler() {\n          this.updateCamera();\n          this.updateRenderer();\n        }\n      },\n      controllable() {\n        this.updateControls();\n      },\n      backgroundAlpha() {\n        this.updateRenderer();\n      },\n      backgroundColor() {\n        this.updateRenderer();\n      }\n    },\n    computed: {},\n    methods: {\n      onKeydown(event) {\n        console.log(event.which);\n        if(event.which === 32 ) { // space\n          this.resetCameraView();\n        }\n      },\n      onResize() {\n        if (this.width === undefined || this.height === undefined) {\n          this.$nextTick(() => {\n            this.size = {\n              width: this.$el.offsetWidth,\n              height: this.$el.offsetHeight\n            }\n          })\n        }\n      },\n      update() {\n        this.updateRenderer();\n        this.updateCubemaps();\n        this.updateCamera();\n        this.updateLights();\n        this.updateControls();\n      },\n      updateModel() {\n        const object = this.object;\n        if ( !object ) return;\n        const position = this.position;\n        const rotation = this.rotation;\n        const scale = this.scale;\n        object.position.set( position.x, position.y, position.z );\n        object.rotation.set( rotation.x, rotation.y, rotation.z );\n        object.scale.set( scale.x, scale.y, scale.z );\n      },\n      updateRenderer() {\n        const renderer = this.renderer;\n        renderer.setSize(this.size.width, this.size.height);\n        renderer.setPixelRatio(window.devicePixelRatio || 1);\n        renderer.setClearColor(new Color(this.backgroundColor).getHex());\n        renderer.setClearAlpha(this.backgroundAlpha);\n      },\n      updateCubemaps() {\n        if(this.cubemap.length === 0) return;\n\n        this.envMap = new CubeTextureLoader().load( this.cubemap );\n        this.scene.background = this.envMap;\n      },\n      updateCamera() {\n        const camera = this.camera;\n        camera.aspect = this.size.width / this.size.height;\n        camera.updateProjectionMatrix();\n        if (!this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp) {\n          camera.position.set(1, 1, -2);\n          camera.position.z = 5;\n          camera.lookAt(new Vector3());\n        } else {\n          camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\n          camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\n          camera.up.set(this.cameraUp.x, this.cameraUp.y, this.cameraUp.z);\n          camera.lookAt(new Vector3(this.cameraLookAt.x, this.cameraLookAt.y, this.cameraLookAt.z));\n        }\n      },\n      updateLights() {\n        this.scene.remove.apply(this.scene, this.allLights);\n        this.allLights = [];\n        this.lights.forEach(item => {\n          if (!item.type) return;\n          const type = item.type.toLowerCase();\n          let light = null;\n          if (type === 'ambient' || type === 'ambientlight') {\n            const color = item.color || 0x404040;\n            const intensity = item.intensity || 1;\n            light = new AmbientLight(color, intensity);\n          } else if (type === 'point' || type === 'pointlight') {\n            const color = item.color || 0xffffff;\n            const intensity = item.intensity || 1;\n            const distance = item.distance || 0;\n            const decay = item.decay || 1;\n            light = new PointLight(color, intensity, distance, decay);\n            if (item.position) {\n              light.position.copy(item.position);\n            }\n          } else if (type === 'directional' || type === 'directionallight') {\n            const color = item.color || 0xffffff;\n            const intensity = item.intensity || 1;\n            light = new DirectionalLight(color, intensity);\n            if (item.position) {\n              light.position.copy(item.position);\n            }\n            if (item.target) {\n              light.target.copy(item.target);\n            }\n          } else if (type === 'hemisphere' || type === 'hemispherelight') {\n            const skyColor = item.skyColor || 0xffffff;\n            const groundColor = item.groundColor || 0xffffff;\n            const intensity = item.intensity || 1;\n            light = new HemisphereLight(skyColor, groundColor, intensity);\n            if (item.position) {\n              light.position.copy(item.position);\n            }\n          }\n          this.allLights.push(light);\n          this.scene.add(light);\n        })\n      },\n      updateControls() {\n        if (this.controllable && this.controls) return;\n        if (this.controllable) {\n          if (this.controls) return;\n          this.controls = new OrbitControls(this.camera, this.$el);\n          this.controls.type = 'orbit';\n          this.controls.update();\n        } else {\n          if (this.controls) {\n            this.controls.dispose();\n            this.controls = null;\n          }\n        }\n      },\n      animate() {\n        this.reqId = requestAnimationFrame(this.animate);\n        // required if controls.enableDamping or controls.autoRotate are set to true\n        this.controls.update();\n\n        this.render();\n      },\n      render() {\n        this.renderer.render(this.scene, this.camera)\n      },\n      toggleFullscreen() {\n        if (screenfull.enabled) {\n          screenfull.toggle(this.$el);\n          screenfull.on('change', () => {\n            this.fullscreen = screenfull.isFullscreen;\n\n            if (!screenfull.isFullscreen) this.size = this.initSize;\n\n            this.updateCamera();\n            this.updateRenderer();\n          });\n        }\n      },\n      resetCameraView() {\n        this.controls.reset();\n      },\n      toggleHelp() {\n        this.showHelp = !this.showHelp;\n      },\n      downloadModel() {\n\n      },\n      load(){\n        if ( !this.src ) return;\n        if ( this.object ) {\n          this.wrapper.remove( this.object );\n        }\n        this.loader.load( this.src, ( ...args ) => {\n          const object = this.getObject( ...args );\n          if ( this.process ) {\n            this.process( object );\n          }\n          this.addObject( object );\n          this.$emit( 'on-load' );\n        }, xhr => {\n          this.$emit( 'on-progress', xhr );\n          console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\n        }, err => {\n          this.$emit( 'on-error', err );\n          console.log( 'on-error', err);\n        } );\n      },\n      getObject( object ) {\n        return object\n      },\n      addObject( object ) {\n        const center = getCenter( object );\n        // correction position\n        this.wrapper.position.copy( center.negate() );\n        this.object = object;\n        this.wrapper.add( object );\n        this.updateCamera();\n        this.updateModel();\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  @import url(https://use.fontawesome.com/releases/v5.1.0/css/all.css);\n  @import url('https://fonts.googleapis.com/css?family=Open+Sans');\n\n  .model-viewer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    margin: 0;\n    position: relative;\n    overflow: hidden;\n    font-family: \"Open Sans\", sans-serif;\n  }\n\n  canvas {\n    width: 100%;\n    height: 100%\n  }\n\n  /** GUI **/\n  .gui {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 4;\n    pointer-events: none;\n    user-select: none;\n    opacity: 0;\n    transition: opacity 250ms ease-in-out;\n  }\n\n  .gui.enabled {\n    opacity: 1;\n  }\n\n  .controls {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 2;\n    height: 50px;\n    justify-content: space-between;\n    min-width: 0;\n    padding: 10px;\n    pointer-events: none;\n    display: flex;\n  }\n\n  .controls .general-controls {\n    display: flex !important;\n    justify-content: flex-end;\n    flex: 0 0 auto;\n    font-size: 13px;\n    align-items: center;\n    flex-flow: row nowrap !important;\n    margin-left: auto;\n  }\n\n  .controls a {\n    padding: 0;\n    margin: 0;\n    color: #ffffff;\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  .controls .control {\n    position: relative;\n    display: inline-block;\n    min-width: 0;\n    margin: 0 5px;\n    font-size: 16px;\n    outline: none;\n    transition: background 200ms linear;\n    width: 30px;\n    height: 30px;\n    line-height: 31px;\n    text-align: center;\n    border-radius: 16px;\n    pointer-events: all;\n  }\n\n  .controls .control:hover,\n  .controls .control.active {\n    background: rgba(0, 0, 0, 0.75);\n  }\n\n  .controls .control:before {\n    color: #ffffff;\n    text-shadow: 0 0 1px black;\n  }\n\n  .controls .general-controls .control i {\n    color: #ffffff;\n    text-shadow: 0 0 1px #000000;\n    pointer-events: none;\n  }\n\n  .tooltip {\n    position: relative;\n  }\n\n  .tooltip.tooltip-down[data-tooltip]:after {\n    top: 25px;\n    bottom: auto;\n  }\n\n  .tooltip.tooltip-down[data-tooltip]:before {\n    top: 20px;\n    bottom: auto;\n    border-top: 0 solid transparent;\n    border-right: 5px solid transparent;\n    border-bottom: 5px solid rgba(0, 0, 0, 0.75);\n    border-left: 5px solid transparent;\n  }\n\n  .tooltip.tooltip-right-bound[data-tooltip]:after {\n    transform: translateX(-75%);\n  }\n\n  .tooltip.tooltip-left-bound[data-tooltip]:before {\n    transform: translateX(100%);\n    left: 0;\n  }\n\n  .tooltip.tooltip-left-bound[data-tooltip]:after {\n    transform: translateX(0%);\n    left: 0;\n  }\n\n  .tooltip[data-tooltip]:before {\n    position: absolute;\n    bottom: 30px;\n    left: 50%;\n    pointer-events: none;\n    content: \"\";\n    border-top: 5px solid rgba(0, 0, 0, 0.75);\n    border-right: 5px solid transparent;\n    border-bottom: 0 solid transparent;\n    border-left: 5px solid transparent;\n    opacity: 0;\n    transition: opacity 250ms ease-in-out;\n    transform: translateX(-50%);\n  }\n\n  .tooltip[data-tooltip]:after {\n    position: absolute;\n    bottom: 35px;\n    left: 50%;\n    height: 25px;\n    padding: 5px 10px;\n    font-size: 12px;\n    line-height: 15px;\n    color: #ffffff;\n    white-space: nowrap;\n    pointer-events: none;\n    content: attr(data-tooltip);\n    background: rgba(0, 0, 0, 0.75);\n    border-radius: 6px;\n    opacity: 0;\n    transition: opacity 250ms ease-in-out;\n    transform: translateX(-50%);\n  }\n\n  .tooltip:hover:before, .tooltip:hover:after {\n    opacity: 1;\n  }\n\n  /** OVERLAYS **/\n  .overlays {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 7;\n    pointer-events: none;\n    perspective: 1000px;\n    perspective-origin: center center;\n    transform-style: preserve-3d;\n  }\n\n  .overlays .overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: initial;\n    display: initial;\n    width: 100%;\n    height: 100%;\n    overflow: initial;\n    pointer-events: all;\n    background: rgba(0, 0, 0, 0.8);\n    transition: all 250ms ease-in-out;\n  }\n\n  .overlays .overlay.hidden {\n    pointer-events: none;\n    opacity: 0;\n    transition: all 100ms ease-in-out;\n    transform: translateZ(100px);\n  }\n\n  .overlays .overlay .close {\n    position: absolute;\n    top: 15px;\n    right: 25px;\n    z-index: 2;\n    font-size: 16px;\n    color: #ffffff;\n  }\n\n  .overlays .overlay .inner {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: -ms-flexbox;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    color: #ffffff;\n    flex-flow: column nowrap;\n    justify-content: center;\n  }\n\n  .overlays .overlay .inner > * {\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-pack: center;\n    justify-content: center;\n  }\n\n  /** help **/\n  .overlays .overlay.help .inner {\n    display: flex;\n    flex-direction: row;\n    flex: 1 1 0;\n    justify-content: center;\n    overflow: auto;\n  }\n\n  .overlays .overlay.help .inner .tip {\n    display: -ms-flexbox;\n    display: flex;\n    font-size: 14px;\n    color: #cccccc;\n    text-align: center;\n    flex-direction: column;\n    flex: 1;\n    justify-content: center;\n  }\n\n  .overlays .overlay.help .tip > div {\n    min-height: 0;\n    max-height: none;\n  }\n\n  .overlays .overlay.help .tip i {\n    margin: 0 0 30px;\n    font-size: 28px;\n    color: #ffffff;\n  }\n\n  .overlays .overlay.help {\n    padding: 0 20px;\n    font-size: 18px;\n    color: #cccccc;\n    justify-content: center;\n  }\n\n  .overlays .overlay.help h2 {\n    position: relative;\n    padding-bottom: 4px;\n    margin: 0 0 4px;\n    font-size: 13px;\n    font-weight: bold;\n    text-transform: uppercase;\n    border-bottom: 1px solid #333333;\n  }\n\n  .overlays .overlay.help .section {\n    margin-bottom: 20px;\n    line-height: 1.7;\n  }\n\n  .overlays .overlay.help b {\n    display: inline-block;\n    width: 120px;\n    font-weight: bold;\n  }\n</style>\n\n<template>\n  <div class=\"model-viewer\" v-if=\"suportWebGL\">\n    <div class=\"overlays\">\n      <div class=\"overlay help\" :class=\"showHelp ? '' : 'hidden'\">\n        <a href=\"#\" class=\"close\" v-on:click=\"toggleHelp\"><i class=\"fas fa-times\"></i></a>\n        <div class=\"inner\">\n          <div class=\"tip\">\n            <div><i class=\"fas fa-sync-alt\"></i></div>\n            <div>\n              <b>Orbit around</b>\n              <div>Left mouse + drag or<br>One finger drag (touch)</div>\n            </div>\n          </div>\n          <div class=\"tip\">\n            <div><i class=\"fas fa-search-plus\"></i></div>\n            <div>\n              <b>Zoom</b>\n              <div>Middle mouse or mousewheel<br>Two-finger spread or squish (touch)</div>\n            </div>\n          </div>\n          <div class=\"tip\">\n            <div><i class=\"fas fa-arrows-alt\"></i></div>\n            <div>\n              <b>Pan</b>\n              <div>Right mouse + drag or arraow keys<br>Two fingers drag (touch)</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"webgl\">\n      <canvas ref=\"canvas\"></canvas>\n      <div v-show=\"showControls\" class=\"gui enabled\">\n        <div class=\"controls\">\n          <div class=\"general-controls\">\n            <a class=\"control tooltip\" data-tooltip=\"Help\" v-on:click=\"toggleHelp\" v-show=\"visibleControls.help\">\n              <i class=\"fas fa-question\"></i>\n            </a>\n            <a class=\"control tooltip\" data-tooltip=\"Download\" v-on:click=\"downloadModel\"\n               v-show=\"visibleControls.download\">\n              <i class=\"fas fa-download\"></i>\n            </a>\n            <a class=\"control tooltip tooltip-right-bound\" data-tooltip=\"Fullscreen\"\n               v-on:click=\"toggleFullscreen\" v-show=\"visibleControls.fullscreen\">\n              <i class=\"fas\" :class=\"fullscreen ? 'fa-compress' : 'fa-expand-arrows-alt'\"></i></a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div v-else>\n    <slot name=\"error\">\n      Your graphics card does not seem to support\n      <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>\n      Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.\n    </slot>\n  </div>\n</template>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./base-mixin.vue?vue&type=template&id=79437372&scoped=true\"\nimport script from \"./base-mixin.vue?vue&type=script&lang=js\"\nexport * from \"./base-mixin.vue?vue&type=script&lang=js\"\nimport style0 from \"./base-mixin.vue?vue&type=style&index=0&id=79437372&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"79437372\",\n  null\n  \n)\n\nexport default component.exports","/*\n * @author mrdoob / http://mrdoob.com/\n */\nimport * as THREE from 'three';\n\nconst DDSLoader = function ( manager ) {\n\n\tTHREE.CompressedTextureLoader.call( this, manager );\n\n\tthis._parser = DDSLoader.parse;\n\n};\n\nDDSLoader.prototype = Object.create( THREE.CompressedTextureLoader.prototype );\nDDSLoader.prototype.constructor = DDSLoader;\n\nDDSLoader.parse = function ( buffer, loadMipmaps ) {\n\n\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\n\n\t// Adapted from @toji's DDS utils\n\t// https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js\n\n\t// All values and structures referenced from:\n\t// http://msdn.microsoft.com/en-us/library/bb943991.aspx/\n\n\tvar DDS_MAGIC = 0x20534444;\n\n\tvar DDSD_CAPS = 0x1,\n\t\tDDSD_HEIGHT = 0x2,\n\t\tDDSD_WIDTH = 0x4,\n\t\tDDSD_PITCH = 0x8,\n\t\tDDSD_PIXELFORMAT = 0x1000,\n\t\tDDSD_MIPMAPCOUNT = 0x20000,\n\t\tDDSD_LINEARSIZE = 0x80000,\n\t\tDDSD_DEPTH = 0x800000;\n\n\tvar DDSCAPS_COMPLEX = 0x8,\n\t\tDDSCAPS_MIPMAP = 0x400000,\n\t\tDDSCAPS_TEXTURE = 0x1000;\n\n\tvar DDSCAPS2_CUBEMAP = 0x200,\n\t\tDDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\n\t\tDDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\n\t\tDDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\n\t\tDDSCAPS2_VOLUME = 0x200000;\n\n\tvar DDPF_ALPHAPIXELS = 0x1,\n\t\tDDPF_ALPHA = 0x2,\n\t\tDDPF_FOURCC = 0x4,\n\t\tDDPF_RGB = 0x40,\n\t\tDDPF_YUV = 0x200,\n\t\tDDPF_LUMINANCE = 0x20000;\n\n\tfunction fourCCToInt32( value ) {\n\n\t\treturn value.charCodeAt( 0 ) +\n\t\t\t( value.charCodeAt( 1 ) << 8 ) +\n\t\t\t( value.charCodeAt( 2 ) << 16 ) +\n\t\t\t( value.charCodeAt( 3 ) << 24 );\n\n\t}\n\n\tfunction int32ToFourCC( value ) {\n\n\t\treturn String.fromCharCode(\n\t\t\tvalue & 0xff,\n\t\t\t( value >> 8 ) & 0xff,\n\t\t\t( value >> 16 ) & 0xff,\n\t\t\t( value >> 24 ) & 0xff\n\t\t);\n\n\t}\n\n\tfunction loadARGBMip( buffer, dataOffset, width, height ) {\n\n\t\tvar dataLength = width * height * 4;\n\t\tvar srcBuffer = new Uint8Array( buffer, dataOffset, dataLength );\n\t\tvar byteArray = new Uint8Array( dataLength );\n\t\tvar dst = 0;\n\t\tvar src = 0;\n\t\tfor ( var y = 0; y < height; y ++ ) {\n\n\t\t\tfor ( var x = 0; x < width; x ++ ) {\n\n\t\t\t\tvar b = srcBuffer[ src ]; src ++;\n\t\t\t\tvar g = srcBuffer[ src ]; src ++;\n\t\t\t\tvar r = srcBuffer[ src ]; src ++;\n\t\t\t\tvar a = srcBuffer[ src ]; src ++;\n\t\t\t\tbyteArray[ dst ] = r; dst ++;\t//r\n\t\t\t\tbyteArray[ dst ] = g; dst ++;\t//g\n\t\t\t\tbyteArray[ dst ] = b; dst ++;\t//b\n\t\t\t\tbyteArray[ dst ] = a; dst ++;\t//a\n\n\t\t\t}\n\n\t\t}\n\t\treturn byteArray;\n\n\t}\n\n\tvar FOURCC_DXT1 = fourCCToInt32( \"DXT1\" );\n\tvar FOURCC_DXT3 = fourCCToInt32( \"DXT3\" );\n\tvar FOURCC_DXT5 = fourCCToInt32( \"DXT5\" );\n\tvar FOURCC_ETC1 = fourCCToInt32( \"ETC1\" );\n\n\tvar headerLengthInt = 31; // The header length in 32 bit ints\n\n\t// Offsets into the header array\n\n\tvar off_magic = 0;\n\n\tvar off_size = 1;\n\tvar off_flags = 2;\n\tvar off_height = 3;\n\tvar off_width = 4;\n\n\tvar off_mipmapCount = 7;\n\n\tvar off_pfFlags = 20;\n\tvar off_pfFourCC = 21;\n\tvar off_RGBBitCount = 22;\n\tvar off_RBitMask = 23;\n\tvar off_GBitMask = 24;\n\tvar off_BBitMask = 25;\n\tvar off_ABitMask = 26;\n\n\tvar off_caps = 27;\n\tvar off_caps2 = 28;\n\tvar off_caps3 = 29;\n\tvar off_caps4 = 30;\n\n\t// Parse header\n\n\tvar header = new Int32Array( buffer, 0, headerLengthInt );\n\n\tif ( header[ off_magic ] !== DDS_MAGIC ) {\n\n\t\tconsole.error( 'THREE.DDSLoader.parse: Invalid magic number in DDS header.' );\n\t\treturn dds;\n\n\t}\n\n\tif ( ! header[ off_pfFlags ] & DDPF_FOURCC ) {\n\n\t\tconsole.error( 'THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code.' );\n\t\treturn dds;\n\n\t}\n\n\tvar blockBytes;\n\n\tvar fourCC = header[ off_pfFourCC ];\n\n\tvar isRGBAUncompressed = false;\n\n\tswitch ( fourCC ) {\n\n\t\tcase FOURCC_DXT1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = THREE.RGB_S3TC_DXT1_Format;\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT3:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT3_Format;\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT5:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT5_Format;\n\t\t\tbreak;\n\n\t\tcase FOURCC_ETC1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = THREE.RGB_ETC1_Format;\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tif ( header[ off_RGBBitCount ] === 32\n\t\t\t\t&& header[ off_RBitMask ] & 0xff0000\n\t\t\t\t&& header[ off_GBitMask ] & 0xff00\n\t\t\t\t&& header[ off_BBitMask ] & 0xff\n\t\t\t\t&& header[ off_ABitMask ] & 0xff000000 ) {\n\n\t\t\t\tisRGBAUncompressed = true;\n\t\t\t\tblockBytes = 64;\n\t\t\t\tdds.format = THREE.RGBAFormat;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC( fourCC ) );\n\t\t\t\treturn dds;\n\n\t\t\t}\n\n\t}\n\n\tdds.mipmapCount = 1;\n\n\tif ( header[ off_flags ] & DDSD_MIPMAPCOUNT && loadMipmaps !== false ) {\n\n\t\tdds.mipmapCount = Math.max( 1, header[ off_mipmapCount ] );\n\n\t}\n\n\tvar caps2 = header[ off_caps2 ];\n\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\n\tif ( dds.isCubemap && (\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEX ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEY ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ )\n\t) ) {\n\n\t\tconsole.error( 'THREE.DDSLoader.parse: Incomplete cubemap faces' );\n\t\treturn dds;\n\n\t}\n\n\tdds.width = header[ off_width ];\n\tdds.height = header[ off_height ];\n\n\tvar dataOffset = header[ off_size ] + 4;\n\n\t// Extract mipmaps buffers\n\n\tvar faces = dds.isCubemap ? 6 : 1;\n\n\tfor ( var face = 0; face < faces; face ++ ) {\n\n\t\tvar width = dds.width;\n\t\tvar height = dds.height;\n\n\t\tfor ( var i = 0; i < dds.mipmapCount; i ++ ) {\n\n\t\t\tif ( isRGBAUncompressed ) {\n\n\t\t\t\tvar byteArray = loadARGBMip( buffer, dataOffset, width, height );\n\t\t\t\tvar dataLength = byteArray.length;\n\n\t\t\t} else {\n\n\t\t\t\tvar dataLength = Math.max( 4, width ) / 4 * Math.max( 4, height ) / 4 * blockBytes;\n\t\t\t\tvar byteArray = new Uint8Array( buffer, dataOffset, dataLength );\n\n\t\t\t}\n\n\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\n\t\t\tdds.mipmaps.push( mipmap );\n\n\t\t\tdataOffset += dataLength;\n\n\t\t\twidth = Math.max( width >> 1, 1 );\n\t\t\theight = Math.max( height >> 1, 1 );\n\n\t\t}\n\n\t}\n\n\treturn dds;\n\n};\n\nexport { DDSLoader }\n","var render, staticRenderFns\nimport script from \"./ModelViewer.vue?vue&type=script&lang=js\"\nexport * from \"./ModelViewer.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * @author Rich Tibbett / https://github.com/richtr\n * @author mrdoob / http://mrdoob.com/\n * @author Tony Parisi / http://www.tonyparisi.com/\n * @author Takahiro / https://github.com/takahirox\n * @author Don McCurdy / https://www.donmccurdy.com\n */\nimport * as THREE from 'three';\nimport { DDSLoader } from './DDSLoader'\nimport { BufferGeometryUtils } from '../utils'\n\nconst GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\t\tthis.dracoLoader = null;\n\n\t}\n\n\tGLTFLoader.prototype = {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tcrossOrigin: 'anonymous',\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar path = this.path !== undefined ? this.path : THREE.LoaderUtils.extractUrlBase( url );\n\n\t\t\tvar loader = new THREE.FileLoader( scope.manager );\n\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, path, onLoad, onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\tif ( onError !== undefined ) {\n\n\t\t\t\t\t\tonError( e );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow e;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tsetCrossOrigin: function ( value ) {\n\n\t\t\tthis.crossOrigin = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetPath: function ( value ) {\n\n\t\t\tthis.path = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = THREE.LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = THREE.LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFLightsExtension( json );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension( json );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\textensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] = new GLTFTextureDDSExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, extensions, {\n\n\t\t\t\tpath: path || this.path || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\tmanager: this.manager\n\n\t\t\t} );\n\n\t\t\tparser.parse( function ( scene, scenes, cameras, animations, json ) {\n\n\t\t\t\tvar glTF = {\n\t\t\t\t\tscene: scene,\n\t\t\t\t\tscenes: scenes,\n\t\t\t\t\tcameras: cameras,\n\t\t\t\t\tanimations: animations,\n\t\t\t\t\tasset: json.asset,\n\t\t\t\t\tparser: parser,\n\t\t\t\t\tuserData: {}\n\t\t\t\t};\n\n\t\t\t\taddUnknownExtensionsToUserData( extensions, glTF, json );\n\n\t\t\t\tonLoad( glTF );\n\n\t\t\t}, onError );\n\n\t\t}\n\n\t};\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS: 'KHR_lights',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n\t};\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification:\n\t * https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n\tfunction GLTFTextureDDSExtension() {\n\n\t\tif ( ! DDSLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\tthis.ddsLoader = new DDSLoader();\n\n\t}\n\n\t/**\n\t * Lights Extension\n\t *\n\t * Specification: PENDING\n\t */\n\tfunction GLTFLightsExtension( json ) {\n\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS;\n\n\t\tthis.lights = {};\n\n\t\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS ] ) || {};\n\t\tvar lights = extension.lights || {};\n\n\t\tfor ( var lightId in lights ) {\n\n\t\t\tvar light = lights[ lightId ];\n\t\t\tvar lightNode;\n\n\t\t\tvar color = new THREE.Color().fromArray( light.color );\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'directional':\n\t\t\t\t\tlightNode = new THREE.DirectionalLight( color );\n\t\t\t\t\tlightNode.target.position.set( 0, 0, 1 );\n\t\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'point':\n\t\t\t\t\tlightNode = new THREE.PointLight( color );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'spot':\n\t\t\t\t\tlightNode = new THREE.SpotLight( color );\n\t\t\t\t\t// Handle spotlight properties.\n\t\t\t\t\tlight.spot = light.spot || {};\n\t\t\t\t\tlight.spot.innerConeAngle = light.spot.innerConeAngle !== undefined ? light.spot.innerConeAngle : 0;\n\t\t\t\t\tlight.spot.outerConeAngle = light.spot.outerConeAngle !== undefined ? light.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\t\tlightNode.angle = light.spot.outerConeAngle;\n\t\t\t\t\tlightNode.penumbra = 1.0 - light.spot.innerConeAngle / light.spot.outerConeAngle;\n\t\t\t\t\tlightNode.target.position.set( 0, 0, 1 );\n\t\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ambient':\n\t\t\t\t\tlightNode = new THREE.AmbientLight( color );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( lightNode ) {\n\n\t\t\t\tlightNode.decay = 2;\n\n\t\t\t\tif ( light.intensity !== undefined ) {\n\n\t\t\t\t\tlightNode.intensity = light.intensity;\n\n\t\t\t\t}\n\n\t\t\t\tlightNode.name = light.name || ( 'light_' + lightId );\n\t\t\t\tthis.lights[ lightId ] = lightNode;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Unlit Materials Extension (pending)\n\t *\n\t * PR: https://github.com/KhronosGroup/glTF/pull/1163\n\t */\n\tfunction GLTFMaterialsUnlitExtension( json ) {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function ( material ) {\n\n\t\treturn THREE.MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, material, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = material.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/* BINARY EXTENSION */\n\n\tvar BINARY_EXTENSION_BUFFER_NAME = 'binary_glTF';\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: THREE.LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.' );\n\n\t\t}\n\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = THREE.LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/pull/874\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tif ( ! ( attributeName in ATTRIBUTES ) ) continue;\n\n\t\t\tthreeAttributeMap[ ATTRIBUTES[ attributeName ] ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tif ( ATTRIBUTES[ attributeName ] !== undefined && gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ ATTRIBUTES[ attributeName ] ] = componentType;\n\t\t\t\tattributeNormalizedMap[ ATTRIBUTES[ attributeName ] ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn THREE.ShaderMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( params, material, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = material.extensions[ this.name ];\n\n\t\t\t\tvar shader = THREE.ShaderLib[ 'standard' ];\n\n\t\t\t\tvar uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\t\t\t\tvar specularMapParsFragmentChunk = [\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t\t\t'#endif'\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t\t\t'#endif'\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tvar specularMapFragmentChunk = [\n\t\t\t\t\t'vec3 specularFactor = specular;',\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t\t\t'#endif'\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tvar glossinessMapFragmentChunk = [\n\t\t\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t\t\t'#endif'\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t\t\t'PhysicalMaterial material;',\n\t\t\t\t\t'material.diffuseColor = diffuseColor.rgb;',\n\t\t\t\t\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\n\t\t\t\t\t'material.specularColor = specularFactor.rgb;',\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tvar fragmentShader = shader.fragmentShader\n\t\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t\t\tdelete uniforms.roughness;\n\t\t\t\tdelete uniforms.metalness;\n\t\t\t\tdelete uniforms.roughnessMap;\n\t\t\t\tdelete uniforms.metalnessMap;\n\n\t\t\t\tuniforms.specular = { value: new THREE.Color().setHex( 0x111111 ) };\n\t\t\t\tuniforms.glossiness = { value: 0.5 };\n\t\t\t\tuniforms.specularMap = { value: null };\n\t\t\t\tuniforms.glossinessMap = { value: null };\n\n\t\t\t\tparams.vertexShader = shader.vertexShader;\n\t\t\t\tparams.fragmentShader = fragmentShader;\n\t\t\t\tparams.uniforms = uniforms;\n\t\t\t\tparams.defines = { 'STANDARD': '' };\n\n\t\t\t\tparams.color = new THREE.Color( 1.0, 1.0, 1.0 );\n\t\t\t\tparams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tparams.color.fromArray( array );\n\t\t\t\t\tparams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'map', pbrSpecularGlossiness.diffuseTexture.index ) );\n\n\t\t\t\t}\n\n\t\t\t\tparams.emissive = new THREE.Color( 0.0, 0.0, 0.0 );\n\t\t\t\tparams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tparams.specular = new THREE.Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tparams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossIndex = pbrSpecularGlossiness.specularGlossinessTexture.index;\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'glossinessMap', specGlossIndex ) );\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'specularMap', specGlossIndex ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( params ) {\n\n\t\t\t\t// setup material properties based on MeshStandardMaterial for Specular-Glossiness\n\n\t\t\t\tvar material = new THREE.ShaderMaterial( {\n\t\t\t\t\tdefines: params.defines,\n\t\t\t\t\tvertexShader: params.vertexShader,\n\t\t\t\t\tfragmentShader: params.fragmentShader,\n\t\t\t\t\tuniforms: params.uniforms,\n\t\t\t\t\tfog: true,\n\t\t\t\t\tlights: true,\n\t\t\t\t\topacity: params.opacity,\n\t\t\t\t\ttransparent: params.transparent\n\t\t\t\t} );\n\n\t\t\t\tmaterial.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t\t\tmaterial.color = params.color;\n\n\t\t\t\tmaterial.map = params.map === undefined ? null : params.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = params.aoMap === undefined ? null : params.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = params.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = params.normalMap === undefined ? null : params.normalMap;\n\t\t\t\tif ( params.normalScale ) material.normalScale = params.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = params.specularMap === undefined ? null : params.specularMap;\n\t\t\t\tmaterial.specular = params.specular;\n\n\t\t\t\tmaterial.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;\n\t\t\t\tmaterial.glossiness = params.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = params.envMap === undefined ? null : params.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\tmaterial.extensions.derivatives = true;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can\n\t\t\t * copy only properties it knows about or inherits, and misses many properties that would\n\t\t\t * normally be defined by MeshStandardMaterial.\n\t\t\t *\n\t\t\t * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of\n\t\t\t * loading a glTF model, but cloning later (e.g. by the user) would require these changes\n\t\t\t * AND also updating `.onBeforeRender` on the parent mesh.\n\t\t\t *\n\t\t\t * @param  {THREE.ShaderMaterial} source\n\t\t\t * @return {THREE.ShaderMaterial}\n\t\t\t */\n\t\t\tcloneMaterial: function ( source ) {\n\n\t\t\t\tvar target = source.clone();\n\n\t\t\t\ttarget.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t\t\tvar params = this.specularGlossinessParams;\n\n\t\t\t\tfor ( var i = 0, il = params.length; i < il; i ++ ) {\n\n\t\t\t\t\ttarget[ params[ i ] ] = source[ params[ i ] ];\n\n\t\t\t\t}\n\n\t\t\t\treturn target;\n\n\t\t\t},\n\n\t\t\t// Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.\n\t\t\trefreshUniforms: function ( renderer, scene, camera, geometry, material, group ) {\n\n\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial !== true ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tvar uniforms = material.uniforms;\n\t\t\t\tvar defines = material.defines;\n\n\t\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t\t\tuniforms.diffuse.value.copy( material.color );\n\t\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t\t\tuniforms.map.value = material.map;\n\t\t\t\tuniforms.specularMap.value = material.specularMap;\n\t\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t\t\t// uv repeat and offset setting priorities\n\t\t\t\t// 1. color map\n\t\t\t\t// 2. specular map\n\t\t\t\t// 3. normal map\n\t\t\t\t// 4. bump map\n\t\t\t\t// 5. alpha map\n\t\t\t\t// 6. emissive map\n\n\t\t\t\tvar uvScaleMap;\n\n\t\t\t\tif ( material.map ) {\n\n\t\t\t\t\tuvScaleMap = material.map;\n\n\t\t\t\t} else if ( material.specularMap ) {\n\n\t\t\t\t\tuvScaleMap = material.specularMap;\n\n\t\t\t\t} else if ( material.displacementMap ) {\n\n\t\t\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t\t\t} else if ( material.normalMap ) {\n\n\t\t\t\t\tuvScaleMap = material.normalMap;\n\n\t\t\t\t} else if ( material.bumpMap ) {\n\n\t\t\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t\t\t} else if ( material.glossinessMap ) {\n\n\t\t\t\t\tuvScaleMap = material.glossinessMap;\n\n\t\t\t\t} else if ( material.alphaMap ) {\n\n\t\t\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t\t\t} else if ( material.emissiveMap ) {\n\n\t\t\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t\t\t// backwards compatibility\n\t\t\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t\t\t}\n\n\t\t\t\tuniforms.envMap.value = material.envMap;\n\t\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\t\t\t\tuniforms.flipEnvMap.value = ( material.envMap && material.envMap.isCubeTexture ) ? - 1 : 1;\n\n\t\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\t\tuniforms.specular.value.copy( material.specular );\n\t\t\t\tuniforms.glossiness.value = material.glossiness;\n\n\t\t\t\tuniforms.glossinessMap.value = material.glossinessMap;\n\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\n\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t\t\tif ( uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined ) {\n\n\t\t\t\t\tdefines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\n\t\t\t\t\tdefines.USE_ROUGHNESSMAP = '';\n\n\t\t\t\t}\n\n\t\t\t\tif ( uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined ) {\n\n\t\t\t\t\tdelete defines.USE_GLOSSINESSMAP;\n\t\t\t\t\tdelete defines.USE_ROUGHNESSMAP;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tTHREE.Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( THREE.Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s0 = 2 * ppp - 3 * pp + 1;\n\t\tvar s1 = ppp - 2 * pp + p;\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_TYPE = {\n\t\t5126: Number,\n\t\t//35674: THREE.Matrix2,\n\t\t35675: THREE.Matrix3,\n\t\t35676: THREE.Matrix4,\n\t\t35664: THREE.Vector2,\n\t\t35665: THREE.Vector3,\n\t\t35666: THREE.Vector4,\n\t\t35678: THREE.Texture\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: THREE.NearestFilter,\n\t\t9729: THREE.LinearFilter,\n\t\t9984: THREE.NearestMipMapNearestFilter,\n\t\t9985: THREE.LinearMipMapNearestFilter,\n\t\t9986: THREE.NearestMipMapLinearFilter,\n\t\t9987: THREE.LinearMipMapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: THREE.ClampToEdgeWrapping,\n\t\t33648: THREE.MirroredRepeatWrapping,\n\t\t10497: THREE.RepeatWrapping\n\t};\n\n\tvar WEBGL_TEXTURE_FORMATS = {\n\t\t6406: THREE.AlphaFormat,\n\t\t6407: THREE.RGBFormat,\n\t\t6408: THREE.RGBAFormat,\n\t\t6409: THREE.LuminanceFormat,\n\t\t6410: THREE.LuminanceAlphaFormat\n\t};\n\n\tvar WEBGL_TEXTURE_DATATYPES = {\n\t\t5121: THREE.UnsignedByteType,\n\t\t32819: THREE.UnsignedShort4444Type,\n\t\t32820: THREE.UnsignedShort5551Type,\n\t\t33635: THREE.UnsignedShort565Type\n\t};\n\n\tvar WEBGL_SIDES = {\n\t\t1028: THREE.BackSide, // Culling front\n\t\t1029: THREE.FrontSide // Culling back\n\t\t//1032: THREE.NoSide   // Culling front and back, what to do?\n\t};\n\n\tvar WEBGL_DEPTH_FUNCS = {\n\t\t512: THREE.NeverDepth,\n\t\t513: THREE.LessDepth,\n\t\t514: THREE.EqualDepth,\n\t\t515: THREE.LessEqualDepth,\n\t\t516: THREE.GreaterEqualDepth,\n\t\t517: THREE.NotEqualDepth,\n\t\t518: THREE.GreaterEqualDepth,\n\t\t519: THREE.AlwaysDepth\n\t};\n\n\tvar WEBGL_BLEND_EQUATIONS = {\n\t\t32774: THREE.AddEquation,\n\t\t32778: THREE.SubtractEquation,\n\t\t32779: THREE.ReverseSubtractEquation\n\t};\n\n\tvar WEBGL_BLEND_FUNCS = {\n\t\t0: THREE.ZeroFactor,\n\t\t1: THREE.OneFactor,\n\t\t768: THREE.SrcColorFactor,\n\t\t769: THREE.OneMinusSrcColorFactor,\n\t\t770: THREE.SrcAlphaFactor,\n\t\t771: THREE.OneMinusSrcAlphaFactor,\n\t\t772: THREE.DstAlphaFactor,\n\t\t773: THREE.OneMinusDstAlphaFactor,\n\t\t774: THREE.DstColorFactor,\n\t\t775: THREE.OneMinusDstColorFactor,\n\t\t776: THREE.SrcAlphaSaturateFactor\n\t\t// The followings are not supported by Three.js yet\n\t\t//32769: CONSTANT_COLOR,\n\t\t//32770: ONE_MINUS_CONSTANT_COLOR,\n\t\t//32771: CONSTANT_ALPHA,\n\t\t//32772: ONE_MINUS_CONSTANT_COLOR\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD0: 'uv', // deprecated\n\t\tTEXCOORD: 'uv', // deprecated\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tCOLOR0: 'color', // deprecated\n\t\tCOLOR: 'color', // deprecated\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tWEIGHT: 'skinWeight', // deprecated\n\t\tJOINTS_0: 'skinIndex',\n\t\tJOINT: 'skinIndex' // deprecated\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: THREE.InterpolateSmooth, // We use custom interpolation GLTFCubicSplineInterpolation for CUBICSPLINE.\n\t\t                                      // KeyframeTrack.optimize() can't handle glTF Cubic Spline output values layout,\n\t\t                                      // using THREE.InterpolateSmooth for KeyframeTrack instantiation to prevent optimization.\n\t\t                                      // See KeyframeTrack.optimize() for the detail.\n\t\tLINEAR: THREE.InterpolateLinear,\n\t\tSTEP: THREE.InterpolateDiscrete\n\t};\n\n\tvar STATES_ENABLES = {\n\t\t2884: 'CULL_FACE',\n\t\t2929: 'DEPTH_TEST',\n\t\t3042: 'BLEND',\n\t\t3089: 'SCISSOR_TEST',\n\t\t32823: 'POLYGON_OFFSET_FILL',\n\t\t32926: 'SAMPLE_ALPHA_TO_COVERAGE'\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial() {\n\n\t\treturn new THREE.MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: THREE.FrontSide\n\t\t} );\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {THREE.BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {Array<THREE.BufferAttribute>} accessors\n\t */\n\tfunction addMorphTargets( geometry, targets, accessors ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return;\n\n\t\tvar morphPositions = [];\n\t\tvar morphNormals = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\t\t\tvar attributeName = 'morphTarget' + i;\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\t// Three.js morph position is absolute value. The formula is\n\t\t\t\t//   basePosition\n\t\t\t\t//     + weight0 * ( morphPosition0 - basePosition )\n\t\t\t\t//     + weight1 * ( morphPosition1 - basePosition )\n\t\t\t\t//     ...\n\t\t\t\t// while the glTF one is relative\n\t\t\t\t//   basePosition\n\t\t\t\t//     + weight0 * glTFmorphPosition0\n\t\t\t\t//     + weight1 * glTFmorphPosition1\n\t\t\t\t//     ...\n\t\t\t\t// then we need to convert from relative to absolute here.\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\t// Cloning not to pollute original accessor\n\t\t\t\t\tvar positionAttribute = cloneBufferAttribute( accessors[ target.POSITION ] );\n\t\t\t\t\tpositionAttribute.name = attributeName;\n\n\t\t\t\t\tvar position = geometry.attributes.position;\n\n\t\t\t\t\tfor ( var j = 0, jl = positionAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\tpositionAttribute.setXYZ(\n\t\t\t\t\t\t\tj,\n\t\t\t\t\t\t\tpositionAttribute.getX( j ) + position.getX( j ),\n\t\t\t\t\t\t\tpositionAttribute.getY( j ) + position.getY( j ),\n\t\t\t\t\t\t\tpositionAttribute.getZ( j ) + position.getZ( j )\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpositionAttribute = geometry.attributes.position;\n\n\t\t\t\t}\n\n\t\t\t\tmorphPositions.push( positionAttribute );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\t// see target.POSITION's comment\n\n\t\t\t\tvar normalAttribute;\n\n\t\t\t\tif ( target.NORMAL !== undefined ) {\n\n\t\t\t\t\tvar normalAttribute = cloneBufferAttribute( accessors[ target.NORMAL ] );\n\t\t\t\t\tnormalAttribute.name = attributeName;\n\n\t\t\t\t\tvar normal = geometry.attributes.normal;\n\n\t\t\t\t\tfor ( var j = 0, jl = normalAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\tnormalAttribute.setXYZ(\n\t\t\t\t\t\t\tj,\n\t\t\t\t\t\t\tnormalAttribute.getX( j ) + normal.getX( j ),\n\t\t\t\t\t\t\tnormalAttribute.getY( j ) + normal.getY( j ),\n\t\t\t\t\t\t\tnormalAttribute.getZ( j ) + normal.getZ( j )\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnormalAttribute = geometry.attributes.normal;\n\n\t\t\t\t}\n\n\t\t\t\tmorphNormals.push( normalAttribute );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\n\t}\n\n\t/**\n\t * @param {THREE.Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction isPrimitiveEqual( a, b ) {\n\n\t\tif ( a.indices !== b.indices ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn isObjectEqual( a.attributes, b.attributes );\n\n\t}\n\n\tfunction isObjectEqual( a, b ) {\n\n\t\tif ( Object.keys( a ).length !== Object.keys( b ).length ) return false;\n\n\t\tfor ( var key in a ) {\n\n\t\t\tif ( a[ key ] !== b[ key ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction isArrayEqual( a, b ) {\n\n\t\tif ( a.length !== b.length ) return false;\n\n\t\tfor ( var i = 0, il = a.length; i < il; i ++ ) {\n\n\t\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction getCachedGeometry( cache, newPrimitive ) {\n\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\n\n\t\t\tvar cached = cache[ i ];\n\n\t\t\tif ( isPrimitiveEqual( cached.primitive, newPrimitive ) ) return cached.promise;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tfunction getCachedCombinedGeometry( cache, geometries ) {\n\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\n\n\t\t\tvar cached = cache[ i ];\n\n\t\t\tif ( isArrayEqual( geometries, cached.baseGeometries ) ) return cached.geometry;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tfunction getCachedMultiPassGeometry( cache, geometry, primitives ) {\n\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\n\n\t\t\tvar cached = cache[ i ];\n\n\t\t\tif ( geometry === cached.baseGeometry && isArrayEqual( primitives, cached.primitives ) ) return cached.geometry;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tfunction cloneBufferAttribute( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tvar count = attribute.count;\n\t\t\tvar itemSize = attribute.itemSize;\n\t\t\tvar array = attribute.array.slice( 0, count * itemSize );\n\n\t\t\tfor ( var i = 0; i < count; ++ i ) {\n\n\t\t\t\tarray[ i ] = attribute.getX( i );\n\t\t\t\tif ( itemSize >= 2 ) array[ i + 1 ] = attribute.getY( i );\n\t\t\t\tif ( itemSize >= 3 ) array[ i + 2 ] = attribute.getZ( i );\n\t\t\t\tif ( itemSize >= 4 ) array[ i + 3 ] = attribute.getW( i );\n\n\t\t\t}\n\n\t\t\treturn new THREE.BufferAttribute( array, itemSize, attribute.normalized );\n\n\t\t}\n\n\t\treturn attribute.clone();\n\n\t}\n\n\t/**\n\t * Checks if we can build a single Mesh with MultiMaterial from multiple primitives.\n\t * Returns true if all primitives use the same attributes/morphAttributes/mode\n\t * and also have index. Otherwise returns false.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Boolean}\n\t */\n\tfunction isMultiPassGeometry( primitives ) {\n\n\t\tif ( primitives.length < 2 ) return false;\n\n\t\tvar primitive0 = primitives[ 0 ];\n\t\tvar targets0 = primitive0.targets || [];\n\n\t\tif ( primitive0.indices === undefined ) return false;\n\n\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\n\t\t\tif ( primitive0.mode !== primitive.mode ) return false;\n\t\t\tif ( primitive.indices === undefined ) return false;\n\t\t\tif ( ! isObjectEqual( primitive0.attributes, primitive.attributes ) ) return false;\n\n\t\t\tvar targets = primitive.targets || [];\n\n\t\t\tif ( targets0.length !== targets.length ) return false;\n\n\t\t\tfor ( var j = 0, jl = targets0.length; j < jl; j ++ ) {\n\n\t\t\t\tif ( ! isObjectEqual( targets0[ j ], targets[ j ] ) ) return false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, extensions, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = extensions || {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = [];\n\t\tthis.multiplePrimitivesCache = [];\n\t\tthis.multiPassGeometryCache = [];\n\n\t\tthis.textureLoader = new THREE.TextureLoader( this.options.manager );\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\t\tthis.fileLoader = new THREE.FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t}\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar json = this.json;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis.markDefs();\n\n\t\t// Fire the callback on complete\n\t\tthis.getMultiDependencies( [\n\n\t\t\t'scene',\n\t\t\t'animation',\n\t\t\t'camera'\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar scenes = dependencies.scenes || [];\n\t\t\tvar scene = scenes[ json.scene || 0 ];\n\t\t\tvar animations = dependencies.animations || [];\n\t\t\tvar cameras = dependencies.cameras || [];\n\n\t\t\tonLoad( scene, scenes, cameras, animations, json );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype.markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\tvar meshReferences = {};\n\t\tvar meshUses = {};\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\n\t\t// avoid having more than one THREE.Mesh with the same name, count\n\t\t// references and rename instances below.\n\t\t//\n\t\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] === undefined ) {\n\n\t\t\t\t\tmeshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;\n\n\t\t\t\t}\n\n\t\t\t\tmeshReferences[ nodeDef.mesh ] ++;\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.json.meshReferences = meshReferences;\n\t\tthis.json.meshUses = meshUses;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this.loadMesh( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this.loadBufferView( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this.loadMaterial( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this.loadTexture( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Requests all multiple dependencies of the specified types asynchronously, with caching.\n\t * @param {Array<string>} types\n\t * @return {Promise<Object<Array<Object>>>}\n\t */\n\tGLTFParser.prototype.getMultiDependencies = function ( types ) {\n\n\t\tvar results = {};\n\t\tvar pendings = [];\n\n\t\tfor ( var i = 0, il = types.length; i < il; i ++ ) {\n\n\t\t\tvar type = types[ i ];\n\t\t\tvar value = this.getDependencies( type );\n\n\t\t\tvalue = value.then( function ( key, value ) {\n\n\t\t\t\tresults[ key ] = value;\n\n\t\t\t}.bind( this, type + ( type === 'mesh' ? 'es' : 's' ) ) );\n\n\t\t\tpendings.push( value );\n\n\t\t}\n\n\t\treturn Promise.all( pendings ).then( function () {\n\n\t\t\treturn results;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<THREE.BufferAttribute|THREE.InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = json.bufferViews[ accessorDef.bufferView ].byteStride;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\t// Use the full buffer if it's interleaved.\n\t\t\t\t\tarray = new TypedArray( bufferView );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new THREE.InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new THREE.InterleavedBufferAttribute( ib, itemSize, byteOffset / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new THREE.BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute.setArray( bufferAttribute.array.slice() );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\t\tvar textureLoader = this.textureLoader;\n\n\t\tvar URL = window.URL || window.webkitURL;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\tvar source;\n\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\n\n\t\t} else {\n\n\t\t\tsource = json.images[ textureDef.source ];\n\n\t\t}\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\t// Load Texture resource.\n\n\t\t\tvar loader = THREE.Loader.Handlers.get( sourceURI );\n\n\t\t\tif ( ! loader ) {\n\n\t\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\n\t\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\n\t\t\t\t\t: textureLoader;\n\n\t\t\t}\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name !== undefined ) texture.name = textureDef.name;\n\n\t\t\t// .format of dds texture is set in DDSLoader\n\t\t\tif ( ! textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\t\ttexture.format = textureDef.format !== undefined ? WEBGL_TEXTURE_FORMATS[ textureDef.format ] : THREE.RGBAFormat;\n\n\t\t\t}\n\n\t\t\tif ( textureDef.internalFormat !== undefined && texture.format !== WEBGL_TEXTURE_FORMATS[ textureDef.internalFormat ] ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. ' +\n\t\t\t\t\t\t\t\t\t\t\t'internalFormat will be forced to be the same value as format.' );\n\n\t\t\t}\n\n\t\t\ttexture.type = textureDef.type !== undefined ? WEBGL_TEXTURE_DATATYPES[ textureDef.type ] : THREE.UnsignedByteType;\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || THREE.LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || THREE.LinearMipMapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || THREE.RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || THREE.RepeatWrapping;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} textureName\n\t * @param {number} textureIndex\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, textureName, textureIndex ) {\n\n\t\treturn this.getDependency( 'texture', textureIndex ).then( function ( texture ) {\n\n\t\t\tmaterialParams[ textureName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<THREE.Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = this.json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType( materialDef );\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType( materialDef );\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tmaterialType = THREE.MeshStandardMaterial;\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tvar textureIndex = metallicRoughness.metallicRoughnessTexture.index;\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', textureIndex ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', textureIndex ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = THREE.DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture.index ) );\n\n\t\t\tmaterialParams.normalScale = new THREE.Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture.index ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== THREE.MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new THREE.Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture.index ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === THREE.ShaderMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name !== undefined ) material.name = materialDef.name;\n\n\t\t\t// Normal map textures use OpenGL conventions:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#materialnormaltexture\n\t\t\tif ( material.normalScale ) {\n\n\t\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t\t}\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = THREE.sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = THREE.sRGBEncoding;\n\t\t\tif ( material.specularMap ) material.specularMap.encoding = THREE.sRGBEncoding;\n\n\t\t\tif ( materialDef.extras ) material.userData = materialDef.extras;\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * @param  {THREE.BufferGeometry} geometry\n\t * @param  {GLTF.Primitive} primitiveDef\n\t * @param  {Array<THREE.BufferAttribute>} accessors\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, accessors ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ];\n\t\t\tvar bufferAttribute = accessors[ attributes[ gltfAttributeName ] ];\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( ! threeAttributeName ) continue;\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tgeometry.addAttribute( threeAttributeName, bufferAttribute );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tgeometry.setIndex( accessors[ primitiveDef.indices ] );\n\n\t\t}\n\n\t\tif ( primitiveDef.targets !== undefined ) {\n\n\t\t\taddMorphTargets( geometry, primitiveDef.targets, accessors );\n\n\t\t}\n\n\t\tif ( primitiveDef.extras !== undefined ) {\n\n\t\t\tgeometry.userData = primitiveDef.extras;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t * If we can build a single BufferGeometry with .groups from multiple primitives, returns one BufferGeometry.\n\t * Otherwise, returns BufferGeometries without .groups as many as primitives.\n\t *\n\t * @param {Array<Object>} primitives\n\t * @return {Promise<Array<THREE.BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tvar isMultiPass = isMultiPassGeometry( primitives );\n\t\tvar originalPrimitives;\n\n\t\tif ( isMultiPass ) {\n\n\t\t\toriginalPrimitives = primitives; // save original primitives and use later\n\n\t\t\t// We build a single BufferGeometry with .groups from multiple primitives\n\t\t\t// because all primitives share the same attributes/morph/mode and have indices.\n\n\t\t\tprimitives = [ primitives[ 0 ] ];\n\n\t\t\t// Sets .groups and combined indices to a geometry later in this method.\n\n\t\t}\n\n\t\treturn this.getDependencies( 'accessor' ).then( function ( accessors ) {\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// See if we've already created this geometry\n\t\t\t\tvar cached = getCachedGeometry( cache, primitive );\n\n\t\t\t\tif ( cached ) {\n\n\t\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\t\tpending.push( cached );\n\n\t\t\t\t} else if ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tvar geometryPromise = extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\t\t\taddPrimitiveAttributes( geometry, primitive, accessors );\n\n\t\t\t\t\t\t\treturn geometry;\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\tcache.push( { primitive: primitive, promise: geometryPromise } );\n\n\t\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\t\t\t\taddPrimitiveAttributes( geometry, primitive, accessors );\n\n\t\t\t\t\tvar geometryPromise = Promise.resolve( geometry );\n\n\t\t\t\t\t// Cache this geometry\n\t\t\t\t\tcache.push( { primitive: primitive, promise: geometryPromise } );\n\n\t\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function ( geometries ) {\n\n\t\t\t\tif ( isMultiPass ) {\n\n\t\t\t\t\tvar baseGeometry = geometries[ 0 ];\n\n\t\t\t\t\t// See if we've already created this combined geometry\n\t\t\t\t\tvar cache = parser.multiPassGeometryCache;\n\t\t\t\t\tvar cached = getCachedMultiPassGeometry( cache, baseGeometry, originalPrimitives );\n\n\t\t\t\t\tif ( cached !== null ) return [ cached.geometry ];\n\n\t\t\t\t\t// Cloning geometry because of index override.\n\t\t\t\t\t// Attributes can be reused so cloning by myself here.\n\t\t\t\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\t\t\t\tgeometry.name = baseGeometry.name;\n\t\t\t\t\tgeometry.userData = baseGeometry.userData;\n\n\t\t\t\t\tfor ( var key in baseGeometry.attributes ) geometry.addAttribute( key, baseGeometry.attributes[ key ] );\n\t\t\t\t\tfor ( var key in baseGeometry.morphAttributes ) geometry.morphAttributes[ key ] = baseGeometry.morphAttributes[ key ];\n\n\t\t\t\t\tvar indices = [];\n\t\t\t\t\tvar offset = 0;\n\n\t\t\t\t\tfor ( var i = 0, il = originalPrimitives.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar accessor = accessors[ originalPrimitives[ i ].indices ];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = accessor.count; j < jl; j ++ ) indices.push( accessor.array[ j ] );\n\n\t\t\t\t\t\tgeometry.addGroup( offset, accessor.count, i );\n\n\t\t\t\t\t\toffset += accessor.count;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.setIndex( indices );\n\n\t\t\t\t\tcache.push( { geometry: geometry, baseGeometry: baseGeometry, primitives: originalPrimitives } );\n\n\t\t\t\t\treturn [ geometry ];\n\n\t\t\t\t} else if ( geometries.length > 1 && BufferGeometryUtils !== undefined ) {\n\n\t\t\t\t\t// Tries to merge geometries with BufferGeometryUtils if possible\n\n\t\t\t\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t// can't merge if draw mode is different\n\t\t\t\t\t\tif ( primitives[ 0 ].mode !== primitives[ i ].mode ) return geometries;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// See if we've already created this combined geometry\n\t\t\t\t\tvar cache = parser.multiplePrimitivesCache;\n\t\t\t\t\tvar cached = getCachedCombinedGeometry( cache, geometries );\n\n\t\t\t\t\tif ( cached ) {\n\n\t\t\t\t\t\tif ( cached.geometry !== null ) return [ cached.geometry ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar geometry = BufferGeometryUtils.mergeBufferGeometries( geometries, true );\n\n\t\t\t\t\t\tcache.push( { geometry: geometry, baseGeometries: geometries } );\n\n\t\t\t\t\t\tif ( geometry !== null ) return [ geometry ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn geometries;\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<THREE.Group|THREE.Mesh|THREE.SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar scope = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\tvar meshDef = this.json.meshes[ meshIndex ];\n\n\t\treturn this.getMultiDependencies( [\n\n\t\t\t'accessor',\n\t\t\t'material'\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar primitives = meshDef.primitives;\n\t\t\tvar originalMaterials = [];\n\n\t\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\t\toriginalMaterials[ i ] = primitives[ i ].material === undefined\n\t\t\t\t\t? createDefaultMaterial()\n\t\t\t\t\t: dependencies.materials[ primitives[ i ].material ];\n\n\t\t\t}\n\n\t\t\treturn scope.loadGeometries( primitives ).then( function ( geometries ) {\n\n\t\t\t\tvar isMultiMaterial = geometries.length === 1 && geometries[ 0 ].groups.length > 0;\n\n\t\t\t\tvar meshes = [];\n\n\t\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t\t// 1. create Mesh\n\n\t\t\t\t\tvar mesh;\n\n\t\t\t\t\tvar material = isMultiMaterial ? originalMaterials : originalMaterials[ i ];\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See .markDefs()\n\t\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t\t? new THREE.SkinnedMesh( geometry, material )\n\t\t\t\t\t\t\t: new THREE.Mesh( geometry, material );\n\n\t\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\t\tmesh.drawMode = THREE.TriangleStripDrawMode;\n\n\t\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\t\tmesh.drawMode = THREE.TriangleFanDrawMode;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\t\tmesh = new THREE.LineSegments( geometry, material );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\t\tmesh = new THREE.Line( geometry, material );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\t\tmesh = new THREE.LineLoop( geometry, material );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\t\tmesh = new THREE.Points( geometry, material );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\n\n\t\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\n\n\t\t\t\t\tif ( meshDef.extras !== undefined ) mesh.userData = meshDef.extras;\n\n\t\t\t\t\tmeshes.push( mesh );\n\n\t\t\t\t\t// 2. update Material depending on Mesh and BufferGeometry\n\n\t\t\t\t\tvar materials = isMultiMaterial ? mesh.material : [ mesh.material ];\n\n\t\t\t\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\t\t\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\t\t\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\t\t\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\t\t\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\t\t\t\tfor ( var j = 0, jl = materials.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar material = materials[ j ];\n\n\t\t\t\t\t\tif ( mesh.isPoints ) {\n\n\t\t\t\t\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\t\t\t\t\tvar pointsMaterial = scope.cache.get( cacheKey );\n\n\t\t\t\t\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\t\t\t\t\tpointsMaterial = new THREE.PointsMaterial();\n\t\t\t\t\t\t\t\tTHREE.Material.prototype.copy.call( pointsMaterial, material );\n\t\t\t\t\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\t\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\t\t\t\t\tpointsMaterial.lights = false; // PointsMaterial doesn't support lights yet\n\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaterial = pointsMaterial;\n\n\t\t\t\t\t\t} else if ( mesh.isLine ) {\n\n\t\t\t\t\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\t\t\t\t\tvar lineMaterial = scope.cache.get( cacheKey );\n\n\t\t\t\t\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\t\t\t\t\tlineMaterial = new THREE.LineBasicMaterial();\n\t\t\t\t\t\t\t\tTHREE.Material.prototype.copy.call( lineMaterial, material );\n\t\t\t\t\t\t\t\tlineMaterial.color.copy( material.color );\n\t\t\t\t\t\t\t\tlineMaterial.lights = false; // LineBasicMaterial doesn't support lights yet\n\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, lineMaterial );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaterial = lineMaterial;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Clone the material if it will be modified\n\t\t\t\t\t\tif ( useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\t\t\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\t\t\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\t\t\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\t\t\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\t\t\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\t\t\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\t\t\t\t\tvar cachedMaterial = scope.cache.get( cacheKey );\n\n\t\t\t\t\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\t\t\t\t\tcachedMaterial = material.isGLTFSpecularGlossinessMaterial\n\t\t\t\t\t\t\t\t\t? extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].cloneMaterial( material )\n\t\t\t\t\t\t\t\t\t: material.clone();\n\n\t\t\t\t\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\t\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = THREE.VertexColors;\n\t\t\t\t\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\t\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\t\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaterial = cachedMaterial;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterials[ j ] = material;\n\n\t\t\t\t\t\t// workarounds for mesh and geometry\n\n\t\t\t\t\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\t\t\t\t\tconsole.log( 'THREE.GLTFLoader: Duplicating UVs to support aoMap.' );\n\t\t\t\t\t\t\tgeometry.addAttribute( 'uv2', new THREE.BufferAttribute( geometry.attributes.uv.array, 2 ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\n\n\t\t\t\t\t\t\t// for GLTFSpecularGlossinessMaterial(ShaderMaterial) uniforms runtime update\n\t\t\t\t\t\t\tmesh.onBeforeRender = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].refreshUniforms;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmesh.material = isMultiMaterial ? materials : materials[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tvar group = new THREE.Group();\n\n\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn group;\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new THREE.PerspectiveCamera( THREE.Math.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new THREE.OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name !== undefined ) camera.name = cameraDef.name;\n\t\tif ( cameraDef.extras ) camera.userData = cameraDef.extras;\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<THREE.AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = this.json.animations[ animationIndex ];\n\n\t\treturn this.getMultiDependencies( [\n\n\t\t\t'accessor',\n\t\t\t'node'\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\n\t\t\t\tif ( sampler ) {\n\n\t\t\t\t\tvar target = channel.target;\n\t\t\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\t\t\tvar inputAccessor = dependencies.accessors[ input ];\n\t\t\t\t\tvar outputAccessor = dependencies.accessors[ output ];\n\n\t\t\t\t\tvar node = dependencies.nodes[ name ];\n\n\t\t\t\t\tif ( node ) {\n\n\t\t\t\t\t\tnode.updateMatrix();\n\t\t\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.NumberKeyframeTrack;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.QuaternionKeyframeTrack;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.VectorKeyframeTrack;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : THREE.InterpolateLinear;\n\n\t\t\t\t\t\tvar targetNames = [];\n\n\t\t\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t\t\t// node can be THREE.Group here but\n\t\t\t\t\t\t\t// PATH_PROPERTIES.weights(morphTargetInfluences) should be\n\t\t\t\t\t\t\t// the property of a mesh object under group.\n\n\t\t\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// KeyframeTrack.optimize() will modify given 'times' and 'values'\n\t\t\t\t\t\t// buffers before creating a truncated copy to keep. Because buffers may\n\t\t\t\t\t\t// be reused by other tracks, make copies here.\n\t\t\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( inputAccessor.array, 0 ),\n\t\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( outputAccessor.array, 0 ),\n\t\t\t\t\t\t\t\tinterpolation\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Here is the trick to enable custom interpolation.\n\t\t\t\t\t\t\t// Overrides .createInterpolant in a factory method which creates custom interpolation.\n\t\t\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t// Workaround, provide an alternate way to know if the interpolant type is cubis spline to track.\n\t\t\t\t\t\t\t\t// track.getInterpolation() doesn't return valid value for custom interpolant.\n\t\t\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new THREE.AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<THREE.Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\tvar meshReferences = this.json.meshReferences;\n\t\tvar meshUses = this.json.meshUses;\n\n\t\tvar nodeDef = this.json.nodes[ nodeIndex ];\n\n\t\treturn this.getMultiDependencies( [\n\n\t\t\t'mesh',\n\t\t\t'skin',\n\t\t\t'camera',\n\t\t\t'light'\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See .markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new THREE.Bone();\n\n\t\t\t} else if ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tvar mesh = dependencies.meshes[ nodeDef.mesh ];\n\n\t\t\t\tnode = mesh.clone();\n\n\t\t\t\t// for Specular-Glossiness\n\t\t\t\tif ( mesh.isGroup === true ) {\n\n\t\t\t\t\tfor ( var i = 0, il = mesh.children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = mesh.children[ i ];\n\n\t\t\t\t\t\tif ( child.material && child.material.isGLTFSpecularGlossinessMaterial === true ) {\n\n\t\t\t\t\t\t\tnode.children[ i ].onBeforeRender = child.onBeforeRender;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( mesh.material && mesh.material.isGLTFSpecularGlossinessMaterial === true ) {\n\n\t\t\t\t\t\tnode.onBeforeRender = mesh.onBeforeRender;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] > 1 ) {\n\n\t\t\t\t\tnode.name += '_instance_' + meshUses[ nodeDef.mesh ] ++;\n\n\t\t\t\t}\n\n\t\t\t} else if ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tnode = dependencies.cameras[ nodeDef.camera ];\n\n\t\t\t} else if ( nodeDef.extensions\n\t\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ]\n\t\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {\n\n\t\t\t\tvar lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;\n\t\t\t\tnode = lights[ nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new THREE.Object3D();\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name !== undefined ) {\n\n\t\t\t\tnode.name = THREE.PropertyBinding.sanitizeNodeName( nodeDef.name );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.extras ) node.userData = nodeDef.extras;\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new THREE.Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<THREE.Scene>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, allNodes, skins ) {\n\n\t\t\tvar node = allNodes[ nodeId ];\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\t// build skeleton here as well\n\n\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\tvar meshes = node.isGroup === true ? node.children : [ node ];\n\n\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar mesh = meshes[ i ];\n\t\t\t\t\tvar skinEntry = skins[ nodeDef.skin ];\n\n\t\t\t\t\tvar bones = [];\n\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\tfor ( var j = 0, jl = skinEntry.joints.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar jointId = skinEntry.joints[ j ];\n\t\t\t\t\t\tvar jointNode = allNodes[ jointId ];\n\n\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\tvar mat = new THREE.Matrix4();\n\n\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', jointId );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmesh.bind( new THREE.Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// build node hierachy\n\n\t\t\tparentObject.add( node );\n\n\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\tbuildNodeHierachy( child, node, json, allNodes, skins );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\n\t\t\treturn this.getMultiDependencies( [\n\n\t\t\t\t'node',\n\t\t\t\t'skin'\n\n\t\t\t] ).then( function ( dependencies ) {\n\n\t\t\t\tvar scene = new THREE.Scene();\n\t\t\t\tif ( sceneDef.name !== undefined ) scene.name = sceneDef.name;\n\n\t\t\t\tif ( sceneDef.extras ) scene.userData = sceneDef.extras;\n\n\t\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\t\tbuildNodeHierachy( nodeIds[ i ], scene, json, dependencies.nodes, dependencies.skins );\n\n\t\t\t\t}\n\n\t\t\t\t// Ambient lighting, if present, is always attached to the scene root.\n\t\t\t\tif ( sceneDef.extensions\n\t\t\t\t\t\t && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ]\n\t\t\t\t\t\t && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {\n\n\t\t\t\t\tvar lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;\n\t\t\t\t\tscene.add( lights[ sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\nexport { GLTFLoader }\n","<script>\n  import base from '../mixins/base-mixin.vue'\n  import {GLTFLoader} from \"../loaders\";\n\n  export default {\n    name: 'model-viewer',\n    mixins: [ base ],\n    data() {\n      return {\n        loader: new GLTFLoader()\n      }\n    },\n    methods: {\n      load() {\n        if ( !this.src ) return;\n        if ( this.object ) {\n          this.wrapper.remove( this.object );\n        }\n        this.loader.load( this.src, data => {\n          console.log(this.envMap, this.envMap.length);\n          if(this.envMap !== null){\n            data.scene.traverse( child => {\n              if(child.isMesh){\n                console.log(child);\n                child.material.envMap = this.envMap;\n              }\n            })\n          }\n          this.addObject( data.scene );\n          this.$emit( 'on-load' );\n        }, xhr => {\n          this.$emit( 'on-progress', xhr );\n        }, err => {\n          console.log( err );\n          this.$emit( 'on-error', err );\n        } );\n      }\n    }\n  }\n\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelViewer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelViewer.vue?vue&type=script&lang=js\"","<template>\n  <div id=\"app\">\n    <GithubCorner></GithubCorner>\n    <section class=\"section\">\n      <div class=\"container\">\n        <h1 class=\"title\">\n          Vue.JS 3D Model Viewer Example\n        </h1>\n      </div>\n    </section>\n\n    <section class=\"section\">\n      <div class=\"container\">\n        <ModelViewer\n          :lights=\"lights\"\n          :background-color=\"backgroundColor\"\n          :show-controls=\"true\"\n          :visible-controls=\"visibleControls\"\n          :src=\"src\"\n          :cubemap=\"cubemap\"\n        ></ModelViewer>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\n  import {Vector3} from 'three';\n\n  import GithubCorner from './components/GithubCorner.vue';\n\n  import ModelViewer from '../src/components/ModelViewer.vue'\n\n  export default {\n    name: 'app',\n    components: {\n      ModelViewer,\n      GithubCorner\n    },\n    data() {\n      return {\n        lights: [\n          {\n            type: 'hemisphere',\n            skyColor: 0xbbbbff,\n            groundColor: 0x444422,\n            position: new Vector3(0,1,0)\n          }/*,\n          {\n            type: 'AmbientLight',\n            color: 0xaaaaaa\n          },\n          {\n            type: 'DirectionalLight',\n            position: { x: 1, y: 1, z: 1 },\n            color: 0xffffff,\n            intensity: 0.8\n          }\n          ,{\n            type: 'ambient',\n            color: 0x1e1e23\n          },\n          {\n            type: 'directional',\n            color: 0xcfcfcf,\n            position: new Vector3(20, 40, -15)\n          }*/\n        ],\n        src: 'models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf',\n        backgroundColor: 0xffffff,\n        visibleControls: {help: true, fullscreen: true, download: true},\n        cubemap: [\n          'textures/cube/Bridge2/posx.jpg',\n          'textures/cube/Bridge2/negx.jpg',\n          'textures/cube/Bridge2/posy.jpg',\n          'textures/cube/Bridge2/negy.jpg',\n          'textures/cube/Bridge2/posz.jpg',\n          'textures/cube/Bridge2/negz.jpg',\n        ],\n      }\n    }\n  }\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7be236ed\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')\n"],"sourceRoot":""}
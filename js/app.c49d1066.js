(function(e){function t(t){for(var a,i,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)i=s[p],r[i]&&d.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={1:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push(["wx8R",0]),n()})({PsPl:function(e,t,n){},Qn13:function(e,t,n){"use strict";var a=n("PsPl"),r=n.n(a);r.a},"sgY/":function(e,t,n){"use strict";var a=n("zimB"),r=n.n(a);r.a},wx8R:function(e,t,n){"use strict";n.r(t);n("VRzm");var a=n("Kw5r"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("GithubCorner"),e._m(0),n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("ModelViewer",{attrs:{lights:e.lights,"background-color":e.backgroundColor,"show-controls":!0,"visible-controls":e.visibleControls,src:e.src,cubemap:e.cubemap}})],1)])],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"title"},[e._v("\n        Vue.JS 3D Model Viewer Example\n      ")])])])}],i=n("Womt"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"github-corner",attrs:{href:"https://github.com/XpycT/vue-3dmodel-viewer","aria-label":"View source on Github"}},[n("img",{attrs:{src:"https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png",alt:"Fork me on GitHub"}}),n("svg",{staticStyle:{fill:"#151513",color:"#fff",position:"absolute",top:"0",border:"0",right:"0","z-index":"20"},attrs:{width:"80",height:"80",viewBox:"0 0 250 250","aria-hidden":"true"}},[n("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),n("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),n("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])},l=[],c=(n("Qn13"),n("KHd+")),u={},p=Object(c["a"])(u,s,l,!1,null,"11f1e5bb",null),d=p.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.suportWebGL?n("div",{staticClass:"model-viewer"},[n("div",{staticClass:"overlays"},[n("div",{staticClass:"overlay help",class:e.showHelp?"":"hidden"},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:e.toggleHelp}},[n("i",{staticClass:"fas fa-times"})]),e._m(0)])]),n("div",{staticClass:"webgl"},[n("canvas",{ref:"canvas"}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showControls,expression:"showControls"}],staticClass:"gui enabled"},[n("div",{staticClass:"controls"},[n("div",{staticClass:"general-controls"},[n("a",{directives:[{name:"show",rawName:"v-show",value:e.visibleControls.help,expression:"visibleControls.help"}],staticClass:"control tooltip",attrs:{"data-tooltip":"Help"},on:{click:e.toggleHelp}},[n("i",{staticClass:"fas fa-question"})]),n("a",{directives:[{name:"show",rawName:"v-show",value:e.visibleControls.download,expression:"visibleControls.download"}],staticClass:"control tooltip",attrs:{"data-tooltip":"Download"},on:{click:e.downloadModel}},[n("i",{staticClass:"fas fa-download"})]),n("a",{directives:[{name:"show",rawName:"v-show",value:e.visibleControls.fullscreen,expression:"visibleControls.fullscreen"}],staticClass:"control tooltip tooltip-right-bound",attrs:{"data-tooltip":"Fullscreen"},on:{click:e.toggleFullscreen}},[n("i",{staticClass:"fas",class:e.fullscreen?"fa-compress":"fa-expand-arrows-alt"})])])])])])]):n("div",[e._t("error",[e._v("\n    Your graphics card does not seem to support\n    "),n("a",{staticStyle:{color:"#000"},attrs:{href:"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation"}},[e._v("WebGL")]),e._v("."),n("br"),e._v("\n    Find out how to get it "),n("a",{staticStyle:{color:"#000"},attrs:{href:"http://get.webgl.org/"}},[e._v("here")]),e._v(".\n  ")])],2)},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"inner"},[n("div",{staticClass:"tip"},[n("div",[n("i",{staticClass:"fas fa-sync-alt"})]),n("div",[n("b",[e._v("Orbit around")]),n("div",[e._v("Left mouse + drag or"),n("br"),e._v("One finger drag (touch)")])])]),n("div",{staticClass:"tip"},[n("div",[n("i",{staticClass:"fas fa-search-plus"})]),n("div",[n("b",[e._v("Zoom")]),n("div",[e._v("Middle mouse or mousewheel"),n("br"),e._v("Two-finger spread or squish (touch)")])])]),n("div",{staticClass:"tip"},[n("div",[n("i",{staticClass:"fas fa-arrows-alt"})]),n("div",[n("b",[e._v("Pan")]),n("div",[e._v("Right mouse + drag or arraow keys"),n("br"),e._v("Two fingers drag (touch)")])])])])}],f=(n("rGqo"),n("xfY5"),n("yt8O"),n("Zz4T"),function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new i["ac"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:i["U"].LEFT,ZOOM:i["U"].MIDDLE,PAN:i["U"].RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),l=s.NONE},this.update=function(){var t=new i["ac"],r=(new i["vb"]).setFromUnitVectors(e.up,new i["ac"](0,1,0)),o=r.clone().inverse(),f=new i["ac"],v=new i["vb"];return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(r),u.setFromVector3(t),n.autoRotate&&l===s.NONE&&R(M()),u.theta+=p.theta,u.phi+=p.phi,u.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=d,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),n.target.add(h),t.setFromSpherical(u),t.applyQuaternion(o),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(p.theta*=1-n.dampingFactor,p.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(p.set(0,0,0),h.set(0,0,0)),d=1,!!(m||f.distanceToSquared(n.object.position)>c||8*(1-v.dot(n.object.quaternion))>c)&&(n.dispatchEvent(a),f.copy(n.object.position),v.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",te,!1),n.domElement.removeEventListener("mousedown",Y,!1),n.domElement.removeEventListener("wheel",$,!1),n.domElement.removeEventListener("touchstart",J,!1),n.domElement.removeEventListener("touchend",ee,!1),n.domElement.removeEventListener("touchmove",Q,!1),document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",W,!1),window.removeEventListener("keydown",q,!1)};var n=this,a={type:"change"},r={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},l=s.NONE,c=1e-6,u=new i["Kb"],p=new i["Kb"],d=1,h=new i["ac"],m=!1,f=new i["Zb"],v=new i["Zb"],g=new i["Zb"],b=new i["Zb"],y=new i["Zb"],w=new i["Zb"],E=new i["Zb"],T=new i["Zb"],S=new i["Zb"];function M(){return 2*Math.PI/60/60*n.autoRotateSpeed}function x(){return Math.pow(.95,n.zoomSpeed)}function R(e){p.theta-=e}function A(e){p.phi-=e}var L=function(){var e=new i["ac"];return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),C=function(){var e=new i["ac"];return function(t,a){!0===n.screenSpacePanning?e.setFromMatrixColumn(a,1):(e.setFromMatrixColumn(a,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),_=function(){var e=new i["ac"];return function(t,a){var r=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var o=n.object.position;e.copy(o).sub(n.target);var i=e.length();i*=Math.tan(n.object.fov/2*Math.PI/180),L(2*t*i/r.clientHeight,n.object.matrix),C(2*a*i/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(L(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),C(a*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function O(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){f.set(e.clientX,e.clientY)}function j(e){E.set(e.clientX,e.clientY)}function D(e){b.set(e.clientX,e.clientY)}function N(e){v.set(e.clientX,e.clientY),g.subVectors(v,f).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;R(2*Math.PI*g.x/t.clientHeight),A(2*Math.PI*g.y/t.clientHeight),f.copy(v),n.update()}function H(e){T.set(e.clientX,e.clientY),S.subVectors(T,E),S.y>0?O(x()):S.y<0&&P(x()),E.copy(T),n.update()}function k(e){y.set(e.clientX,e.clientY),w.subVectors(y,b).multiplyScalar(n.panSpeed),_(w.x,w.y),b.copy(y),n.update()}function F(e){}function G(e){e.deltaY<0?P(x()):e.deltaY>0&&O(x()),n.update()}function U(e){switch(e.keyCode){case n.keys.UP:_(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:_(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:_(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:_(-n.keyPanSpeed,0),n.update();break}}function z(e){f.set(e.touches[0].pageX,e.touches[0].pageY)}function B(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+a*a);E.set(0,r)}if(n.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(o,i)}}function K(e){v.set(e.touches[0].pageX,e.touches[0].pageY),g.subVectors(v,f).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;R(2*Math.PI*g.x/t.clientHeight),A(2*Math.PI*g.y/t.clientHeight),f.copy(v),n.update()}function V(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+a*a);T.set(0,r),S.set(0,Math.pow(T.y/E.y,n.zoomSpeed)),O(S.y),E.copy(T)}if(n.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(o,i),w.subVectors(y,b).multiplyScalar(n.panSpeed),_(w.x,w.y),b.copy(y)}n.update()}function Z(e){}function Y(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.ORBIT:if(!1===n.enableRotate)return;I(e),l=s.ROTATE;break;case n.mouseButtons.ZOOM:if(!1===n.enableZoom)return;j(e),l=s.DOLLY;break;case n.mouseButtons.PAN:if(!1===n.enablePan)return;D(e),l=s.PAN;break}l!==s.NONE&&(document.addEventListener("mousemove",X,!1),document.addEventListener("mouseup",W,!1),n.dispatchEvent(r))}}function X(e){if(!1!==n.enabled)switch(e.preventDefault(),l){case s.ROTATE:if(!1===n.enableRotate)return;N(e);break;case s.DOLLY:if(!1===n.enableZoom)return;H(e);break;case s.PAN:if(!1===n.enablePan)return;k(e);break}}function W(e){!1!==n.enabled&&(F(e),document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",W,!1),n.dispatchEvent(o),l=s.NONE)}function $(e){!1===n.enabled||!1===n.enableZoom||l!==s.NONE&&l!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(r),G(e),n.dispatchEvent(o))}function q(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&U(e)}function J(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enableRotate)return;z(e),l=s.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;B(e),l=s.TOUCH_DOLLY_PAN;break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(r)}}function Q(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enableRotate)return;if(l!==s.TOUCH_ROTATE)return;K(e);break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;if(l!==s.TOUCH_DOLLY_PAN)return;V(e);break;default:l=s.NONE}}function ee(e){!1!==n.enabled&&(Z(e),n.dispatchEvent(o),l=s.NONE)}function te(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",te,!1),n.domElement.addEventListener("mousedown",Y,!1),n.domElement.addEventListener("wheel",$,!1),n.domElement.addEventListener("touchstart",J,!1),n.domElement.addEventListener("touchend",ee,!1),n.domElement.addEventListener("touchmove",Q,!1),window.addEventListener("keydown",q,!1),this.update()});f.prototype=Object.create(i["v"].prototype),f.prototype.constructor=f,Object.defineProperties(f.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});n("f3/d"),n("RW0V"),n("T39b"),n("Y9lz");var v={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var a=t.array,r=n.position.array,o=n.normal.array,s=n.uv.array,l=r.length/3;void 0===n.tangent&&e.addAttribute("tangent",new i["j"](new Float32Array(4*l),4));for(var c=n.tangent.array,u=[],p=[],d=0;d<l;d++)u[d]=new i["ac"],p[d]=new i["ac"];var h=new i["ac"],m=new i["ac"],f=new i["ac"],v=new i["Zb"],g=new i["Zb"],b=new i["Zb"],y=new i["ac"],w=new i["ac"],E=e.groups;0===E.length&&(E=[{start:0,count:a.length}]);for(var T=0,S=E.length;T<S;++T)for(var M=E[T],x=M.start,R=M.count,A=x,L=x+R;A<L;A+=3)B(a[A+0],a[A+1],a[A+2]);for(var C,_,O,P=new i["ac"],I=new i["ac"],j=new i["ac"],D=new i["ac"],N=0,H=E.length;N<H;++N)for(var k=E[N],F=k.start,G=k.count,U=F,z=F+G;U<z;U+=3)K(a[U+0]),K(a[U+1]),K(a[U+2])}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function B(e,t,n){h.fromArray(r,3*e),m.fromArray(r,3*t),f.fromArray(r,3*n),v.fromArray(s,2*e),g.fromArray(s,2*t),b.fromArray(s,2*n);var a=m.x-h.x,o=f.x-h.x,i=m.y-h.y,l=f.y-h.y,c=m.z-h.z,d=f.z-h.z,E=g.x-v.x,T=b.x-v.x,S=g.y-v.y,M=b.y-v.y,x=1/(E*M-T*S);y.set((M*a-S*o)*x,(M*i-S*l)*x,(M*c-S*d)*x),w.set((E*o-T*a)*x,(E*l-T*i)*x,(E*d-T*c)*x),u[e].add(y),u[t].add(y),u[n].add(y),p[e].add(w),p[t].add(w),p[n].add(w)}function K(e){j.fromArray(o,3*e),D.copy(j),_=u[e],P.copy(_),P.sub(j.multiplyScalar(j.dot(_))).normalize(),I.crossVectors(D,_),O=I.dot(p[e]),C=O<0?-1:1,c[4*e]=P.x,c[4*e+1]=P.y,c[4*e+2]=P.z,c[4*e+3]=C}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,a=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),o={},s={},l=new i["k"],c=0,u=0;u<e.length;++u){var p=e[u];if(n!==(null!==p.index))return null;for(var d in p.attributes){if(!a.has(d))return null;void 0===o[d]&&(o[d]=[]),o[d].push(p.attributes[d])}for(var h in p.morphAttributes){if(!r.has(h))return null;void 0===s[h]&&(s[h]=[]),s[h].push(p.morphAttributes[h])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(p.userData),t){var m;if(n)m=p.index.count;else{if(void 0===p.attributes.position)return null;m=p.attributes.position.count}l.addGroup(c,m,u),c+=m}}if(n){for(var f=0,v=[],g=0;g<e.length;++g){for(var b=e[g].index,y=0;y<b.count;++y)v.push(b.getX(y)+f);f+=e[g].attributes.position.count}l.setIndex(v)}for(var w in o){var E=this.mergeBufferAttributes(o[w]);if(!E)return null;l.addAttribute(w,E)}for(var T in s){var S=s[T][0].length;if(0===S)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[T]=[];for(var M=0;M<S;++M){for(var x=[],R=0;R<s[T].length;++R)x.push(s[T][R][M]);var A=this.mergeBufferAttributes(x);if(!A)return null;l.morphAttributes[T].push(A)}}return l},mergeBufferAttributes:function(e){for(var t,n,a,r=0,o=0;o<e.length;++o){var s=e[o];if(s.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return null;if(void 0===a&&(a=s.normalized),a!==s.normalized)return null;r+=s.array.length}for(var l=new t(r),c=0,u=0;u<e.length;++u)l.set(e[u].array,c),c+=e[u].array.length;return new i["j"](l,n,a)}},g=new i["i"];function b(e){return g.setFromObject(e),g.getCenter(new i["ac"])}var y=n("k7+O"),w=function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),E={props:{src:{type:String},modelType:{type:String},position:{type:Object,default:function(){return{x:0,y:0,z:0}}},rotation:{type:Object,default:function(){return{x:0,y:0,z:0}}},scale:{type:Object,default:function(){return{x:1,y:1,z:1}}},lights:{type:Array,default:function(){return[{type:"ambient",color:1973795},{type:"directional",color:13619151,position:new i["ac"](20,40,-15)}]}},backgroundColor:{default:4473924},backgroundAlpha:{type:Number,default:1},cameraPosition:{type:Object},cameraRotation:{type:Object},cameraUp:{type:Object},cameraLookAt:{type:Object},showControls:{type:Boolean,default:!0},visibleControls:{type:Object,default:function(){return{help:!0,download:!0,fullscreen:!0}}},controllable:{type:Boolean,default:!0},cubemap:{type:Array,default:function(){return[]}}},data:function(){return{suportWebGL:w,fullscreen:!1,showHelp:!1,size:{width:this.width,height:this.height},initSize:{width:0,height:0},object:null,wrapper:new i["jb"],camera:new i["qb"](45,1,.01,1e5),scene:new i["Fb"],renderer:null,controls:null,allLights:[],envMap:null,loader:null,reqId:null}},mounted:function(){void 0!==this.width&&void 0!==this.height||(this.size={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),this.initSize=this.size,this.renderer=new i["ec"]({antialias:!0,alpha:!0,canvas:this.$refs.canvas}),this.renderer.shadowMap.enabled=!1,this.renderer.gammaOutput=!1,this.scene.add(this.wrapper),this.load(),this.update(),window.addEventListener("keydown",this.onKeydown,!1),window.addEventListener("resize",this.onResize,!1),this.animate()},beforeDestroy:function(){cancelAnimationFrame(this.reqId),window.removeEventListener("keydown",this.onKeydown,!1),window.removeEventListener("resize",this.onResize,!1)},watch:{src:function(){this.load()},rotation:{deep:!0,handler:function(e){this.object&&this.object.rotation.set(e.x,e.y,e.z)}},position:{deep:!0,handler:function(e){this.object&&this.object.position.set(e.x,e.y,e.z)}},scale:{deep:!0,handler:function(e){this.object&&this.object.scale.set(e.x,e.y,e.z)}},lights:{deep:!0,handler:function(){this.updateLights()}},cubemap:{deep:!0,handler:function(){this.updateCubemaps()}},size:{deep:!0,handler:function(){this.updateCamera(),this.updateRenderer()}},controllable:function(){this.updateControls()},backgroundAlpha:function(){this.updateRenderer()},backgroundColor:function(){this.updateRenderer()}},computed:{},methods:{onKeydown:function(e){console.log(e.which),32===e.which&&this.resetCameraView()},onResize:function(){var e=this;void 0!==this.width&&void 0!==this.height||this.$nextTick(function(){e.size={width:e.$el.offsetWidth,height:e.$el.offsetHeight}})},update:function(){this.updateRenderer(),this.updateCubemaps(),this.updateCamera(),this.updateLights(),this.updateControls()},updateModel:function(){var e=this.object;if(e){var t=this.position,n=this.rotation,a=this.scale;e.position.set(t.x,t.y,t.z),e.rotation.set(n.x,n.y,n.z),e.scale.set(a.x,a.y,a.z)}},updateRenderer:function(){var e=this.renderer;e.setSize(this.size.width,this.size.height),e.setPixelRatio(window.devicePixelRatio||1),e.setClearColor(new i["m"](this.backgroundColor).getHex()),e.setClearAlpha(this.backgroundAlpha)},updateCubemaps:function(){0!==this.cubemap.length&&(this.envMap=(new i["o"]).load(this.cubemap),this.scene.background=this.envMap)},updateCamera:function(){var e=this.camera;e.aspect=this.size.width/this.size.height,e.updateProjectionMatrix(),this.cameraLookAt||this.cameraPosition||this.cameraRotation||this.cameraUp?(e.position.set(this.cameraPosition.x,this.cameraPosition.y,this.cameraPosition.z),e.rotation.set(this.cameraRotation.x,this.cameraRotation.y,this.cameraRotation.z),e.up.set(this.cameraUp.x,this.cameraUp.y,this.cameraUp.z),e.lookAt(new i["ac"](this.cameraLookAt.x,this.cameraLookAt.y,this.cameraLookAt.z))):(e.position.set(1,1,-2),e.position.z=5,e.lookAt(new i["ac"]))},updateLights:function(){var e=this;this.scene.remove.apply(this.scene,this.allLights),this.allLights=[],this.lights.forEach(function(t){if(t.type){var n=t.type.toLowerCase(),a=null;if("ambient"===n||"ambientlight"===n){var r=t.color||4210752,o=t.intensity||1;a=new i["d"](r,o)}else if("point"===n||"pointlight"===n){var s=t.color||16777215,l=t.intensity||1,c=t.distance||0,u=t.decay||1;a=new i["rb"](s,l,c,u),t.position&&a.position.copy(t.position)}else if("directional"===n||"directionallight"===n){var p=t.color||16777215,d=t.intensity||1;a=new i["q"](p,d),t.position&&a.position.copy(t.position),t.target&&a.target.copy(t.target)}else if("hemisphere"===n||"hemispherelight"===n){var h=t.skyColor||16777215,m=t.groundColor||16777215,f=t.intensity||1;a=new i["A"](h,m,f),t.position&&a.position.copy(t.position)}e.allLights.push(a),e.scene.add(a)}})},updateControls:function(){if(!this.controllable||!this.controls)if(this.controllable){if(this.controls)return;this.controls=new f(this.camera,this.$el),this.controls.type="orbit",this.controls.update()}else this.controls&&(this.controls.dispose(),this.controls=null)},animate:function(){this.reqId=requestAnimationFrame(this.animate),this.controls.update(),this.render()},render:function(){this.renderer.render(this.scene,this.camera)},toggleFullscreen:function(){var e=this;y["enabled"]&&(y["toggle"](this.$el),y["on"]("change",function(){e.fullscreen=y["isFullscreen"],y["isFullscreen"]||(e.size=e.initSize),e.updateCamera(),e.updateRenderer()}))},resetCameraView:function(){this.controls.reset()},toggleHelp:function(){this.showHelp=!this.showHelp},downloadModel:function(){},load:function(){var e=this;this.src&&(this.object&&this.wrapper.remove(this.object),this.loader.load(this.src,function(){var t=e.getObject.apply(e,arguments);e.process&&e.process(t),e.addObject(t),e.$emit("on-load")},function(t){e.$emit("on-progress",t),console.log(t.loaded/t.total*100+"% loaded")},function(t){e.$emit("on-error",t),console.log("on-error",t)}))},getObject:function(e){return e},addObject:function(e){var t=b(e);this.wrapper.position.copy(t.negate()),this.object=e,this.wrapper.add(e),this.updateCamera(),this.updateModel()}}},T=E,S=(n("sgY/"),Object(c["a"])(T,h,m,!1,null,"79437372",null)),M=S.exports,x=(n("tuSo"),n("NO8f"),function e(t){i["n"].call(this,t),this._parser=e.parse});x.prototype=Object.create(i["n"].prototype),x.prototype.constructor=x,x.parse=function(e,t){var n={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},a=542327876,r=131072,o=512,s=1024,l=2048,c=4096,u=8192,p=16384,d=32768,h=4;function m(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function f(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}function v(e,t,n,a){for(var r=n*a*4,o=new Uint8Array(e,t,r),i=new Uint8Array(r),s=0,l=0,c=0;c<a;c++)for(var u=0;u<n;u++){var p=o[l];l++;var d=o[l];l++;var h=o[l];l++;var m=o[l];l++,i[s]=h,s++,i[s]=d,s++,i[s]=p,s++,i[s]=m,s++}return i}var g,b=m("DXT1"),y=m("DXT3"),w=m("DXT5"),E=m("ETC1"),T=31,S=0,M=1,x=2,R=3,A=4,L=7,C=20,_=21,O=22,P=23,I=24,j=25,D=26,N=28,H=new Int32Array(e,0,T);if(H[S]!==a)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),n;if(!H[C]&h)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),n;var k=H[_],F=!1;switch(k){case b:g=8,n.format=i["Cb"];break;case y:g=16,n.format=i["yb"];break;case w:g=16,n.format=i["zb"];break;case E:g=8,n.format=i["Bb"];break;default:if(!(32===H[O]&&16711680&H[P]&&65280&H[I]&&255&H[j]&&4278190080&H[D]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",f(k)),n;F=!0,g=64,n.format=i["xb"]}n.mipmapCount=1,H[x]&r&&!1!==t&&(n.mipmapCount=Math.max(1,H[L]));var G=H[N];if(n.isCubemap=!!(G&o),n.isCubemap&&(!(G&s)||!(G&l)||!(G&c)||!(G&u)||!(G&p)||!(G&d)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),n;n.width=H[A],n.height=H[R];for(var U=H[M]+4,z=n.isCubemap?6:1,B=0;B<z;B++)for(var K=n.width,V=n.height,Z=0;Z<n.mipmapCount;Z++){if(F)var Y=v(e,U,K,V),X=Y.length;else X=Math.max(4,K)/4*Math.max(4,V)/4*g,Y=new Uint8Array(e,U,X);var W={data:Y,width:K,height:V};n.mipmaps.push(W),U+=X,K=Math.max(K>>1,1),V=Math.max(V>>1,1)}return n};n("nCnK"),n("r1bV"),n("Faw5"),n("sFw1"),n("pIFo");var R,A,L=function(){function e(e){this.manager=void 0!==e?e:i["p"],this.dracoLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,n,a){var r=this,o=void 0!==this.path?this.path:i["R"].extractUrlBase(e),s=new i["w"](r.manager);s.setResponseType("arraybuffer"),s.load(e,function(e){try{r.parse(e,o,t,a)}catch(e){if(void 0===a)throw e;a(e)}},n,a)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,t,l,c){var h,m={};if("string"===typeof e)h=e;else{var f=i["R"].decodeText(new Uint8Array(e,0,4));if(f===s){try{m[n.KHR_BINARY_GLTF]=new u(e)}catch(e){return void(c&&c(e))}h=m[n.KHR_BINARY_GLTF].content}else h=i["R"].decodeText(new Uint8Array(e))}var v=JSON.parse(h);if(void 0===v.asset||v.asset.version[0]<2)c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(v.extensionsUsed)for(var g=0;g<v.extensionsUsed.length;++g){var b=v.extensionsUsed[g],y=v.extensionsRequired||[];switch(b){case n.KHR_LIGHTS:m[b]=new r(v);break;case n.KHR_MATERIALS_UNLIT:m[b]=new o(v);break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[b]=new d;break;case n.KHR_DRACO_MESH_COMPRESSION:m[b]=new p(v,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:m[n.MSFT_TEXTURE_DDS]=new a;break;default:y.indexOf(b)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}var w=new G(v,m,{path:t||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager});w.parse(function(e,t,n,a,r){var o={scene:e,scenes:t,cameras:n,animations:a,asset:r.asset,parser:w,userData:{}};C(m,o,r),l(o)},c)}}};var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function a(){if(!x)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=new x}function r(e){this.name=n.KHR_LIGHTS,this.lights={};var t=e.extensions&&e.extensions[n.KHR_LIGHTS]||{},a=t.lights||{};for(var r in a){var o,s=a[r],l=(new i["m"]).fromArray(s.color);switch(s.type){case"directional":o=new i["q"](l),o.target.position.set(0,0,1),o.add(o.target);break;case"point":o=new i["rb"](l);break;case"spot":o=new i["Lb"](l),s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,1),o.add(o.target);break;case"ambient":o=new i["d"](l);break}o&&(o.decay=2,void 0!==s.intensity&&(o.intensity=s.intensity),o.name=s.name||"light_"+r,this.lights[r]=o)}}function o(e){this.name=n.KHR_MATERIALS_UNLIT}o.prototype.getMaterialType=function(e){return i["ab"]},o.prototype.extendParams=function(e,t,n){var a=[];e.color=new i["m"](1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var o=r.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==r.baseColorTexture&&a.push(n.assignTexture(e,"map",r.baseColorTexture.index))}return Promise.all(a)};var s="glTF",l=12,c={JSON:1313821514,BIN:5130562};function u(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,l);if(this.header={magic:i["R"].decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");var a=new DataView(e,l),r=0;while(r<a.byteLength){var o=a.getUint32(r,!0);r+=4;var u=a.getUint32(r,!0);if(r+=4,u===c.JSON){var p=new Uint8Array(e,l+r,o);this.content=i["R"].decodeText(p)}else if(u===c.BIN){var d=l+r;this.body=e.slice(d,d+o)}r+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function p(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function d(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return i["Hb"]},extendParams:function(e,t,n){var a=t.extensions[this.name],r=i["Gb"]["standard"],o=i["Ub"].clone(r.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),l=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),p=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),d=r.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",l).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",p);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new i["m"]).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},e.vertexShader=r.vertexShader,e.fragmentShader=d,e.uniforms=o,e.defines={STANDARD:""},e.color=new i["m"](1,1,1),e.opacity=1;var h=[];if(Array.isArray(a.diffuseFactor)){var m=a.diffuseFactor;e.color.fromArray(m),e.opacity=m[3]}if(void 0!==a.diffuseTexture&&h.push(n.assignTexture(e,"map",a.diffuseTexture.index)),e.emissive=new i["m"](0,0,0),e.glossiness=void 0!==a.glossinessFactor?a.glossinessFactor:1,e.specular=new i["m"](1,1,1),Array.isArray(a.specularFactor)&&e.specular.fromArray(a.specularFactor),void 0!==a.specularGlossinessTexture){var f=a.specularGlossinessTexture.index;h.push(n.assignTexture(e,"glossinessMap",f)),h.push(n.assignTexture(e,"specularMap",f))}return Promise.all(h)},createMaterial:function(e){var t=new i["Hb"]({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,a=0,r=n.length;a<r;a++)t[n[a]]=e[n[a]];return t},refreshUniforms:function(e,t,n,a,r,o){if(!0===r.isGLTFSpecularGlossinessMaterial){var i,s=r.uniforms,l=r.defines;s.opacity.value=r.opacity,s.diffuse.value.copy(r.color),s.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),s.map.value=r.map,s.specularMap.value=r.specularMap,s.alphaMap.value=r.alphaMap,s.lightMap.value=r.lightMap,s.lightMapIntensity.value=r.lightMapIntensity,s.aoMap.value=r.aoMap,s.aoMapIntensity.value=r.aoMapIntensity,r.map?i=r.map:r.specularMap?i=r.specularMap:r.displacementMap?i=r.displacementMap:r.normalMap?i=r.normalMap:r.bumpMap?i=r.bumpMap:r.glossinessMap?i=r.glossinessMap:r.alphaMap?i=r.alphaMap:r.emissiveMap&&(i=r.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),s.uvTransform.value.copy(i.matrix)),s.envMap.value=r.envMap,s.envMapIntensity.value=r.envMapIntensity,s.flipEnvMap.value=r.envMap&&r.envMap.isCubeTexture?-1:1,s.refractionRatio.value=r.refractionRatio,s.specular.value.copy(r.specular),s.glossiness.value=r.glossiness,s.glossinessMap.value=r.glossinessMap,s.emissiveMap.value=r.emissiveMap,s.bumpMap.value=r.bumpMap,s.normalMap.value=r.normalMap,s.displacementMap.value=r.displacementMap,s.displacementScale.value=r.displacementScale,s.displacementBias.value=r.displacementBias,null!==s.glossinessMap.value&&void 0===l.USE_GLOSSINESSMAP&&(l.USE_GLOSSINESSMAP="",l.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==l.USE_GLOSSINESSMAP&&(delete l.USE_GLOSSINESSMAP,delete l.USE_ROUGHNESSMAP)}}}}function h(e,t,n,a){i["D"].call(this,e,t,n,a)}p.prototype.decodePrimitive=function(e,t){var n=this.json,a=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,i={},s={},l={};for(var c in o)c in T&&(i[T[c]]=o[c]);for(c in e.attributes)if(void 0!==T[c]&&void 0!==o[c]){var u=n.accessors[e.attributes[c]],p=f[u.componentType];l[T[c]]=p,s[T[c]]=!0===u.normalized}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t){a.decodeDracoFile(e,function(e){for(var n in e.attributes){var a=e.attributes[n],r=s[n];void 0!==r&&(a.normalized=r)}t(e)},i,l)})})},h.prototype=Object.create(i["D"].prototype),h.prototype.constructor=h,h.prototype.interpolate_=function(e,t,n,a){for(var r=this.resultBuffer,o=this.sampleValues,i=this.valueSize,s=2*i,l=3*i,c=a-t,u=(n-t)/c,p=u*u,d=p*u,h=e*l,m=h-l,f=2*d-3*p+1,v=d-2*p+u,g=-2*d+3*p,b=d-p,y=0;y!==i;y++){var w=o[m+y+i],E=o[m+y+s]*c,T=o[h+y+i],S=o[h+y]*c;r[y]=f*w+v*E+g*T+b*S}return r};var m={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},f=(Number,i["X"],i["Y"],i["Zb"],i["ac"],i["bc"],i["Qb"],{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),g={9728:i["db"],9729:i["N"],9984:i["fb"],9985:i["P"],9986:i["eb"],9987:i["O"]},b={33071:i["l"],33648:i["cb"],10497:i["Db"]},y={6406:i["b"],6407:i["Ab"],6408:i["xb"],6409:i["T"],6410:i["S"]},w={5121:i["Vb"],32819:i["Wb"],32820:i["Xb"],33635:i["Yb"]},E=(i["g"],i["x"],i["gb"],i["H"],i["u"],i["I"],i["y"],i["hb"],i["y"],i["c"],i["a"],i["Pb"],i["Eb"],i["fc"],i["kb"],i["Ob"],i["ob"],i["Mb"],i["nb"],i["s"],i["lb"],i["t"],i["mb"],i["Nb"],{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),T={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},S={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},M={CUBICSPLINE:i["G"],LINEAR:i["F"],STEP:i["E"]},R={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function A(e,t){return"string"!==typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function L(){return new i["bb"]({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i["x"]})}function C(e,t,n){for(var a in n.extensions)void 0===e[a]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[a]=n.extensions[a])}function _(e,t,n){for(var a=!1,r=!1,o=0,i=t.length;o<i;o++){var s=t[o];if(void 0!==s.POSITION&&(a=!0),void 0!==s.NORMAL&&(r=!0),a&&r)break}if(a||r){var l=[],c=[];for(o=0,i=t.length;o<i;o++){s=t[o];var u="morphTarget"+o;if(a){if(void 0!==s.POSITION){var p=k(n[s.POSITION]);p.name=u;for(var d=e.attributes.position,h=0,m=p.count;h<m;h++)p.setXYZ(h,p.getX(h)+d.getX(h),p.getY(h)+d.getY(h),p.getZ(h)+d.getZ(h))}else p=e.attributes.position;l.push(p)}if(r){if(void 0!==s.NORMAL){var f=k(n[s.NORMAL]);f.name=u;var v=e.attributes.normal;for(h=0,m=f.count;h<m;h++)f.setXYZ(h,f.getX(h)+v.getX(h),f.getY(h)+v.getY(h),f.getZ(h)+v.getZ(h))}else f=e.attributes.normal;c.push(f)}}a&&(e.morphAttributes.position=l),r&&(e.morphAttributes.normal=c)}}function O(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,a=t.weights.length;n<a;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(n=0,a=r.length;n<a;n++)e.morphTargetDictionary[r[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function P(e,t){return e.indices===t.indices&&I(e.attributes,t.attributes)}function I(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function j(e,t){if(e.length!==t.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==t[n])return!1;return!0}function D(e,t){for(var n=0,a=e.length;n<a;n++){var r=e[n];if(P(r.primitive,t))return r.promise}return null}function N(e,t){for(var n=0,a=e.length;n<a;n++){var r=e[n];if(j(t,r.baseGeometries))return r.geometry}return null}function H(e,t,n){for(var a=0,r=e.length;a<r;a++){var o=e[a];if(t===o.baseGeometry&&j(n,o.primitives))return o.geometry}return null}function k(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,a=e.array.slice(0,t*n),r=0;r<t;++r)a[r]=e.getX(r),n>=2&&(a[r+1]=e.getY(r)),n>=3&&(a[r+2]=e.getZ(r)),n>=4&&(a[r+3]=e.getW(r));return new i["j"](a,n,e.normalized)}return e.clone()}function F(e){if(e.length<2)return!1;var t=e[0],n=t.targets||[];if(void 0===t.indices)return!1;for(var a=1,r=e.length;a<r;a++){var o=e[a];if(t.mode!==o.mode)return!1;if(void 0===o.indices)return!1;if(!I(t.attributes,o.attributes))return!1;var i=o.targets||[];if(n.length!==i.length)return!1;for(var s=0,l=n.length;s<l;s++)if(!I(n[s],i[s]))return!1}return!0}function G(e,n,a){this.json=e||{},this.extensions=n||{},this.options=a||{},this.cache=new t,this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new i["Rb"](this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new i["w"](this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function U(e,t,n){var a=t.attributes;for(var r in a){var o=T[r],i=n[a[r]];o&&(o in e.attributes||e.addAttribute(o,i))}void 0===t.indices||e.index||e.setIndex(n[t.indices]),void 0!==t.targets&&_(e,t.targets,n),void 0!==t.extras&&(e.userData=t.extras)}return G.prototype.parse=function(e,t){var n=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(t){var a=t.scenes||[],r=a[n.scene||0],o=t.animations||[],i=t.cameras||[];e(r,a,i,o,n)}).catch(t)},G.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],a={},r={},o=0,i=t.length;o<i;o++)for(var s=t[o].joints,l=0,c=s.length;l<c;l++)e[s[l]].isBone=!0;for(var u=0,p=e.length;u<p;u++){var d=e[u];void 0!==d.mesh&&(void 0===a[d.mesh]&&(a[d.mesh]=r[d.mesh]=0),a[d.mesh]++,void 0!==d.skin&&(n[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=a,this.json.meshUses=r},G.prototype.getDependency=function(e,t){var n=e+":"+t,a=this.cache.get(n);if(!a){switch(e){case"scene":a=this.loadScene(t);break;case"node":a=this.loadNode(t);break;case"mesh":a=this.loadMesh(t);break;case"accessor":a=this.loadAccessor(t);break;case"bufferView":a=this.loadBufferView(t);break;case"buffer":a=this.loadBuffer(t);break;case"material":a=this.loadMaterial(t);break;case"texture":a=this.loadTexture(t);break;case"skin":a=this.loadSkin(t);break;case"animation":a=this.loadAnimation(t);break;case"camera":a=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,a)}return a},G.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,a=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(a.map(function(t,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t},G.prototype.getMultiDependencies=function(e){for(var t={},n=[],a=0,r=e.length;a<r;a++){var o=e[a],i=this.getDependencies(o);i=i.then(function(e,n){t[e]=n}.bind(this,o+("mesh"===o?"es":"s"))),n.push(i)}return Promise.all(n).then(function(){return t})},G.prototype.loadBuffer=function(e){var t=this.json.buffers[e],a=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(e,n){a.load(A(t.uri,r.path),e,void 0,function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},G.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,a=t.byteOffset||0;return e.slice(a,a+n)})},G.prototype.loadAccessor=function(e){var t=this,n=this.json,a=this.json.accessors[e];if(void 0===a.bufferView&&void 0===a.sparse)return null;var r=[];return void 0!==a.bufferView?r.push(this.getDependency("bufferView",a.bufferView)):r.push(null),void 0!==a.sparse&&(r.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(r).then(function(e){var r,o,s=e[0],l=E[a.type],c=f[a.componentType],u=c.BYTES_PER_ELEMENT,p=u*l,d=a.byteOffset||0,h=n.bufferViews[a.bufferView].byteStride,m=!0===a.normalized;if(h&&h!==p){var v="InterleavedBuffer:"+a.bufferView+":"+a.componentType,g=t.cache.get(v);g||(r=new c(s),g=new i["B"](r,h/u),t.cache.add(v,g)),o=new i["C"](g,l,d/u,m)}else r=null===s?new c(a.count*l):new c(s,d,a.count*l),o=new i["j"](r,l,m);if(void 0!==a.sparse){var b=E.SCALAR,y=f[a.sparse.indices.componentType],w=a.sparse.indices.byteOffset||0,T=a.sparse.values.byteOffset||0,S=new y(e[1],w,a.sparse.count*b),M=new c(e[2],T,a.sparse.count*l);null!==s&&o.setArray(o.array.slice());for(var x=0,R=S.length;x<R;x++){var A=S[x];if(o.setX(A,M[x*l]),l>=2&&o.setY(A,M[x*l+1]),l>=3&&o.setZ(A,M[x*l+2]),l>=4&&o.setW(A,M[x*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})},G.prototype.loadTexture=function(e){var t,a=this,r=this.json,o=this.options,s=this.textureLoader,l=window.URL||window.webkitURL,c=r.textures[e],u=c.extensions||{};t=u[n.MSFT_TEXTURE_DDS]?r.images[u[n.MSFT_TEXTURE_DDS].source]:r.images[c.source];var p=t.uri,d=!1;return void 0!==t.bufferView&&(p=a.getDependency("bufferView",t.bufferView).then(function(e){d=!0;var n=new Blob([e],{type:t.mimeType});return p=l.createObjectURL(n),p})),Promise.resolve(p).then(function(e){var t=i["Q"].Handlers.get(e);return t||(t=u[n.MSFT_TEXTURE_DDS]?a.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise(function(n,a){t.load(A(e,o.path),n,void 0,a)})}).then(function(e){!0===d&&l.revokeObjectURL(p),e.flipY=!1,void 0!==c.name&&(e.name=c.name),u[n.MSFT_TEXTURE_DDS]||(e.format=void 0!==c.format?y[c.format]:i["xb"]),void 0!==c.internalFormat&&e.format!==y[c.internalFormat]&&console.warn("THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),e.type=void 0!==c.type?w[c.type]:i["Vb"];var t=r.samplers||{},a=t[c.sampler]||{};return e.magFilter=g[a.magFilter]||i["N"],e.minFilter=g[a.minFilter]||i["O"],e.wrapS=b[a.wrapS]||i["Db"],e.wrapT=b[a.wrapT]||i["Db"],e})},G.prototype.assignTexture=function(e,t,n){return this.getDependency("texture",n).then(function(n){e[t]=n})},G.prototype.loadMaterial=function(e){var t,a=this,r=(this.json,this.extensions),o=this.json.materials[e],s={},l=o.extensions||{},c=[];if(l[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(o),c.push(u.extendParams(s,o,a))}else if(l[n.KHR_MATERIALS_UNLIT]){var p=r[n.KHR_MATERIALS_UNLIT];t=p.getMaterialType(o),c.push(p.extendParams(s,o,a))}else{t=i["bb"];var d=o.pbrMetallicRoughness||{};if(s.color=new i["m"](1,1,1),s.opacity=1,Array.isArray(d.baseColorFactor)){var h=d.baseColorFactor;s.color.fromArray(h),s.opacity=h[3]}if(void 0!==d.baseColorTexture&&c.push(a.assignTexture(s,"map",d.baseColorTexture.index)),s.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,s.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture){var m=d.metallicRoughnessTexture.index;c.push(a.assignTexture(s,"metalnessMap",m)),c.push(a.assignTexture(s,"roughnessMap",m))}}!0===o.doubleSided&&(s.side=i["r"]);var f=o.alphaMode||R.OPAQUE;return f===R.BLEND?s.transparent=!0:(s.transparent=!1,f===R.MASK&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==i["ab"]&&(c.push(a.assignTexture(s,"normalMap",o.normalTexture.index)),s.normalScale=new i["Zb"](1,1),void 0!==o.normalTexture.scale&&s.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&t!==i["ab"]&&(c.push(a.assignTexture(s,"aoMap",o.occlusionTexture.index)),void 0!==o.occlusionTexture.strength&&(s.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==i["ab"]&&(s.emissive=(new i["m"]).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&t!==i["ab"]&&c.push(a.assignTexture(s,"emissiveMap",o.emissiveTexture.index)),Promise.all(c).then(function(){var e;return e=t===i["Hb"]?r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),void 0!==o.name&&(e.name=o.name),e.normalScale&&(e.normalScale.y=-e.normalScale.y),e.map&&(e.map.encoding=i["gc"]),e.emissiveMap&&(e.emissiveMap.encoding=i["gc"]),e.specularMap&&(e.specularMap.encoding=i["gc"]),o.extras&&(e.userData=o.extras),o.extensions&&C(r,e,o),e})},G.prototype.loadGeometries=function(e){var t,a=this,r=this.extensions,o=this.primitiveCache,s=F(e);return s&&(t=e,e=[e[0]]),this.getDependencies("accessor").then(function(l){for(var c=[],u=0,p=e.length;u<p;u++){var d=e[u],h=D(o,d);if(h)c.push(h);else if(d.extensions&&d.extensions[n.KHR_DRACO_MESH_COMPRESSION]){var m=r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(d,a).then(function(e){return U(e,d,l),e});o.push({primitive:d,promise:m}),c.push(m)}else{var f=new i["k"];U(f,d,l);m=Promise.resolve(f);o.push({primitive:d,promise:m}),c.push(m)}}return Promise.all(c).then(function(n){if(s){var r=n[0],o=a.multiPassGeometryCache,c=H(o,r,t);if(null!==c)return[c.geometry];var u=new i["k"];for(var p in u.name=r.name,u.userData=r.userData,r.attributes)u.addAttribute(p,r.attributes[p]);for(var p in r.morphAttributes)u.morphAttributes[p]=r.morphAttributes[p];for(var d=[],h=0,m=0,f=t.length;m<f;m++){for(var g=l[t[m].indices],b=0,y=g.count;b<y;b++)d.push(g.array[b]);u.addGroup(h,g.count,m),h+=g.count}return u.setIndex(d),o.push({geometry:u,baseGeometry:r,primitives:t}),[u]}if(n.length>1&&void 0!==v){for(m=1,f=e.length;m<f;m++)if(e[0].mode!==e[m].mode)return n;o=a.multiplePrimitivesCache,c=N(o,n);if(c){if(null!==c.geometry)return[c.geometry]}else{u=v.mergeBufferGeometries(n,!0);if(o.push({geometry:u,baseGeometries:n}),null!==u)return[u]}}return n})})},G.prototype.loadMesh=function(e){var t=this,a=(this.json,this.extensions),r=this.json.meshes[e];return this.getMultiDependencies(["accessor","material"]).then(function(o){for(var s=r.primitives,l=[],c=0,u=s.length;c<u;c++)l[c]=void 0===s[c].material?L():o.materials[s[c].material];return t.loadGeometries(s).then(function(o){for(var c=1===o.length&&o[0].groups.length>0,u=[],p=0,d=o.length;p<d;p++){var h,f=o[p],v=s[p],g=c?l:l[p];if(v.mode===m.TRIANGLES||v.mode===m.TRIANGLE_STRIP||v.mode===m.TRIANGLE_FAN||void 0===v.mode)h=!0===r.isSkinnedMesh?new i["Jb"](f,g):new i["Z"](f,g),v.mode===m.TRIANGLE_STRIP?h.drawMode=i["Tb"]:v.mode===m.TRIANGLE_FAN&&(h.drawMode=i["Sb"]);else if(v.mode===m.LINES)h=new i["M"](f,g);else if(v.mode===m.LINE_STRIP)h=new i["J"](f,g);else if(v.mode===m.LINE_LOOP)h=new i["L"](f,g);else{if(v.mode!==m.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);h=new i["sb"](f,g)}Object.keys(h.geometry.morphAttributes).length>0&&O(h,r),h.name=r.name||"mesh_"+e,o.length>1&&(h.name+="_"+p),void 0!==r.extras&&(h.userData=r.extras),u.push(h);for(var b=c?h.material:[h.material],y=void 0!==f.attributes.color,w=void 0===f.attributes.normal,E=!0===h.isSkinnedMesh,T=Object.keys(f.morphAttributes).length>0,S=T&&void 0!==f.morphAttributes.normal,M=0,x=b.length;M<x;M++){g=b[M];if(h.isPoints){var R="PointsMaterial:"+g.uuid,A=t.cache.get(R);A||(A=new i["tb"],i["V"].prototype.copy.call(A,g),A.color.copy(g.color),A.map=g.map,A.lights=!1,t.cache.add(R,A)),g=A}else if(h.isLine){R="LineBasicMaterial:"+g.uuid;var L=t.cache.get(R);L||(L=new i["K"],i["V"].prototype.copy.call(L,g),L.color.copy(g.color),L.lights=!1,t.cache.add(R,L)),g=L}if(y||w||E||T){R="ClonedMaterial:"+g.uuid+":";g.isGLTFSpecularGlossinessMaterial&&(R+="specular-glossiness:"),E&&(R+="skinning:"),y&&(R+="vertex-colors:"),w&&(R+="flat-shading:"),T&&(R+="morph-targets:"),S&&(R+="morph-normals:");var C=t.cache.get(R);C||(C=g.isGLTFSpecularGlossinessMaterial?a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(g):g.clone(),E&&(C.skinning=!0),y&&(C.vertexColors=i["dc"]),w&&(C.flatShading=!0),T&&(C.morphTargets=!0),S&&(C.morphNormals=!0),t.cache.add(R,C)),g=C}b[M]=g,g.aoMap&&void 0===f.attributes.uv2&&void 0!==f.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),f.addAttribute("uv2",new i["j"](f.attributes.uv.array,2))),g.isGLTFSpecularGlossinessMaterial&&(h.onBeforeRender=a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}h.material=c?b:b[0]}if(1===u.length)return u[0];var _=new i["z"];for(p=0,d=u.length;p<d;p++)_.add(u[p]);return _})})},G.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],a=n[n.type];if(a)return"perspective"===n.type?t=new i["qb"](i["W"].radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):"orthographic"===n.type&&(t=new i["pb"](a.xmag/-2,a.xmag/2,a.ymag/2,a.ymag/-2,a.znear,a.zfar)),void 0!==n.name&&(t.name=n.name),n.extras&&(t.userData=n.extras),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},G.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},G.prototype.loadAnimation=function(e){this.json;var t=this.json.animations[e];return this.getMultiDependencies(["accessor","node"]).then(function(n){for(var a=[],r=0,o=t.channels.length;r<o;r++){var s=t.channels[r],l=t.samplers[s.sampler];if(l){var c=s.target,u=void 0!==c.node?c.node:c.id,p=void 0!==t.parameters?t.parameters[l.input]:l.input,d=void 0!==t.parameters?t.parameters[l.output]:l.output,m=n.accessors[p],f=n.accessors[d],v=n.nodes[u];if(v){var g;switch(v.updateMatrix(),v.matrixAutoUpdate=!0,S[c.path]){case S.weights:g=i["ib"];break;case S.rotation:g=i["wb"];break;case S.position:case S.scale:default:g=i["cc"];break}var b=v.name?v.name:v.uuid,y=void 0!==l.interpolation?M[l.interpolation]:i["F"],w=[];S[c.path]===S.weights?v.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&w.push(e.name?e.name:e.uuid)}):w.push(b);for(var E=0,T=w.length;E<T;E++){var x=new g(w[E]+"."+S[c.path],i["f"].arraySlice(m.array,0),i["f"].arraySlice(f.array,0),y);"CUBICSPLINE"===l.interpolation&&(x.createInterpolant=function(e){return new h(this.times,this.values,this.getValueSize()/3,e)},x.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),a.push(x)}}}}u=void 0!==t.name?t.name:"animation_"+e;return new i["e"](u,void 0,a)})},G.prototype.loadNode=function(e){this.json;var t=this.extensions,a=this.json.meshReferences,r=this.json.meshUses,o=this.json.nodes[e];return this.getMultiDependencies(["mesh","skin","camera","light"]).then(function(e){var s;if(!0===o.isBone)s=new i["h"];else if(void 0!==o.mesh){var l=e.meshes[o.mesh];if(s=l.clone(),!0===l.isGroup)for(var c=0,u=l.children.length;c<u;c++){var p=l.children[c];p.material&&!0===p.material.isGLTFSpecularGlossinessMaterial&&(s.children[c].onBeforeRender=p.onBeforeRender)}else l.material&&!0===l.material.isGLTFSpecularGlossinessMaterial&&(s.onBeforeRender=l.onBeforeRender);a[o.mesh]>1&&(s.name+="_instance_"+r[o.mesh]++)}else if(void 0!==o.camera)s=e.cameras[o.camera];else if(o.extensions&&o.extensions[n.KHR_LIGHTS]&&void 0!==o.extensions[n.KHR_LIGHTS].light){var d=t[n.KHR_LIGHTS].lights;s=d[o.extensions[n.KHR_LIGHTS].light]}else s=new i["jb"];if(void 0!==o.name&&(s.name=i["ub"].sanitizeNodeName(o.name)),o.extras&&(s.userData=o.extras),o.extensions&&C(t,s,o),void 0!==o.matrix){var h=new i["Y"];h.fromArray(o.matrix),s.applyMatrix(h)}else void 0!==o.translation&&s.position.fromArray(o.translation),void 0!==o.rotation&&s.quaternion.fromArray(o.rotation),void 0!==o.scale&&s.scale.fromArray(o.scale);return s})},G.prototype.loadScene=function(){function e(t,n,a,r,o){var s=r[t],l=a.nodes[t];if(void 0!==l.skin)for(var c=!0===s.isGroup?s.children:[s],u=0,p=c.length;u<p;u++){for(var d=c[u],h=o[l.skin],m=[],f=[],v=0,g=h.joints.length;v<g;v++){var b=h.joints[v],y=r[b];if(y){m.push(y);var w=new i["Y"];void 0!==h.inverseBindMatrices&&w.fromArray(h.inverseBindMatrices.array,16*v),f.push(w)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',b)}d.bind(new i["Ib"](m,f),d.matrixWorld)}if(n.add(s),l.children){var E=l.children;for(u=0,p=E.length;u<p;u++){var T=E[u];e(T,s,a,r,o)}}}return function(t){var a=this.json,r=this.extensions,o=this.json.scenes[t];return this.getMultiDependencies(["node","skin"]).then(function(t){var s=new i["Fb"];void 0!==o.name&&(s.name=o.name),o.extras&&(s.userData=o.extras),o.extensions&&C(r,s,o);for(var l=o.nodes||[],c=0,u=l.length;c<u;c++)e(l[c],s,a,t.nodes,t.skins);if(o.extensions&&o.extensions[n.KHR_LIGHTS]&&void 0!==o.extensions[n.KHR_LIGHTS].light){var p=r[n.KHR_LIGHTS].lights;s.add(p[o.extensions[n.KHR_LIGHTS].light])}return s})}}(),e}(),C={name:"model-viewer",mixins:[M],data:function(){return{loader:new L}},methods:{load:function(){var e=this;this.src&&(this.object&&this.wrapper.remove(this.object),this.loader.load(this.src,function(t){console.log(e.envMap,e.envMap.length),null!==e.envMap&&t.scene.traverse(function(t){t.isMesh&&(console.log(t),t.material.envMap=e.envMap)}),e.addObject(t.scene),e.$emit("on-load")},function(t){e.$emit("on-progress",t)},function(t){console.log(t),e.$emit("on-error",t)}))}}},_=C,O=Object(c["a"])(_,R,A,!1,null,null,null),P=O.exports,I={name:"app",components:{ModelViewer:P,GithubCorner:d},data:function(){return{lights:[{type:"hemisphere",skyColor:12303359,groundColor:4473890,position:new i["ac"](0,1,0)}],src:"models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf",backgroundColor:16777215,visibleControls:{help:!0,fullscreen:!0,download:!0},cubemap:["textures/cube/Bridge2/posx.jpg","textures/cube/Bridge2/negx.jpg","textures/cube/Bridge2/posy.jpg","textures/cube/Bridge2/negy.jpg","textures/cube/Bridge2/posz.jpg","textures/cube/Bridge2/negz.jpg"]}}},j=I,D=Object(c["a"])(j,r,o,!1,null,null,null),N=D.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(N)}}).$mount("#app")},zimB:function(e,t,n){}});
//# sourceMappingURL=app.c49d1066.js.map
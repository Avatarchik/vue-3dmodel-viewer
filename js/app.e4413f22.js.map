{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/mixins/base-mixin.vue?aeba","webpack:///./examples/components/GithubCorner.vue?9681","webpack:///./examples/App.vue?c197","webpack:///./examples/components/GithubCorner.vue?51f5","webpack:///./examples/components/GithubCorner.vue","webpack:///./src/mixins/base-mixin.vue?c192","webpack:///./src/controls/OrbitControls.js","webpack:///./src/utils/BufferGeometryUtils.js","webpack:///./src/utils/index.js","webpack:///src/mixins/base-mixin.vue","webpack:///./src/mixins/base-mixin.vue?7363","webpack:///./src/mixins/base-mixin.vue","webpack:///./src/loaders/DDSLoader.js","webpack:///./src/loaders/DRACOLoader.js","webpack:///./src/loaders/GLTFLoader.js","webpack:///./src/loaders/ModelLoader.js","webpack:///./src/components/ModelViewer.vue","webpack:///src/components/ModelViewer.vue","webpack:///./src/components/ModelViewer.vue?63dc","webpack:///examples/App.vue","webpack:///./examples/App.vue?3d61","webpack:///./examples/App.vue","webpack:///./examples/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_base_mixin_vue_vue_type_style_index_0_id_255f57c2_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GithubCorner_vue_vue_type_style_index_0_id_9ffada10_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_5d95ed33_render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","role","_m","type","on","click","$event","changeModel","_v","lights","background-color","backgroundColor","show-controls","visible-controls","visibleControls","src","cubemap","statsjs","datgui","rotation","rotate","playAnimation","anim","staticRenderFns","GithubCornervue_type_template_id_9ffada10_scoped_true_render","href","aria-label","staticStyle","fill","color","position","top","border","right","z-index","width","height","viewBox","aria-hidden","transform-origin","GithubCornervue_type_template_id_9ffada10_scoped_true_staticRenderFns","script","component","componentNormalizer","GithubCorner","base_mixinvue_type_template_id_255f57c2_scoped_true_render","class","showHelp","toggleHelp","ref","id","directives","rawName","expression","data-tooltip","downloadModel","toggleFullscreen","fullscreen","_t","base_mixinvue_type_template_id_255f57c2_scoped_true_staticRenderFns","OrbitControls_OrbitControls","domElement","undefined","document","enabled","target","three_module","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","ZOOM","MIDDLE","PAN","target0","clone","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY_PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","left","clientWidth","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","x","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDollyPan","dx","dy","sqrt","handleTouchMoveRotate","handleTouchMoveDollyPan","handleTouchEnd","preventDefault","button","addEventListener","stopPropagation","constructor","defineProperties","center","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","BufferGeometryUtils","computeTangents","geometry","index","attributes","normal","uv","indices","array","positions","normals","uvs","nVertices","tangent","addAttribute","Float32Array","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","groups","start","count","il","group","jl","handleTriangle","w","test","tmp","tmp2","n2","handleVertex","a","b","fromArray","x1","x2","y1","y2","z1","z","z2","s1","s2","t1","t2","normalize","mergeBufferGeometries","geometries","useGroups","isIndexed","attributesUsed","Set","morphAttributesUsed","morphAttributes","mergedGeometry","has","userData","mergedUserData","addGroup","indexOffset","mergedIndex","getX","setIndex","mergedAttribute","mergeBufferAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","itemSize","normalized","arrayLength","attribute","isInterleavedBufferAttribute","box","getSize","setFromObject","getCenter","suportWebGL","canvas","createElement","WebGLRenderingContext","getContext","e","base_mixinvue_type_script_lang_js","props","String","default","animationTime","Number","Boolean","Array","backgroundAlpha","cameraPosition","cameraRotation","cameraUp","cameraLookAt","showControls","help","download","controllable","size","initSize","wrapper","camera","scene","renderer","controls","allLights","envMap","loader","mixer","reqId","clock","stats","gui","mounted","$el","offsetWidth","offsetHeight","antialias","alpha","$refs","shadowMap","gammaOutput","background","getHex","load","onKeydown","onResize","animate","beforeDestroy","cancelAnimationFrame","watch","deep","handler","val","updateLights","updateCubemaps","updateCamera","updateRenderer","updateControls","updateStats","updateDatGui","computed","methods","log","which","resetCameraView","_this","$nextTick","stats_min_default","dom","style","visible","appendChild","getElementById","remove","_this2","destroy","dat_gui_module","autoPlace","closed","parameters","model","wireframe","de2ra","degree","_folder1","addFolder","onChange","modelWireframe","listen","traverse","child","isMesh","material","_folder2","updateModel","setSize","setPixelRatio","devicePixelRatio","setClearColor","setClearAlpha","format","aspect","_this3","forEach","item","toLowerCase","light","intensity","_color","_intensity","decay","_color2","_intensity2","skyColor","groundColor","_intensity3","requestAnimationFrame","getDelta","render","_this4","screenfull_es6_esm","toggle","isFullscreen","_this5","getObject","arguments","process","addObject","$emit","xhr","loaded","total","err","negate","mixins_base_mixinvue_type_script_lang_js","base_mixin_component","base_mixin","DDSLoader_DDSLoader","DDSLoader","manager","_parser","parse","buffer","loadMipmaps","dds","mipmaps","mipmapCount","DDS_MAGIC","DDSD_MIPMAPCOUNT","DDSCAPS2_CUBEMAP","DDSCAPS2_CUBEMAP_POSITIVEX","DDSCAPS2_CUBEMAP_NEGATIVEX","DDSCAPS2_CUBEMAP_POSITIVEY","DDSCAPS2_CUBEMAP_NEGATIVEY","DDSCAPS2_CUBEMAP_POSITIVEZ","DDSCAPS2_CUBEMAP_NEGATIVEZ","DDPF_FOURCC","fourCCToInt32","charCodeAt","int32ToFourCC","fromCharCode","loadARGBMip","dataOffset","dataLength","srcBuffer","Uint8Array","byteArray","dst","g","blockBytes","FOURCC_DXT1","FOURCC_DXT3","FOURCC_DXT5","FOURCC_ETC1","headerLengthInt","off_magic","off_size","off_flags","off_height","off_width","off_mipmapCount","off_pfFlags","off_pfFourCC","off_RGBBitCount","off_RBitMask","off_GBitMask","off_BBitMask","off_ABitMask","off_caps2","header","Int32Array","error","fourCC","isRGBAUncompressed","caps2","isCubemap","faces","face","mipmap","DRACOLoader_DRACOLoader","timeLoaded","materials","verbosity","attributeOptions","drawMode","nativeAttributeMap","url","onLoad","onProgress","onError","setPath","path","setResponseType","blob","decodeDracoFile","setVerbosity","level","setDrawMode","setSkipDequantization","attributeName","skip","skipDequantization","getAttributeOptions","rawBuffer","callback","attributeUniqueIdMap","attributeTypeMap","getDecoderModule","then","decodeDracoFileInternal","decoder","dracoDecoder","DecoderBuffer","Init","Int8Array","byteLength","Decoder","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","POINT_CLOUD","errorMsg","Error","convertDracoGeometryTo3JS","addAttributeToGeometry","dracoGeometry","attributeType","geometryBuffer","ptr","attributeData","TypedBufferAttribute","numComponents","num_components","numPoints","num_points","numValues","DracoFloat32Array","GetAttributeFloatForAllPoints","DracoInt8Array","GetAttributeInt8ForAllPoints","Int16Array","DracoInt16Array","GetAttributeInt16ForAllPoints","DracoInt32Array","GetAttributeInt32ForAllPoints","DracoUInt8Array","GetAttributeUInt8ForAllPoints","Uint16Array","DracoUInt16Array","GetAttributeUInt16ForAllPoints","Uint32Array","DracoUInt32Array","GetAttributeUInt32ForAllPoints","GetValue","decodingStatus","SkipAttributeTransform","POSITION","start_time","performance","now","Mesh","DecodeBufferToMesh","PointCloud","DecodeBufferToPointCloud","ok","error_msg","numFaces","decode_end","num_faces","toString","numAttributes","num_attributes","posAttId","GetAttributeId","posAttribute","GetAttribute","attId","attributeId","GetAttributeByUniqueId","stripsArray","GetTriangleStripsFromMesh","numIndices","ia","GetFaceFromMesh","posTransform","AttributeQuantizationTransform","InitFromAttribute","isQuantized","maxRange","range","numQuantizationBits","quantization_bits","minValues","min_value","decode_time","import_time","isVersionSupported","version","decoderPath","decoderConfig","decoderModulePromise","setDecoderPath","setDecoderConfig","config","wasmBinary","releaseDecoderModule","promise","DracoDecoderModule","Promise","resolve","WebAssembly","es6_typeof","_loadScript","wasmBinaryFile","_loadArrayBuffer","onModuleLoaded","prevScript","parentNode","removeChild","head","getElementsByTagName","onload","reject","GLTFLoader_GLTFLoader","GLTFLoader","dracoLoader","GLTFRegistry","objects","removeAll","crossOrigin","extractUrlBase","setCrossOrigin","setDRACOLoader","content","extensions","magic","decodeText","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","extensionsUsed","extensionName","extensionsRequired","KHR_LIGHTS","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","indexOf","parser","GLTFParser","scenes","cameras","animations","glTF","addUnknownExtensionsToUserData","ddsLoader","extension","lightId","lightNode","spot","innerConeAngle","outerConeAngle","penumbra","getMaterialType","extendParams","materialParams","pending","opacity","metallicRoughness","pbrMetallicRoughness","isArray","baseColorFactor","baseColorTexture","assignTexture","all","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","headerView","DataView","getUint32","chunkView","chunkIndex","chunkLength","chunkType","contentArray","byteOffset","specularGlossinessParams","params","pbrSpecularGlossiness","shader","uniforms","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","fragmentShader","replace","roughness","metalness","roughnessMap","metalnessMap","specular","setHex","glossiness","specularMap","glossinessMap","vertexShader","defines","STANDARD","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossIndex","createMaterial","fog","transparent","isGLTFSpecularGlossinessMaterial","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMapIntensity","refractionRatio","derivatives","cloneMaterial","source","refreshUniforms","uvScaleMap","diffuse","isWebGLRenderTarget","texture","matrixAutoUpdate","updateMatrix","uvTransform","flipEnvMap","isCubeTexture","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","getDependency","interpolate_","i1","t0","values","stride","valueSize","stride2","stride3","td","pp","ppp","offset1","offset0","s0","s3","p0","m0","p1","m1","WEBGL_CONSTANTS","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","UNSIGNED_BYTE","UNSIGNED_SHORT","5120","5121","5122","5123","5125","5126","WEBGL_FILTERS","9728","9729","9984","9985","9986","9987","WEBGL_WRAPPINGS","33071","33648","10497","WEBGL_TEXTURE_FORMATS","6406","6407","6408","6409","6410","WEBGL_TEXTURE_DATATYPES","32819","32820","33635","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","NORMAL","TEXCOORD_0","TEXCOORD0","TEXCOORD","TEXCOORD_1","COLOR_0","COLOR0","COLOR","WEIGHTS_0","WEIGHT","JOINTS_0","JOINT","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","STEP","ALPHA_MODES","OPAQUE","MASK","BLEND","resolveURL","createDefaultMaterial","depthTest","side","knownExtensions","objectDef","gltfExtensions","addMorphTargets","targets","hasMorphPosition","hasMorphNormal","morphPositions","morphNormals","positionAttribute","cloneBufferAttribute","setXYZ","getY","getZ","normalAttribute","updateMorphTargets","mesh","meshDef","morphTargetInfluences","extras","targetNames","morphTargetDictionary","isPrimitiveEqual","isObjectEqual","isArrayEqual","getCachedGeometry","cache","newPrimitive","cached","getCachedCombinedGeometry","baseGeometries","getCachedMultiPassGeometry","primitives","baseGeometry","getW","isMultiPassGeometry","primitive0","targets0","options","primitiveCache","multiplePrimitivesCache","multiPassGeometryCache","textureLoader","fileLoader","addPrimitiveAttributes","primitiveDef","gltfAttributeName","threeAttributeName","bufferAttribute","markDefs","getMultiDependencies","dependencies","catch","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","getDependencies","defs","def","types","results","pendings","bufferIndex","bufferDef","buffers","uri","bufferViewDef","bufferViews","accessorIndex","sparse","pendingBufferViews","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibCacheKey","ib","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setArray","setX","setY","setZ","setW","textureIndex","URL","webkitURL","textureDef","textures","textureExtensions","images","sourceURI","isObjectURL","Blob","mimeType","createObjectURL","Handlers","revokeObjectURL","flipY","internalFormat","samplers","sampler","magFilter","minFilter","wrapS","wrapT","textureName","materialIndex","materialType","materialDef","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","alphaMode","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","loadGeometries","originalPrimitives","isMultiPass","geometryPromise","accessor","meshIndex","originalMaterials","isMultiMaterial","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","isLine","lineMaterial","cachedMaterial","skinning","vertexColors","flatShading","morphTargets","uv2","onBeforeRender","cameraIndex","cameraDef","radToDeg","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","tracks","channels","channel","node","input","output","inputAccessor","outputAccessor","TypedKeyframeTrack","targetName","interpolation","track","arraySlice","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","isGroup","children","sanitizeNodeName","applyMatrix","buildNodeHierachy","nodeId","parentObject","allNodes","bones","boneInverses","jointId","jointNode","mat","matrixWorld","sceneIndex","sceneDef","nodeIds","ModelLoader_ModelLoader","cachedLoaders","loaderMap","3mf","amf","bvh","assimp","babylon","dae","drc","fbx","gcode","gltf","glb","bin","kmz","md2","mmd","obj","ply","pcd","prwm","stl","tds","vtk","vtp","zae","loaderClass","formResult","res","isBufferGeometry","isGeometry","originalResult","getLoader","loaderName","loadercb","extToLoader","ext","maanger","concat","extOverride","extMatches","match","urlext","ModelViewer_render","ModelViewer_staticRenderFns","ModelViewervue_type_script_lang_js","mixins","created","isMeshStandardMaterial","isShaderMaterial","needsUpdate","isLight","castShadow","animation","duration","action","clipAction","play","components_ModelViewervue_type_script_lang_js","ModelViewer_component","ModelViewer","Appvue_type_script_lang_js","components","models","gltf_anim","el","examples_Appvue_type_script_lang_js","App_component","App","vue_runtime_esm","productionTip","h","$mount"],"mappings":"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","file":"js/app.e4413f22.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vue-3dmodel-viewer/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"wx8R\",0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=style&index=0&id=255f57c2&scoped=true&lang=css\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=style&index=0&id=255f57c2&scoped=true&lang=css\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GithubCorner.vue?vue&type=style&index=0&id=9ffada10&scoped=true&lang=css\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GithubCorner.vue?vue&type=style&index=0&id=9ffada10&scoped=true&lang=css\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('GithubCorner'),_c('main',{staticClass:\"container\",attrs:{\"role\":\"main\"}},[_vm._m(0),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-2\"},[_c('button',{staticClass:\"btn btn-primary btn-block\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.changeModel('gltf')}}},[_vm._v(\"GLTF\")]),_c('button',{staticClass:\"btn btn-primary btn-block\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.changeModel('glb')}}},[_vm._v(\"GLTF (GLB)\")]),_c('button',{staticClass:\"btn btn-primary btn-block\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.changeModel('gltf_anim')}}},[_vm._v(\"GLTF (Anim)\")])]),_c('div',{staticClass:\"col-md-10\"},[_c('ModelViewer',{attrs:{\"lights\":_vm.lights,\"background-color\":_vm.backgroundColor,\"show-controls\":true,\"visible-controls\":_vm.visibleControls,\"src\":_vm.src,\"cubemap\":_vm.cubemap,\"statsjs\":_vm.statsjs,\"datgui\":_vm.datgui,\"rotation\":_vm.rotate,\"playAnimation\":_vm.anim}})],1)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-5 text-center\"},[_c('h2',[_vm._v(\"Vue.JS 3D Model Viewer Example\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"github-corner\",attrs:{\"href\":\"https://github.com/XpycT/vue-3dmodel-viewer\",\"aria-label\":\"View source on Github\"}},[_c('svg',{staticStyle:{\"fill\":\"#151513\",\"color\":\"#fff\",\"position\":\"absolute\",\"top\":\"0\",\"border\":\"0\",\"right\":\"0\",\"z-index\":\"20\"},attrs:{\"width\":\"80\",\"height\":\"80\",\"viewBox\":\"0 0 250 250\",\"aria-hidden\":\"true\"}},[_c('path',{attrs:{\"d\":\"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z\"}}),_c('path',{staticClass:\"octo-arm\",staticStyle:{\"transform-origin\":\"130px 106px\"},attrs:{\"d\":\"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2\",\"fill\":\"currentColor\"}}),_c('path',{staticClass:\"octo-body\",attrs:{\"d\":\"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z\",\"fill\":\"currentColor\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./GithubCorner.vue?vue&type=template&id=9ffada10&scoped=true\"\nvar script = {}\nimport style0 from \"./GithubCorner.vue?vue&type=style&index=0&id=9ffada10&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9ffada10\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.suportWebGL)?_c('div',{staticClass:\"model-viewer\"},[_c('div',{staticClass:\"overlays\"},[_c('div',{staticClass:\"overlay help\",class:_vm.showHelp ? '' : 'hidden'},[_c('a',{staticClass:\"close\",attrs:{\"href\":\"#\"},on:{\"click\":_vm.toggleHelp}},[_c('i',{staticClass:\"fas fa-times\"})]),_vm._m(0)])]),_c('div',{staticClass:\"webgl\"},[_c('div',{ref:\"datgui\",attrs:{\"id\":\"datgui\"}}),_c('canvas',{ref:\"canvas\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showControls),expression:\"showControls\"}],staticClass:\"gui enabled\"},[_c('div',{staticClass:\"controls\"},[_c('div',{staticClass:\"general-controls\"},[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visibleControls.help),expression:\"visibleControls.help\"}],staticClass:\"control control-tooltip\",attrs:{\"data-tooltip\":\"Help\"},on:{\"click\":_vm.toggleHelp}},[_c('i',{staticClass:\"fas fa-question\"})]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visibleControls.download),expression:\"visibleControls.download\"}],staticClass:\"control control-tooltip\",attrs:{\"data-tooltip\":\"Download\"},on:{\"click\":_vm.downloadModel}},[_c('i',{staticClass:\"fas fa-download\"})]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visibleControls.fullscreen),expression:\"visibleControls.fullscreen\"}],staticClass:\"control control-tooltip tooltip-right-bound\",attrs:{\"data-tooltip\":\"Fullscreen\"},on:{\"click\":_vm.toggleFullscreen}},[_c('i',{staticClass:\"fas\",class:_vm.fullscreen ? 'fa-compress' : 'fa-expand-arrows-alt'})])])])])])]):_c('div',[_vm._t(\"error\",[_vm._v(\"\\n    Your graphics card does not seem to support\\n    \"),_c('a',{staticStyle:{\"color\":\"#000\"},attrs:{\"href\":\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"}},[_vm._v(\"WebGL\")]),_vm._v(\".\"),_c('br'),_vm._v(\"\\n    Find out how to get it \"),_c('a',{staticStyle:{\"color\":\"#000\"},attrs:{\"href\":\"http://get.webgl.org/\"}},[_vm._v(\"here\")]),_vm._v(\".\\n  \")])],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"inner\"},[_c('div',{staticClass:\"tip\"},[_c('div',[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('div',[_c('b',[_vm._v(\"Orbit around\")]),_c('div',[_vm._v(\"Left mouse + drag or\"),_c('br'),_vm._v(\"One finger drag (touch)\")])])]),_c('div',{staticClass:\"tip\"},[_c('div',[_c('i',{staticClass:\"fas fa-search-plus\"})]),_c('div',[_c('b',[_vm._v(\"Zoom\")]),_c('div',[_vm._v(\"Middle mouse or mousewheel\"),_c('br'),_vm._v(\"Two-finger spread or squish (touch)\")])])]),_c('div',{staticClass:\"tip\"},[_c('div',[_c('i',{staticClass:\"fas fa-arrows-alt\"})]),_c('div',[_c('b',[_vm._v(\"Pan\")]),_c('div',[_vm._v(\"Right mouse + drag or arraow keys\"),_c('br'),_vm._v(\"Two fingers drag (touch)\")])])])])}]\n\nexport { render, staticRenderFns }","/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or arrow keys / touch: two-finger move\r\nimport * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/controls/OrbitControls.js\r\n\r\nconst OrbitControls = function ( object, domElement ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new THREE.Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.25;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.panSpeed = 1.0;\r\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new THREE.Vector3();\r\n\t\tvar lastQuaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new THREE.Spherical();\r\n\tvar sphericalDelta = new THREE.Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new THREE.Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new THREE.Vector2();\r\n\tvar rotateEnd = new THREE.Vector2();\r\n\tvar rotateDelta = new THREE.Vector2();\r\n\r\n\tvar panStart = new THREE.Vector2();\r\n\tvar panEnd = new THREE.Vector2();\r\n\tvar panDelta = new THREE.Vector2();\r\n\r\n\tvar dollyStart = new THREE.Vector2();\r\n\tvar dollyEnd = new THREE.Vector2();\r\n\tvar dollyDelta = new THREE.Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tif ( scope.screenSpacePanning === true ) {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownRotate' );\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownDolly' );\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownPan' );\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveDolly' );\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMovePan' );\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n// eslint-disable-next-line no-unused-vars\r\n\tfunction handleMouseUp( event ) {\r\n\r\n\t\t// console.log( 'handleMouseUp' );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t// console.log( 'handleMouseWheel' );\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\t//console.log( 'handleKeyDown' );\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartRotate' );\r\n\r\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartDollyPan' );\r\n\r\n\t\tif ( scope.enableZoom ) {\r\n\r\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\tdollyStart.set( 0, distance );\r\n\r\n\t\t}\r\n\r\n\t\tif ( scope.enablePan ) {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveDollyPan' );\r\n\r\n\t\tif ( scope.enableZoom ) {\r\n\r\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n\t\t\tdollyIn( dollyDelta.y );\r\n\r\n\t\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\t}\r\n\r\n\t\tif ( scope.enablePan ) {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanEnd.set( x, y );\r\n\r\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\t\tpanStart.copy( panEnd );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n// eslint-disable-next-line no-unused-vars\r\n\tfunction handleTouchEnd( event ) {\r\n\r\n\t\t//console.log( 'handleTouchEnd' );\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase scope.mouseButtons.ORBIT:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.ZOOM:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\t// one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchStartDollyPan( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1: // one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: // two-fingered touch: dolly-pan\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\r\n\r\n\t\t\t\thandleTouchMoveDollyPan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\twindow.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\nObject.defineProperties( OrbitControls.prototype, {\r\n\r\n\tcenter: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\r\n\t\t\treturn this.target;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// backward compatibility\r\n\r\n\tnoZoom: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\treturn ! this.enableZoom;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\tthis.enableZoom = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoRotate: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\treturn ! this.enableRotate;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\tthis.enableRotate = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoPan: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\treturn ! this.enablePan;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\tthis.enablePan = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoKeys: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\treturn ! this.enableKeys;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\tthis.enableKeys = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstaticMoving: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\treturn ! this.enableDamping;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\tthis.enableDamping = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdynamicDampingFactor: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\treturn this.dampingFactor;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\tthis.dampingFactor = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nexport { OrbitControls };","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\nimport * as THREE from 'three';\r\n\r\nconst BufferGeometryUtils = {\r\n\r\n\tcomputeTangents: function ( geometry ) {\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\t// based on http://www.terathon.com/code/tangent.html\r\n\t\t// (per vertex tangents)\r\n\r\n\t\tif ( index === null ||\r\n        attributes.position === undefined ||\r\n        attributes.normal === undefined ||\r\n        attributes.uv === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = index.array;\r\n\t\tvar positions = attributes.position.array;\r\n\t\tvar normals = attributes.normal.array;\r\n\t\tvar uvs = attributes.uv.array;\r\n\r\n\t\tvar nVertices = positions.length / 3;\r\n\r\n\t\tif ( attributes.tangent === undefined ) {\r\n\r\n\t\t\tgeometry.addAttribute( 'tangent', new THREE.BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar tangents = attributes.tangent.array;\r\n\r\n\t\tvar tan1 = [], tan2 = [];\r\n\r\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\r\n\r\n\t\t\ttan1[ i ] = new THREE.Vector3();\r\n\t\t\ttan2[ i ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tvar vA = new THREE.Vector3(),\r\n\t\t\tvB = new THREE.Vector3(),\r\n\t\t\tvC = new THREE.Vector3(),\r\n\r\n\t\t\tuvA = new THREE.Vector2(),\r\n\t\t\tuvB = new THREE.Vector2(),\r\n\t\t\tuvC = new THREE.Vector2(),\r\n\r\n\t\t\tsdir = new THREE.Vector3(),\r\n\t\t\ttdir = new THREE.Vector3();\r\n\r\n\t\tfunction handleTriangle( a, b, c ) {\r\n\r\n\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\r\n\t\t\tvar x1 = vB.x - vA.x;\r\n\t\t\tvar x2 = vC.x - vA.x;\r\n\r\n\t\t\tvar y1 = vB.y - vA.y;\r\n\t\t\tvar y2 = vC.y - vA.y;\r\n\r\n\t\t\tvar z1 = vB.z - vA.z;\r\n\t\t\tvar z2 = vC.z - vA.z;\r\n\r\n\t\t\tvar s1 = uvB.x - uvA.x;\r\n\t\t\tvar s2 = uvC.x - uvA.x;\r\n\r\n\t\t\tvar t1 = uvB.y - uvA.y;\r\n\t\t\tvar t2 = uvC.y - uvA.y;\r\n\r\n\t\t\tvar r = 1.0 / ( s1 * t2 - s2 * t1 );\r\n\r\n\t\t\tsdir.set(\r\n\t\t\t\t( t2 * x1 - t1 * x2 ) * r,\r\n\t\t\t\t( t2 * y1 - t1 * y2 ) * r,\r\n\t\t\t\t( t2 * z1 - t1 * z2 ) * r\r\n\t\t\t);\r\n\r\n\t\t\ttdir.set(\r\n\t\t\t\t( s1 * x2 - s2 * x1 ) * r,\r\n\t\t\t\t( s1 * y2 - s2 * y1 ) * r,\r\n\t\t\t\t( s1 * z2 - s2 * z1 ) * r\r\n\t\t\t);\r\n\r\n\t\t\ttan1[ a ].add( sdir );\r\n\t\t\ttan1[ b ].add( sdir );\r\n\t\t\ttan1[ c ].add( sdir );\r\n\r\n\t\t\ttan2[ a ].add( tdir );\r\n\t\t\ttan2[ b ].add( tdir );\r\n\t\t\ttan2[ c ].add( tdir );\r\n\r\n\t\t}\r\n\r\n    let groups = geometry.groups;\r\n\r\n    if ( groups.length === 0 ) {\r\n\r\n\t\t\tgroups = [ {\r\n\t\t\t\tstart: 0,\r\n\t\t\t\tcount: indices.length\r\n\t\t\t} ];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\r\n\r\n\t\t\tlet group = groups[ i ];\r\n\r\n\t\t\tlet start = group.start;\r\n      let count = group.count;\r\n\r\n      for ( let j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\thandleTriangle(\r\n\t\t\t\t\tindices[ j + 0 ],\r\n\t\t\t\t\tindices[ j + 1 ],\r\n\t\t\t\t\tindices[ j + 2 ]\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar tmp = new THREE.Vector3(), tmp2 = new THREE.Vector3();\r\n\t\tvar n = new THREE.Vector3(), n2 = new THREE.Vector3();\r\n\t\tvar w, t, test;\r\n\r\n\t\tfunction handleVertex( v ) {\r\n\r\n\t\t\tn.fromArray( normals, v * 3 );\r\n\t\t\tn2.copy( n );\r\n\r\n\t\t\tt = tan1[ v ];\r\n\r\n\t\t\t// Gram-Schmidt orthogonalize\r\n\r\n\t\t\ttmp.copy( t );\r\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\r\n\r\n\t\t\t// Calculate handedness\r\n\r\n\t\t\ttmp2.crossVectors( n2, t );\r\n\t\t\ttest = tmp2.dot( tan2[ v ] );\r\n\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\r\n\r\n\t\t\ttangents[ v * 4 ] = tmp.x;\r\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\r\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\r\n\t\t\ttangents[ v * 4 + 3 ] = w;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\r\n\r\n\t\t\tlet group = groups[ i ];\r\n\r\n\t\t\tlet start = group.start;\r\n\t\t\tlet count = group.count;\r\n\r\n\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\thandleVertex( indices[ j + 0 ] );\r\n\t\t\t\thandleVertex( indices[ j + 1 ] );\r\n\t\t\t\thandleVertex( indices[ j + 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @param  {Array<THREE.BufferGeometry>} geometries\r\n\t * @return {THREE.BufferGeometry}\r\n\t */\r\n\tmergeBufferGeometries: function ( geometries, useGroups ) {\r\n\r\n\t\tvar isIndexed = geometries[ 0 ].index !== null;\r\n\r\n\t\tvar attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\r\n\t\tvar morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\r\n\r\n\t\tvar attributes = {};\r\n\t\tvar morphAttributes = {};\r\n\r\n\t\tvar mergedGeometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\r\n\r\n\t\t\tvar geometry = geometries[ i ];\r\n\r\n\t\t\t// ensure that all geometries are indexed, or none\r\n\r\n\t\t\tif ( isIndexed !== ( geometry.index !== null ) ) return null;\r\n\r\n\t\t\t// gather attributes, exit early if they're different\r\n\r\n\t\t\tfor ( let name in geometry.attributes ) {\r\n\r\n\t\t\t\tif ( ! attributesUsed.has( name ) ) return null;\r\n\r\n\t\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\r\n\r\n\t\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// gather morph attributes, exit early if they're different\r\n\r\n\t\t\tfor ( let name in geometry.morphAttributes ) {\r\n\r\n\t\t\t\tif ( ! morphAttributesUsed.has( name ) ) return null;\r\n\r\n\t\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\r\n\r\n\t\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// gather .userData\r\n\r\n\t\t\tmergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\r\n\t\t\tmergedGeometry.userData.mergedUserData.push( geometry.userData );\r\n\r\n\t\t\tif ( useGroups ) {\r\n\r\n\t\t\t\tvar count;\r\n\r\n\t\t\t\tif ( isIndexed ) {\r\n\r\n\t\t\t\t\tcount = geometry.index.count;\r\n\r\n\t\t\t\t} else if ( geometry.attributes.position !== undefined ) {\r\n\r\n\t\t\t\t\tcount = geometry.attributes.position.count;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmergedGeometry.addGroup( offset, count, i );\r\n\r\n\t\t\t\toffset += count;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// merge indices\r\n\r\n\t\tif ( isIndexed ) {\r\n\r\n\t\t\tvar indexOffset = 0;\r\n\t\t\tvar mergedIndex = [];\r\n\r\n\t\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\r\n\r\n\t\t\t\tlet index = geometries[ i ].index;\r\n\r\n\t\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\r\n\r\n\t\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tindexOffset += geometries[ i ].attributes.position.count;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmergedGeometry.setIndex( mergedIndex );\r\n\r\n\t\t}\r\n\r\n\t\t// merge attributes\r\n\r\n\t\tfor ( let name in attributes ) {\r\n\r\n\t\t\tvar mergedAttribute = this.mergeBufferAttributes( attributes[ name ] );\r\n\r\n\t\t\tif ( ! mergedAttribute ) return null;\r\n\r\n\t\t\tmergedGeometry.addAttribute( name, mergedAttribute );\r\n\r\n\t\t}\r\n\r\n\t\t// merge morph attributes\r\n\r\n\t\tfor ( let name in morphAttributes ) {\r\n\r\n\t\t\tvar numMorphTargets = morphAttributes[ name ][ 0 ].length;\r\n\r\n\t\t\tif ( numMorphTargets === 0 ) break;\r\n\r\n\t\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\r\n\t\t\tmergedGeometry.morphAttributes[ name ] = [];\r\n\r\n\t\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\r\n\r\n\t\t\t\tvar morphAttributesToMerge = [];\r\n\r\n\t\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\r\n\r\n\t\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mergedMorphAttribute = this.mergeBufferAttributes( morphAttributesToMerge );\r\n\r\n\t\t\t\tif ( ! mergedMorphAttribute ) return null;\r\n\r\n\t\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn mergedGeometry;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @param {Array<THREE.BufferAttribute>} attributes\r\n\t * @return {THREE.BufferAttribute}\r\n\t */\r\n\tmergeBufferAttributes: function ( attributes ) {\r\n\r\n\t\tvar TypedArray;\r\n\t\tvar itemSize;\r\n\t\tvar normalized;\r\n\t\tvar arrayLength = 0;\r\n\r\n\t\tfor ( let i = 0; i < attributes.length; ++ i ) {\r\n\r\n\t\t\tvar attribute = attributes[ i ];\r\n\r\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) return null;\r\n\r\n\t\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\r\n\t\t\tif ( TypedArray !== attribute.array.constructor ) return null;\r\n\r\n\t\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\r\n\t\t\tif ( itemSize !== attribute.itemSize ) return null;\r\n\r\n\t\t\tif ( normalized === undefined ) normalized = attribute.normalized;\r\n\t\t\tif ( normalized !== attribute.normalized ) return null;\r\n\r\n\t\t\tarrayLength += attribute.array.length;\r\n\r\n\t\t}\r\n\r\n\t\tvar array = new TypedArray( arrayLength );\r\n\t\tvar offset = 0;\r\n\r\n\t\tfor ( let i = 0; i < attributes.length; ++ i ) {\r\n\r\n\t\t\tarray.set( attributes[ i ].array, offset );\r\n\r\n\t\t\toffset += attributes[ i ].array.length;\r\n\r\n\t\t}\r\n\r\n\t\treturn new THREE.BufferAttribute( array, itemSize, normalized );\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { BufferGeometryUtils }\r\n","import {Box3, Vector3} from 'three';\nimport {BufferGeometryUtils} from './BufferGeometryUtils'\n\n\nconst box = new Box3();\n\nfunction getSize(object) {\n  box.setFromObject(object);\n  return box.getSize(new Vector3());\n}\n\nfunction getCenter(object) {\n  box.setFromObject(object);\n  return box.getCenter(new Vector3());\n}\n\nexport default {\n  BufferGeometryUtils,\n  getSize, getCenter\n}\n\nexport {\n  BufferGeometryUtils,\n  getSize, getCenter\n}\n","<script>\n  import {\n    Clock,\n    Color,\n    RGBFormat,\n    Vector3,\n    Object3D,\n    Scene,\n    WebGLRenderer,\n    PerspectiveCamera,\n    AmbientLight,\n    PointLight,\n    DirectionalLight,\n    HemisphereLight,\n    CubeTextureLoader,\n  } from 'three'\n\n  import {OrbitControls} from '../controls/OrbitControls'\n\n  import {getCenter, getSize} from '../utils'\n\n  import ScreenFull from 'screenfull-es6'\n\n  import Stats from 'stats.js'\n  import * as dat from 'dat.gui'\n\n  const suportWebGL = (() => {\n    try {\n      let canvas = document.createElement('canvas');\n      return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  export default {\n    props: {\n      src: {\n        type: String\n      },\n      position: {\n        type: Object,\n        default() {\n          return {x: 0, y: 0, z: 0}\n        }\n      },\n      rotation: {\n        type: Object,\n        default() {\n          return {x: 0, y: 0, z: 0}\n        }\n      },\n      scale: {\n        type: Object,\n        default() {\n          return {x: 1, y: 1, z: 1}\n        }\n      },\n      animationTime: {\n        type: Number,\n        default: 0\n      },\n      playAnimation: {\n        type: Boolean,\n        default: true\n      },\n      lights: {\n        type: Array,\n        default() {\n          return [\n            {\n              type: 'ambient',\n              color: 0x1e1e23\n            },\n            {\n              type: 'directional',\n              color: 0xcfcfcf,\n              position: new Vector3(20, 40, -15)\n            }\n          ];\n        }\n      },\n      backgroundColor: {\n        default: 0x444444\n      },\n      backgroundAlpha: {\n        type: Number,\n        default: 1\n      },\n      cameraPosition: {\n        type: Object\n      },\n      cameraRotation: {\n        type: Object\n      },\n      cameraUp: {\n        type: Object\n      },\n      cameraLookAt: {\n        type: Object\n      },\n      showControls: {\n        type: Boolean,\n        default: true\n      },\n      visibleControls: {\n        type: Object,\n        default() {\n          return {\n            help: true,\n            download: true,\n            fullscreen: true\n          }\n        }\n      },\n      controllable: {\n        type: Boolean,\n        default: true\n      },\n      cubemap: {\n        type: Array,\n        default() {\n          return []\n        }\n      },\n      statsjs: {\n        type: Boolean,\n        default: false\n      },\n      datgui: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        suportWebGL,\n        fullscreen: false,\n        showHelp: false,\n        size: {\n          width: this.width,\n          height: this.height\n        },\n        initSize: {\n          width: 0,\n          height: 0\n        },\n        object: null,\n        wrapper: new Object3D(),\n        camera: new PerspectiveCamera(45, 1, 0.01, 100000),\n        scene: new Scene(),\n        renderer: null,\n        controls: null,\n        allLights: [],\n        envMap: null,\n        loader: null,\n        mixer: null,\n        reqId: null,    // requestAnimationFrame id\n        clock: new Clock(),\n        stats: null,\n        gui: null\n      }\n    },\n    mounted() {\n      if (this.width === undefined || this.height === undefined) {\n        this.size = {\n          width: this.$el.offsetWidth,\n          height: this.$el.offsetHeight\n        }\n      }\n      this.initSize = this.size;\n\n      this.renderer = new WebGLRenderer({antialias: true, alpha: true, canvas: this.$refs.canvas});\n      this.renderer.shadowMap.enabled = false;\n      this.renderer.gammaOutput = false;\n      //this.renderer.physicallyCorrectLights = true;\n\n      this.scene.background = new Color(this.backgroundColor).getHex();\n      this.scene.add(this.wrapper);\n\n      this.load();\n      this.update();\n\n      window.addEventListener('keydown', this.onKeydown, false);\n      window.addEventListener('resize', this.onResize, false);\n\n      this.animate();\n    },\n    beforeDestroy() {\n      cancelAnimationFrame(this.reqId);\n\n      window.removeEventListener('keydown', this.onKeydown, false);\n      window.removeEventListener('resize', this.onResize, false);\n    },\n    watch: {\n      src() {\n        this.load();\n      },\n      rotation: {\n        deep: true,\n        handler(val) {\n          if (!this.object) return;\n          this.object.rotation.set(val.x, val.y, val.z);\n        }\n      },\n      position: {\n        deep: true,\n        handler(val) {\n          if (!this.object) return;\n          this.object.position.set(val.x, val.y, val.z);\n        }\n      },\n      scale: {\n        deep: true,\n        handler(val) {\n          if (!this.object) return;\n          this.object.scale.set(val.x, val.y, val.z);\n        }\n      },\n      lights: {\n        deep: true,\n        handler() {\n          this.updateLights();\n        }\n      },\n      cubemap: {\n        deep: true,\n        handler() {\n          this.updateCubemaps();\n        }\n      },\n      size: {\n        deep: true,\n        handler() {\n          this.updateCamera();\n          this.updateRenderer();\n        }\n      },\n      controllable() {\n        this.updateControls();\n      },\n      backgroundAlpha() {\n        this.updateRenderer();\n      },\n      backgroundColor() {\n        this.updateRenderer();\n      },\n      statsjs() {\n        this.updateStats();\n      },\n      datgui() {\n        this.updateDatGui();\n      }\n    },\n    computed: {},\n    methods: {\n      onKeydown(event) {\n        console.log(event.which);\n        if (event.which === 32) { // space\n          this.resetCameraView();\n        }\n      },\n      onResize() {\n        if (this.width === undefined || this.height === undefined) {\n          this.$nextTick(() => {\n            this.size = {\n              width: this.$el.offsetWidth,\n              height: this.$el.offsetHeight\n            }\n          })\n        }\n      },\n      update() {\n        this.updateRenderer();\n        this.updateCubemaps();\n        this.updateCamera();\n        this.updateLights();\n        this.updateControls();\n        this.updateStats();\n        this.updateDatGui();\n      },\n      updateStats() {\n        if (!this.statsjs) {\n          if (document.getElementById('stats-panel')) document.getElementById('stats-panel').remove();\n\n          return;\n        }\n\n        this.stats = new Stats();\n        this.stats.dom.id = 'stats-panel';\n        this.stats.dom.style.position = 'absolute';\n        this.stats.visible = true;\n        this.$el.appendChild(this.stats.dom);\n      },\n      updateDatGui() {\n\n        if (!this.datgui) return;\n\n        if (this.gui !== null) this.gui.destroy();\n\n        this.gui = new dat.GUI({autoPlace: false});\n        this.gui.closed = true;\n        this.$refs.datgui.appendChild(this.gui.domElement);\n\n        let parameters =\n          {\n            model: {\n              scale: {x: 1, y: 1, z: 1},\n              position: {x: 0, y: 0, z: 0},\n              rotation: {x: 0, y: 0, z: 0},\n              wireframe: false\n            }\n          };\n\n        let de2ra = function (degree) {\n          return degree * (Math.PI / 180);\n        };\n\n        let _folder1 = this.gui.addFolder('Model');\n        _folder1.add(parameters.model.scale, 'x', 0.1, 5).name('scaleX').onChange(value => this.object.scale.x = value);\n        _folder1.add(parameters.model.scale, 'y', 0.1, 5).name('scaleY').onChange(value => this.object.scale.y = value);\n        _folder1.add(parameters.model.scale, 'z', 0.1, 5).name('scaleZ').onChange(value => this.object.scale.z = value);\n\n        _folder1.add(parameters.model.position, 'x', -150, 150).name('positionX').onChange(value => this.object.position.x = de2ra(value));\n        _folder1.add(parameters.model.position, 'y', -150, 150).name('positionY').onChange(value => this.object.position.y = de2ra(value));\n        _folder1.add(parameters.model.position, 'z', -150, 150).name('positionZ').onChange(value => this.object.position.z = de2ra(value));\n\n        _folder1.add(parameters.model.rotation, 'x', -180, 180).name('rotationX').onChange(value => this.object.rotation.x = de2ra(value));\n        _folder1.add(parameters.model.rotation, 'y', -180, 180).name('rotationY').onChange(value => this.object.rotation.y = de2ra(value));\n        _folder1.add(parameters.model.rotation, 'z', -180, 180).name('rotationZ').onChange(value => this.object.rotation.z = de2ra(value));\n\n        let modelWireframe = _folder1.add(parameters.model, 'wireframe').name('wireframe').listen();\n        modelWireframe.onChange(value => {\n          this.object.traverse(child => {\n            if (child.isMesh) {\n              child.material.wireframe = value;\n            }\n          })\n        });\n\n        let _folder2 = this.gui.addFolder('Camera');\n        _folder2.add(this.camera.position, 'x', -20, 20).name('position x');\n        _folder2.add(this.camera.position, 'y', -20, 20).name('position y');\n        _folder2.add(this.camera.position, 'z', -20, 20).name('position z');\n\n      },\n      updateModel() {\n        const object = this.object;\n        if (!object) return;\n        const position = this.position;\n        const rotation = this.rotation;\n        const scale = this.scale;\n        object.position.set(position.x, position.y, position.z);\n        object.rotation.set(rotation.x, rotation.y, rotation.z);\n        object.scale.set(scale.x, scale.y, scale.z);\n      },\n      updateRenderer() {\n        const renderer = this.renderer;\n        renderer.setSize(this.size.width, this.size.height);\n        renderer.setPixelRatio(window.devicePixelRatio || 1);\n        renderer.setClearColor(new Color(this.backgroundColor).getHex());\n        renderer.setClearAlpha(this.backgroundAlpha);\n      },\n      updateCubemaps() {\n        if (this.cubemap.length === 0) return;\n\n        this.envMap = new CubeTextureLoader().load(this.cubemap);\n        this.envMap.format = RGBFormat;\n        this.scene.background = this.envMap;\n      },\n      updateCamera() {\n        const camera = this.camera;\n        const object = this.object;\n\n        camera.aspect = this.size.width / this.size.height;\n        camera.updateProjectionMatrix();\n\n        if (!this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp) {\n          if (!object) return;\n          const distance = getSize(object).length();\n          camera.position.set(0, 0, 0);\n          camera.position.z = distance;\n          camera.lookAt(new Vector3());\n        } else {\n          camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\n          camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\n          camera.up.set(this.cameraUp.x, this.cameraUp.y, this.cameraUp.z);\n\n          camera.lookAt(new Vector3(this.cameraLookAt.x, this.cameraLookAt.y, this.cameraLookAt.z));\n        }\n      },\n      updateLights() {\n        this.scene.remove.apply(this.scene, this.allLights);\n        this.allLights = [];\n        this.lights.forEach(item => {\n          if (!item.type) return;\n          const type = item.type.toLowerCase();\n          let light = null;\n          if (type === 'ambient' || type === 'ambientlight') {\n            const color = item.color || 0x404040;\n            const intensity = item.intensity || 1;\n            light = new AmbientLight(color, intensity);\n          } else if (type === 'point' || type === 'pointlight') {\n            const color = item.color || 0xffffff;\n            const intensity = item.intensity || 1;\n            const distance = item.distance || 0;\n            const decay = item.decay || 1;\n            light = new PointLight(color, intensity, distance, decay);\n            if (item.position) {\n              light.position.copy(item.position);\n            }\n          } else if (type === 'directional' || type === 'directionallight') {\n            const color = item.color || 0xffffff;\n            const intensity = item.intensity || 1;\n            light = new DirectionalLight(color, intensity);\n            if (item.position) {\n              light.position.copy(item.position);\n            }\n            if (item.target) {\n              light.target.copy(item.target);\n            }\n          } else if (type === 'hemisphere' || type === 'hemispherelight') {\n            const skyColor = item.skyColor || 0xffffff;\n            const groundColor = item.groundColor || 0xffffff;\n            const intensity = item.intensity || 1;\n            light = new HemisphereLight(skyColor, groundColor, intensity);\n            if (item.position) {\n              light.position.copy(item.position);\n            }\n          }\n          this.allLights.push(light);\n          this.scene.add(light);\n        })\n      },\n      updateControls() {\n        if (this.controllable && this.controls) return;\n        if (this.controllable) {\n          if (this.controls) return;\n          this.controls = new OrbitControls(this.camera, this.$refs.canvas);\n          this.controls.enableDamping = true;\n          this.controls.dampingFactor = 0.25;\n          this.controls.type = 'orbit';\n          this.controls.update();\n        } else {\n          if (this.controls) {\n            this.controls.dispose();\n            this.controls = null;\n          }\n        }\n      },\n      animate() {\n        this.reqId = requestAnimationFrame(this.animate);\n        // required if controls.enableDamping or controls.autoRotate are set to true\n        this.controls.update();\n\n        if (this.statsjs && this.stats !== null) this.stats.update();\n\n        if (this.mixer) this.mixer.update(this.clock.getDelta());\n\n        this.render();\n      },\n      render() {\n        this.renderer.render(this.scene, this.camera)\n      },\n      toggleFullscreen() {\n        if (ScreenFull.enabled) {\n          ScreenFull.toggle(this.$el);\n          ScreenFull.on('change', () => {\n            this.fullscreen = ScreenFull.isFullscreen;\n\n            if (!ScreenFull.isFullscreen) this.size = this.initSize;\n\n            this.updateCamera();\n            this.updateRenderer();\n          });\n        }\n      },\n      resetCameraView() {\n        this.controls.reset();\n      },\n      toggleHelp() {\n        this.showHelp = !this.showHelp;\n      },\n      downloadModel() {\n\n      },\n      load() {\n        if (!this.src) return;\n        if (this.object) {\n          this.wrapper.remove(this.object);\n        }\n        this.loader.load(this.src, (...args) => {\n          const object = this.getObject(...args);\n          if (this.process) {\n            this.process(object);\n          }\n          this.addObject(object);\n          this.$emit('on-load');\n        }, xhr => {\n          this.$emit('on-progress', xhr);\n          console.log((xhr.loaded / xhr.total * 100) + '% loaded');\n        }, err => {\n          this.$emit('on-error', err);\n          console.log('on-error', err);\n        });\n      },\n      getObject(object) {\n        return object\n      },\n      addObject(object) {\n        const center = getCenter(object);\n        // correction position\n        this.wrapper.position.copy(center.negate());\n        this.object = object;\n        this.wrapper.add(object);\n\n        this.updateCamera();\n        this.updateModel();\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  @import url(https://use.fontawesome.com/releases/v5.1.0/css/all.css);\n  @import url('https://fonts.googleapis.com/css?family=Open+Sans');\n\n  .model-viewer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    margin: 0;\n    position: relative;\n    overflow: hidden;\n    font-family: \"Open Sans\", sans-serif;\n  }\n\n  .webgl {\n    position: relative;\n  }\n\n  #datgui {\n    position: absolute;\n    top: 0;\n    right: 0;\n  }\n\n  canvas {\n    width: 100%;\n    height: 100%\n  }\n\n  /** GUI **/\n  .gui {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 4;\n    pointer-events: none;\n    user-select: none;\n    opacity: 0;\n    transition: opacity 250ms ease-in-out;\n  }\n\n  .gui.enabled {\n    opacity: 1;\n  }\n\n  .controls {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 2;\n    height: 50px;\n    justify-content: space-between;\n    min-width: 0;\n    padding: 10px;\n    pointer-events: none;\n    display: flex;\n  }\n\n  .controls .general-controls {\n    display: flex !important;\n    justify-content: flex-end;\n    flex: 0 0 auto;\n    font-size: 13px;\n    align-items: center;\n    flex-flow: row nowrap !important;\n    margin-left: auto;\n  }\n\n  .controls a {\n    padding: 0;\n    margin: 0;\n    color: #ffffff;\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  .controls .control {\n    position: relative;\n    display: inline-block;\n    min-width: 0;\n    margin: 0 5px;\n    font-size: 16px;\n    outline: none;\n    transition: background 200ms linear;\n    width: 30px;\n    height: 30px;\n    line-height: 31px;\n    text-align: center;\n    border-radius: 16px;\n    pointer-events: all;\n  }\n\n  .controls .control:hover,\n  .controls .control.active {\n    background: rgba(0, 0, 0, 0.75);\n  }\n\n  .controls .control:before {\n    color: #ffffff;\n    text-shadow: 0 0 1px black;\n  }\n\n  .controls .general-controls .control i {\n    color: #ffffff;\n    text-shadow: 0 0 1px #000000;\n    pointer-events: none;\n  }\n\n  .control-tooltip {\n    position: relative;\n  }\n\n  .control-tooltip.tooltip-down[data-tooltip]:after {\n    top: 25px;\n    bottom: auto;\n  }\n\n  .control-tooltip.tooltip-down[data-tooltip]:before {\n    top: 20px;\n    bottom: auto;\n    border-top: 0 solid transparent;\n    border-right: 5px solid transparent;\n    border-bottom: 5px solid rgba(0, 0, 0, 0.75);\n    border-left: 5px solid transparent;\n  }\n\n  .control-tooltip.tooltip-right-bound[data-tooltip]:after {\n    transform: translateX(-75%);\n  }\n\n  .control-tooltip.tooltip-left-bound[data-tooltip]:before {\n    transform: translateX(100%);\n    left: 0;\n  }\n\n  .control-tooltip.tooltip-left-bound[data-tooltip]:after {\n    transform: translateX(0%);\n    left: 0;\n  }\n\n  .control-tooltip[data-tooltip]:before {\n    position: absolute;\n    bottom: 30px;\n    left: 50%;\n    pointer-events: none;\n    content: \"\";\n    border-top: 5px solid rgba(0, 0, 0, 0.75);\n    border-right: 5px solid transparent;\n    border-bottom: 0 solid transparent;\n    border-left: 5px solid transparent;\n    opacity: 0;\n    transition: opacity 250ms ease-in-out;\n    transform: translateX(-50%);\n  }\n\n  .control-tooltip[data-tooltip]:after {\n    position: absolute;\n    bottom: 35px;\n    left: 50%;\n    height: 25px;\n    padding: 5px 10px;\n    font-size: 12px;\n    line-height: 15px;\n    color: #ffffff;\n    white-space: nowrap;\n    pointer-events: none;\n    content: attr(data-tooltip);\n    background: rgba(0, 0, 0, 0.75);\n    border-radius: 6px;\n    opacity: 0;\n    transition: opacity 250ms ease-in-out;\n    transform: translateX(-50%);\n  }\n\n  .control-tooltip:hover:before, .control-tooltip:hover:after {\n    opacity: 1;\n  }\n\n  /** OVERLAYS **/\n  .overlays {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 7;\n    pointer-events: none;\n    perspective: 1000px;\n    perspective-origin: center center;\n    transform-style: preserve-3d;\n  }\n\n  .overlays .overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: initial;\n    display: initial;\n    width: 100%;\n    height: 100%;\n    overflow: initial;\n    pointer-events: all;\n    background: rgba(0, 0, 0, 0.8);\n    transition: all 250ms ease-in-out;\n  }\n\n  .overlays .overlay.hidden {\n    pointer-events: none;\n    opacity: 0;\n    transition: all 100ms ease-in-out;\n    transform: translateZ(100px);\n  }\n\n  .overlays .overlay .close {\n    position: absolute;\n    top: 15px;\n    right: 25px;\n    z-index: 2;\n    font-size: 16px;\n    color: #ffffff;\n  }\n\n  .overlays .overlay .inner {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: -ms-flexbox;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    color: #ffffff;\n    flex-flow: column nowrap;\n    justify-content: center;\n  }\n\n  .overlays .overlay .inner > * {\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-pack: center;\n    justify-content: center;\n  }\n\n  /** help **/\n  .overlays .overlay.help .inner {\n    display: flex;\n    flex-direction: row;\n    flex: 1 1 0;\n    justify-content: center;\n    overflow: auto;\n  }\n\n  .overlays .overlay.help .inner .tip {\n    display: -ms-flexbox;\n    display: flex;\n    font-size: 14px;\n    color: #cccccc;\n    text-align: center;\n    flex-direction: column;\n    flex: 1;\n    justify-content: center;\n  }\n\n  .overlays .overlay.help .tip > div {\n    min-height: 0;\n    max-height: none;\n  }\n\n  .overlays .overlay.help .tip i {\n    margin: 0 0 30px;\n    font-size: 28px;\n    color: #ffffff;\n  }\n\n  .overlays .overlay.help {\n    padding: 0 20px;\n    font-size: 18px;\n    color: #cccccc;\n    justify-content: center;\n  }\n\n  .overlays .overlay.help h2 {\n    position: relative;\n    padding-bottom: 4px;\n    margin: 0 0 4px;\n    font-size: 13px;\n    font-weight: bold;\n    text-transform: uppercase;\n    border-bottom: 1px solid #333333;\n  }\n\n  .overlays .overlay.help .section {\n    margin-bottom: 20px;\n    line-height: 1.7;\n  }\n\n  .overlays .overlay.help b {\n    display: inline-block;\n    width: 120px;\n    font-weight: bold;\n  }\n</style>\n\n<template>\n  <div class=\"model-viewer\" v-if=\"suportWebGL\">\n    <div class=\"overlays\">\n      <div class=\"overlay help\" :class=\"showHelp ? '' : 'hidden'\">\n        <a href=\"#\" class=\"close\" v-on:click=\"toggleHelp\"><i class=\"fas fa-times\"></i></a>\n        <div class=\"inner\">\n          <div class=\"tip\">\n            <div><i class=\"fas fa-sync-alt\"></i></div>\n            <div>\n              <b>Orbit around</b>\n              <div>Left mouse + drag or<br>One finger drag (touch)</div>\n            </div>\n          </div>\n          <div class=\"tip\">\n            <div><i class=\"fas fa-search-plus\"></i></div>\n            <div>\n              <b>Zoom</b>\n              <div>Middle mouse or mousewheel<br>Two-finger spread or squish (touch)</div>\n            </div>\n          </div>\n          <div class=\"tip\">\n            <div><i class=\"fas fa-arrows-alt\"></i></div>\n            <div>\n              <b>Pan</b>\n              <div>Right mouse + drag or arraow keys<br>Two fingers drag (touch)</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"webgl\">\n      <div id=\"datgui\" ref=\"datgui\"></div>\n      <canvas ref=\"canvas\"></canvas>\n      <div v-show=\"showControls\" class=\"gui enabled\">\n        <div class=\"controls\">\n          <div class=\"general-controls\">\n            <a class=\"control control-tooltip\" data-tooltip=\"Help\" v-on:click=\"toggleHelp\"\n               v-show=\"visibleControls.help\">\n              <i class=\"fas fa-question\"></i>\n            </a>\n            <a class=\"control control-tooltip\" data-tooltip=\"Download\" v-on:click=\"downloadModel\"\n               v-show=\"visibleControls.download\">\n              <i class=\"fas fa-download\"></i>\n            </a>\n            <a class=\"control control-tooltip tooltip-right-bound\" data-tooltip=\"Fullscreen\"\n               v-on:click=\"toggleFullscreen\" v-show=\"visibleControls.fullscreen\">\n              <i class=\"fas\" :class=\"fullscreen ? 'fa-compress' : 'fa-expand-arrows-alt'\"></i></a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div v-else>\n    <slot name=\"error\">\n      Your graphics card does not seem to support\n      <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>\n      Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.\n    </slot>\n  </div>\n</template>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./base-mixin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./base-mixin.vue?vue&type=template&id=255f57c2&scoped=true\"\nimport script from \"./base-mixin.vue?vue&type=script&lang=js\"\nexport * from \"./base-mixin.vue?vue&type=script&lang=js\"\nimport style0 from \"./base-mixin.vue?vue&type=style&index=0&id=255f57c2&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"255f57c2\",\n  null\n  \n)\n\nexport default component.exports","/*\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\nimport * as THREE from 'three';\r\n\r\nconst DDSLoader = function ( manager ) {\r\n\r\n\tTHREE.CompressedTextureLoader.call( this, manager );\r\n\r\n\tthis._parser = DDSLoader.parse;\r\n\r\n};\r\n\r\nDDSLoader.prototype = Object.create( THREE.CompressedTextureLoader.prototype );\r\nDDSLoader.prototype.constructor = DDSLoader;\r\n\r\nDDSLoader.parse = function ( buffer, loadMipmaps ) {\r\n\r\n\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\r\n\r\n\t// Adapted from @toji's DDS utils\r\n\t// https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js\r\n\r\n\t// All values and structures referenced from:\r\n\t// http://msdn.microsoft.com/en-us/library/bb943991.aspx/\r\n\r\n\tvar DDS_MAGIC = 0x20534444;\r\n\r\n\tvar DDSD_CAPS = 0x1,\r\n\t\tDDSD_HEIGHT = 0x2,\r\n\t\tDDSD_WIDTH = 0x4,\r\n\t\tDDSD_PITCH = 0x8,\r\n\t\tDDSD_PIXELFORMAT = 0x1000,\r\n\t\tDDSD_MIPMAPCOUNT = 0x20000,\r\n\t\tDDSD_LINEARSIZE = 0x80000,\r\n\t\tDDSD_DEPTH = 0x800000;\r\n\r\n\tvar DDSCAPS_COMPLEX = 0x8,\r\n\t\tDDSCAPS_MIPMAP = 0x400000,\r\n\t\tDDSCAPS_TEXTURE = 0x1000;\r\n\r\n\tvar DDSCAPS2_CUBEMAP = 0x200,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\r\n\t\tDDSCAPS2_VOLUME = 0x200000;\r\n\r\n\tvar DDPF_ALPHAPIXELS = 0x1,\r\n\t\tDDPF_ALPHA = 0x2,\r\n\t\tDDPF_FOURCC = 0x4,\r\n\t\tDDPF_RGB = 0x40,\r\n\t\tDDPF_YUV = 0x200,\r\n\t\tDDPF_LUMINANCE = 0x20000;\r\n\r\n\tfunction fourCCToInt32( value ) {\r\n\r\n\t\treturn value.charCodeAt( 0 ) +\r\n\t\t\t( value.charCodeAt( 1 ) << 8 ) +\r\n\t\t\t( value.charCodeAt( 2 ) << 16 ) +\r\n\t\t\t( value.charCodeAt( 3 ) << 24 );\r\n\r\n\t}\r\n\r\n\tfunction int32ToFourCC( value ) {\r\n\r\n\t\treturn String.fromCharCode(\r\n\t\t\tvalue & 0xff,\r\n\t\t\t( value >> 8 ) & 0xff,\r\n\t\t\t( value >> 16 ) & 0xff,\r\n\t\t\t( value >> 24 ) & 0xff\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tfunction loadARGBMip( buffer, dataOffset, width, height ) {\r\n\r\n\t\tvar dataLength = width * height * 4;\r\n\t\tvar srcBuffer = new Uint8Array( buffer, dataOffset, dataLength );\r\n\t\tvar byteArray = new Uint8Array( dataLength );\r\n\t\tvar dst = 0;\r\n\t\tvar src = 0;\r\n\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\r\n\t\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\r\n\t\t\t\tvar b = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar g = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar r = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar a = srcBuffer[ src ]; src ++;\r\n\t\t\t\tbyteArray[ dst ] = r; dst ++;\t//r\r\n\t\t\t\tbyteArray[ dst ] = g; dst ++;\t//g\r\n\t\t\t\tbyteArray[ dst ] = b; dst ++;\t//b\r\n\t\t\t\tbyteArray[ dst ] = a; dst ++;\t//a\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn byteArray;\r\n\r\n\t}\r\n\r\n\tvar FOURCC_DXT1 = fourCCToInt32( \"DXT1\" );\r\n\tvar FOURCC_DXT3 = fourCCToInt32( \"DXT3\" );\r\n\tvar FOURCC_DXT5 = fourCCToInt32( \"DXT5\" );\r\n\tvar FOURCC_ETC1 = fourCCToInt32( \"ETC1\" );\r\n\r\n\tvar headerLengthInt = 31; // The header length in 32 bit ints\r\n\r\n\t// Offsets into the header array\r\n\r\n\tvar off_magic = 0;\r\n\r\n\tvar off_size = 1;\r\n\tvar off_flags = 2;\r\n\tvar off_height = 3;\r\n\tvar off_width = 4;\r\n\r\n\tvar off_mipmapCount = 7;\r\n\r\n\tvar off_pfFlags = 20;\r\n\tvar off_pfFourCC = 21;\r\n\tvar off_RGBBitCount = 22;\r\n\tvar off_RBitMask = 23;\r\n\tvar off_GBitMask = 24;\r\n\tvar off_BBitMask = 25;\r\n\tvar off_ABitMask = 26;\r\n\r\n\tvar off_caps = 27;\r\n\tvar off_caps2 = 28;\r\n\tvar off_caps3 = 29;\r\n\tvar off_caps4 = 30;\r\n\r\n\t// Parse header\r\n\r\n\tvar header = new Int32Array( buffer, 0, headerLengthInt );\r\n\r\n\tif ( header[ off_magic ] !== DDS_MAGIC ) {\r\n\r\n\t\tconsole.error( 'THREE.DDSLoader.parse: Invalid magic number in DDS header.' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tif ( ! header[ off_pfFlags ] & DDPF_FOURCC ) {\r\n\r\n\t\tconsole.error( 'THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code.' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tvar blockBytes;\r\n\r\n\tvar fourCC = header[ off_pfFourCC ];\r\n\r\n\tvar isRGBAUncompressed = false;\r\n\r\n\tswitch ( fourCC ) {\r\n\r\n\t\tcase FOURCC_DXT1:\r\n\r\n\t\t\tblockBytes = 8;\r\n\t\t\tdds.format = THREE.RGB_S3TC_DXT1_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_DXT3:\r\n\r\n\t\t\tblockBytes = 16;\r\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT3_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_DXT5:\r\n\r\n\t\t\tblockBytes = 16;\r\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT5_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_ETC1:\r\n\r\n\t\t\tblockBytes = 8;\r\n\t\t\tdds.format = THREE.RGB_ETC1_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\r\n\t\t\tif ( header[ off_RGBBitCount ] === 32\r\n\t\t\t\t&& header[ off_RBitMask ] & 0xff0000\r\n\t\t\t\t&& header[ off_GBitMask ] & 0xff00\r\n\t\t\t\t&& header[ off_BBitMask ] & 0xff\r\n\t\t\t\t&& header[ off_ABitMask ] & 0xff000000 ) {\r\n\r\n\t\t\t\tisRGBAUncompressed = true;\r\n\t\t\t\tblockBytes = 64;\r\n\t\t\t\tdds.format = THREE.RGBAFormat;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC( fourCC ) );\r\n\t\t\t\treturn dds;\r\n\r\n\t\t\t}\r\n\r\n\t}\r\n\r\n\tdds.mipmapCount = 1;\r\n\r\n\tif ( header[ off_flags ] & DDSD_MIPMAPCOUNT && loadMipmaps !== false ) {\r\n\r\n\t\tdds.mipmapCount = Math.max( 1, header[ off_mipmapCount ] );\r\n\r\n\t}\r\n\r\n\tvar caps2 = header[ off_caps2 ];\r\n\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\r\n\tif ( dds.isCubemap && (\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEX ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEY ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ )\r\n\t) ) {\r\n\r\n\t\tconsole.error( 'THREE.DDSLoader.parse: Incomplete cubemap faces' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tdds.width = header[ off_width ];\r\n\tdds.height = header[ off_height ];\r\n\r\n\tvar dataOffset = header[ off_size ] + 4;\r\n\r\n\t// Extract mipmaps buffers\r\n\r\n\tvar faces = dds.isCubemap ? 6 : 1;\r\n\r\n\tfor ( var face = 0; face < faces; face ++ ) {\r\n\r\n\t\tvar width = dds.width;\r\n\t\tvar height = dds.height;\r\n\r\n\t\tfor ( var i = 0; i < dds.mipmapCount; i ++ ) {\r\n\r\n\t\t\tif ( isRGBAUncompressed ) {\r\n\r\n\t\t\t\tvar byteArray = loadARGBMip( buffer, dataOffset, width, height );\r\n\t\t\t\tvar dataLength = byteArray.length;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar dataLength = Math.max( 4, width ) / 4 * Math.max( 4, height ) / 4 * blockBytes;\r\n\t\t\t\tvar byteArray = new Uint8Array( buffer, dataOffset, dataLength );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\r\n\t\t\tdds.mipmaps.push( mipmap );\r\n\r\n\t\t\tdataOffset += dataLength;\r\n\r\n\t\t\twidth = Math.max( width >> 1, 1 );\r\n\t\t\theight = Math.max( height >> 1, 1 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn dds;\r\n\r\n};\r\n\r\nexport { DDSLoader }\r\n","// Copyright 2016 The Draco Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n'use strict';\nimport * as THREE from 'three';\n\n/**\n * @param {THREE.LoadingManager} manager\n */\nconst DRACOLoader = function(manager) {\n    this.timeLoaded = 0;\n    this.manager = manager || THREE.DefaultLoadingManager;\n    this.materials = null;\n    this.verbosity = 0;\n    this.attributeOptions = {};\n    this.drawMode = THREE.TrianglesDrawMode;\n    // Native Draco attribute type to Three.JS attribute type.\n    this.nativeAttributeMap = {\n      'position' : 'POSITION',\n      'normal' : 'NORMAL',\n      'color' : 'COLOR',\n      'uv' : 'TEX_COORD'\n    };\n};\n\nDRACOLoader.prototype = {\n\n    constructor: DRACOLoader,\n\n    load: function(url, onLoad, onProgress, onError) {\n        var scope = this;\n        var loader = new THREE.FileLoader(scope.manager);\n        loader.setPath(this.path);\n        loader.setResponseType('arraybuffer');\n        loader.load(url, function(blob) {\n            scope.decodeDracoFile(blob, onLoad);\n        }, onProgress, onError);\n    },\n\n    setPath: function(value) {\n        this.path = value;\n        return this;\n    },\n\n    setVerbosity: function(level) {\n        this.verbosity = level;\n        return this;\n    },\n\n    /**\n     *  Sets desired mode for generated geometry indices.\n     *  Can be either:\n     *      THREE.TrianglesDrawMode\n     *      THREE.TriangleStripDrawMode\n     */\n    setDrawMode: function(drawMode) {\n        this.drawMode = drawMode;\n        return this;\n    },\n\n    /**\n     * Skips dequantization for a specific attribute.\n     * |attributeName| is the THREE.js name of the given attribute type.\n     * The only currently supported |attributeName| is 'position', more may be\n     * added in future.\n     */\n    setSkipDequantization: function(attributeName, skip) {\n        var skipDequantization = true;\n        if (typeof skip !== 'undefined')\n          skipDequantization = skip;\n        this.getAttributeOptions(attributeName).skipDequantization =\n            skipDequantization;\n        return this;\n    },\n\n    /**\n     * |attributeUniqueIdMap| specifies attribute unique id for an attribute in\n     * the geometry to be decoded. The name of the attribute must be one of the\n     * supported attribute type in Three.JS, including:\n     *     'position',\n     *     'color',\n     *     'normal',\n     *     'uv',\n     *     'uv2',\n     *     'skinIndex',\n     *     'skinWeight'.\n     * The format is:\n     *     attributeUniqueIdMap[attributeName] = attributeId\n     */\n    decodeDracoFile: function(rawBuffer, callback, attributeUniqueIdMap,\n                              attributeTypeMap) {\n      var scope = this;\n      DRACOLoader.getDecoderModule()\n          .then( function ( module ) {\n            scope.decodeDracoFileInternal( rawBuffer, module.decoder, callback,\n              attributeUniqueIdMap || {}, attributeTypeMap || {});\n          });\n    },\n\n    decodeDracoFileInternal: function(rawBuffer, dracoDecoder, callback,\n                                      attributeUniqueIdMap, attributeTypeMap) {\n      /*\n       * Here is how to use Draco Javascript decoder and get the geometry.\n       */\n      var buffer = new dracoDecoder.DecoderBuffer();\n      buffer.Init(new Int8Array(rawBuffer), rawBuffer.byteLength);\n      var decoder = new dracoDecoder.Decoder();\n\n      /*\n       * Determine what type is this file: mesh or point cloud.\n       */\n      var geometryType = decoder.GetEncodedGeometryType(buffer);\n      if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n        if (this.verbosity > 0) {\n          console.log('Loaded a mesh.');\n        }\n      } else if (geometryType == dracoDecoder.POINT_CLOUD) {\n        if (this.verbosity > 0) {\n          console.log('Loaded a point cloud.');\n        }\n      } else {\n        var errorMsg = 'DRACOLoader: Unknown geometry type.'\n        console.error(errorMsg);\n        throw new Error(errorMsg);\n      }\n      callback(this.convertDracoGeometryTo3JS(dracoDecoder, decoder,\n          geometryType, buffer, attributeUniqueIdMap, attributeTypeMap));\n    },\n\n    addAttributeToGeometry: function(dracoDecoder, decoder, dracoGeometry,\n                                     attributeName, attributeType, attribute,\n                                     geometry, geometryBuffer) {\n      if (attribute.ptr === 0) {\n        var errorMsg = 'DRACOLoader: No attribute ' + attributeName;\n        console.error(errorMsg);\n        throw new Error(errorMsg);\n      }\n\n      var numComponents = attribute.num_components();\n      var numPoints = dracoGeometry.num_points();\n      var numValues = numPoints * numComponents;\n      var attributeData;\n      var TypedBufferAttribute;\n\n      switch ( attributeType ) {\n\n        case Float32Array:\n          attributeData = new dracoDecoder.DracoFloat32Array();\n          decoder.GetAttributeFloatForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Float32Array( numValues );\n          TypedBufferAttribute = THREE.Float32BufferAttribute;\n          break;\n\n        case Int8Array:\n          attributeData = new dracoDecoder.DracoInt8Array();\n          decoder.GetAttributeInt8ForAllPoints(\n            dracoGeometry, attribute, attributeData );\n          geometryBuffer[ attributeName ] = new Int8Array( numValues );\n          TypedBufferAttribute = THREE.Int8BufferAttribute;\n          break;\n\n        case Int16Array:\n          attributeData = new dracoDecoder.DracoInt16Array();\n          decoder.GetAttributeInt16ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Int16Array( numValues );\n          TypedBufferAttribute = THREE.Int16BufferAttribute;\n          break;\n\n        case Int32Array:\n          attributeData = new dracoDecoder.DracoInt32Array();\n          decoder.GetAttributeInt32ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Int32Array( numValues );\n          TypedBufferAttribute = THREE.Int32BufferAttribute;\n          break;\n\n        case Uint8Array:\n          attributeData = new dracoDecoder.DracoUInt8Array();\n          decoder.GetAttributeUInt8ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Uint8Array( numValues );\n          TypedBufferAttribute = THREE.Uint8BufferAttribute;\n          break;\n\n        case Uint16Array:\n          attributeData = new dracoDecoder.DracoUInt16Array();\n          decoder.GetAttributeUInt16ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Uint16Array( numValues );\n          TypedBufferAttribute = THREE.Uint16BufferAttribute;\n          break;\n\n        case Uint32Array:\n          attributeData = new dracoDecoder.DracoUInt32Array();\n          decoder.GetAttributeUInt32ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Uint32Array( numValues );\n          TypedBufferAttribute = THREE.Uint32BufferAttribute;\n          break;\n\n        default:\n          var errorMsg = 'DRACOLoader: Unexpected attribute type.';\n          console.error( errorMsg );\n          throw new Error( errorMsg );\n\n      }\n\n      // Copy data from decoder.\n      for (var i = 0; i < numValues; i++) {\n        geometryBuffer[attributeName][i] = attributeData.GetValue(i);\n      }\n      // Add attribute to THREEJS geometry for rendering.\n      geometry.addAttribute(attributeName,\n          new TypedBufferAttribute(geometryBuffer[attributeName],\n            numComponents));\n      dracoDecoder.destroy(attributeData);\n    },\n\n    convertDracoGeometryTo3JS: function(dracoDecoder, decoder, geometryType,\n                                        buffer, attributeUniqueIdMap,\n                                        attributeTypeMap) {\n        if (this.getAttributeOptions('position').skipDequantization === true) {\n          decoder.SkipAttributeTransform(dracoDecoder.POSITION);\n        }\n        var dracoGeometry;\n        var decodingStatus;\n        const start_time = performance.now();\n        if (geometryType === dracoDecoder.TRIANGULAR_MESH) {\n          dracoGeometry = new dracoDecoder.Mesh();\n          decodingStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n        } else {\n          dracoGeometry = new dracoDecoder.PointCloud();\n          decodingStatus =\n              decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n        }\n        if (!decodingStatus.ok() || dracoGeometry.ptr == 0) {\n          var errorMsg = 'DRACOLoader: Decoding failed: ';\n          errorMsg += decodingStatus.error_msg();\n          console.error(errorMsg);\n          dracoDecoder.destroy(decoder);\n          dracoDecoder.destroy(dracoGeometry);\n          throw new Error(errorMsg);\n        }\n\n        var decode_end = performance.now();\n        dracoDecoder.destroy(buffer);\n        /*\n         * Example on how to retrieve mesh and attributes.\n         */\n        var numFaces;\n        if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n          numFaces = dracoGeometry.num_faces();\n          if (this.verbosity > 0) {\n            console.log('Number of faces loaded: ' + numFaces.toString());\n          }\n        } else {\n          numFaces = 0;\n        }\n\n        var numPoints = dracoGeometry.num_points();\n        var numAttributes = dracoGeometry.num_attributes();\n        if (this.verbosity > 0) {\n          console.log('Number of points loaded: ' + numPoints.toString());\n          console.log('Number of attributes loaded: ' +\n              numAttributes.toString());\n        }\n\n        // Verify if there is position attribute.\n        var posAttId = decoder.GetAttributeId(dracoGeometry,\n                                              dracoDecoder.POSITION);\n        if (posAttId == -1) {\n          var errorMsg = 'DRACOLoader: No position attribute found.';\n          console.error(errorMsg);\n          dracoDecoder.destroy(decoder);\n          dracoDecoder.destroy(dracoGeometry);\n          throw new Error(errorMsg);\n        }\n        var posAttribute = decoder.GetAttribute(dracoGeometry, posAttId);\n\n        // Structure for converting to THREEJS geometry later.\n        var geometryBuffer = {};\n        // Import data to Three JS geometry.\n        var geometry = new THREE.BufferGeometry();\n\n        // Add native Draco attribute type to geometry.\n        for (var attributeName in this.nativeAttributeMap) {\n          // The native attribute type is only used when no unique Id is\n          // provided. For example, loading .drc files.\n          if (attributeUniqueIdMap[attributeName] === undefined) {\n            var attId = decoder.GetAttributeId(dracoGeometry,\n                dracoDecoder[this.nativeAttributeMap[attributeName]]);\n            if (attId !== -1) {\n              if (this.verbosity > 0) {\n                console.log('Loaded ' + attributeName + ' attribute.');\n              }\n              var attribute = decoder.GetAttribute(dracoGeometry, attId);\n              this.addAttributeToGeometry(dracoDecoder, decoder, dracoGeometry,\n                  attributeName, Float32Array, attribute, geometry, geometryBuffer);\n            }\n          }\n        }\n\n        // Add attributes of user specified unique id. E.g. GLTF models.\n        for (var attributeName in attributeUniqueIdMap) {\n          var attributeType = attributeTypeMap[attributeName] || Float32Array;\n          var attributeId = attributeUniqueIdMap[attributeName];\n          var attribute = decoder.GetAttributeByUniqueId(dracoGeometry,\n                                                         attributeId);\n          this.addAttributeToGeometry(dracoDecoder, decoder, dracoGeometry,\n              attributeName, attributeType, attribute, geometry, geometryBuffer);\n        }\n\n        // For mesh, we need to generate the faces.\n        if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n          if (this.drawMode === THREE.TriangleStripDrawMode) {\n            var stripsArray = new dracoDecoder.DracoInt32Array();\n            var numStrips = decoder.GetTriangleStripsFromMesh(\n                dracoGeometry, stripsArray);\n            geometryBuffer.indices = new Uint32Array(stripsArray.size());\n            for (var i = 0; i < stripsArray.size(); ++i) {\n              geometryBuffer.indices[i] = stripsArray.GetValue(i);\n            }\n            dracoDecoder.destroy(stripsArray);\n          } else {\n            var numIndices = numFaces * 3;\n            geometryBuffer.indices = new Uint32Array(numIndices);\n            var ia = new dracoDecoder.DracoInt32Array();\n            for (var i = 0; i < numFaces; ++i) {\n              decoder.GetFaceFromMesh(dracoGeometry, i, ia);\n              var index = i * 3;\n              geometryBuffer.indices[index] = ia.GetValue(0);\n              geometryBuffer.indices[index + 1] = ia.GetValue(1);\n              geometryBuffer.indices[index + 2] = ia.GetValue(2);\n            }\n            dracoDecoder.destroy(ia);\n         }\n        }\n\n        geometry.drawMode = this.drawMode;\n        if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n          geometry.setIndex(new(geometryBuffer.indices.length > 65535 ?\n                THREE.Uint32BufferAttribute : THREE.Uint16BufferAttribute)\n              (geometryBuffer.indices, 1));\n        }\n        var posTransform = new dracoDecoder.AttributeQuantizationTransform();\n        if (posTransform.InitFromAttribute(posAttribute)) {\n          // Quantized attribute. Store the quantization parameters into the\n          // THREE.js attribute.\n          geometry.attributes['position'].isQuantized = true;\n          geometry.attributes['position'].maxRange = posTransform.range();\n          geometry.attributes['position'].numQuantizationBits =\n              posTransform.quantization_bits();\n          geometry.attributes['position'].minValues = new Float32Array(3);\n          for (var i = 0; i < 3; ++i) {\n            geometry.attributes['position'].minValues[i] =\n                posTransform.min_value(i);\n          }\n        }\n        dracoDecoder.destroy(posTransform);\n        dracoDecoder.destroy(decoder);\n        dracoDecoder.destroy(dracoGeometry);\n\n        this.decode_time = decode_end - start_time;\n        this.import_time = performance.now() - decode_end;\n\n        if (this.verbosity > 0) {\n          console.log('Decode time: ' + this.decode_time);\n          console.log('Import time: ' + this.import_time);\n        }\n        return geometry;\n    },\n\n    isVersionSupported: function(version, callback) {\n        DRACOLoader.getDecoderModule()\n            .then( function ( module ) {\n              callback( module.decoder.isVersionSupported( version ) );\n            });\n    },\n\n    getAttributeOptions: function(attributeName) {\n        if (typeof this.attributeOptions[attributeName] === 'undefined')\n          this.attributeOptions[attributeName] = {};\n        return this.attributeOptions[attributeName];\n    }\n};\n\nDRACOLoader.decoderPath = './';\nDRACOLoader.decoderConfig = {};\nDRACOLoader.decoderModulePromise = null;\n\n/**\n * Sets the base path for decoder source files.\n * @param {string} path\n */\nDRACOLoader.setDecoderPath = function ( path ) {\n  DRACOLoader.decoderPath = path;\n};\n\n/**\n * Sets decoder configuration and releases singleton decoder module. Module\n * will be recreated with the next decoding call.\n * @param {Object} config\n */\nDRACOLoader.setDecoderConfig = function ( config ) {\n  var wasmBinary = DRACOLoader.decoderConfig.wasmBinary;\n  DRACOLoader.decoderConfig = config || {};\n  DRACOLoader.releaseDecoderModule();\n\n  // Reuse WASM binary.\n  if ( wasmBinary ) DRACOLoader.decoderConfig.wasmBinary = wasmBinary;\n};\n\n/**\n * Releases the singleton DracoDecoderModule instance. Module will be recreated\n * with the next decoding call.\n */\nDRACOLoader.releaseDecoderModule = function () {\n  DRACOLoader.decoderModulePromise = null;\n};\n\n/**\n * Gets WebAssembly or asm.js singleton instance of DracoDecoderModule\n * after testing for browser support. Returns Promise that resolves when\n * module is available.\n * @return {Promise<{decoder: DracoDecoderModule}>}\n */\nDRACOLoader.getDecoderModule = function () {\n  var scope = this;\n  var path = DRACOLoader.decoderPath;\n  var config = DRACOLoader.decoderConfig;\n  var promise = DRACOLoader.decoderModulePromise;\n\n  if ( promise ) return promise;\n\n  // Load source files.\n  if ( typeof DracoDecoderModule !== 'undefined' ) {\n    // Loaded externally.\n    promise = Promise.resolve();\n  } else if ( typeof WebAssembly !== 'object' || config.type === 'js' ) {\n    // Load with asm.js.\n    promise = DRACOLoader._loadScript( path + 'draco_decoder.js' );\n  } else {\n    // Load with WebAssembly.\n    config.wasmBinaryFile = path + 'draco_decoder.wasm';\n    promise = DRACOLoader._loadScript( path + 'draco_wasm_wrapper.js' )\n        .then( function () {\n          return DRACOLoader._loadArrayBuffer( config.wasmBinaryFile );\n        } )\n        .then( function ( wasmBinary ) {\n          config.wasmBinary = wasmBinary;\n        } );\n  }\n\n  // Wait for source files, then create and return a decoder.\n  promise = promise.then( function () {\n    return new Promise( function ( resolve ) {\n      config.onModuleLoaded = function ( decoder ) {\n        scope.timeLoaded = performance.now();\n        // Module is Promise-like. Wrap before resolving to avoid loop.\n        resolve( { decoder: decoder } );\n      };\n      DracoDecoderModule( config );\n    } );\n  } );\n\n  DRACOLoader.decoderModulePromise = promise;\n  return promise;\n};\n\n/**\n * @param {string} src\n * @return {Promise}\n */\nDRACOLoader._loadScript = function ( src ) {\n  var prevScript = document.getElementById( 'decoder_script' );\n  if ( prevScript !== null ) {\n    prevScript.parentNode.removeChild( prevScript );\n  }\n  var head = document.getElementsByTagName( 'head' )[ 0 ];\n  var script = document.createElement( 'script' );\n  script.id = 'decoder_script';\n  script.type = 'text/javascript';\n  script.src = src;\n  return new Promise( function ( resolve ) {\n    script.onload = resolve;\n    head.appendChild( script );\n  });\n};\n\n/**\n * @param {string} src\n * @return {Promise}\n */\nDRACOLoader._loadArrayBuffer = function ( src ) {\n  var loader = new THREE.FileLoader();\n  loader.setResponseType( 'arraybuffer' );\n  return new Promise( function( resolve, reject ) {\n    loader.load( src, resolve, undefined, reject );\n  });\n};\n\nexport { DRACOLoader }\n","/**\r\n * @author Rich Tibbett / https://github.com/richtr\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Tony Parisi / http://www.tonyparisi.com/\r\n * @author Takahiro / https://github.com/takahirox\r\n * @author Don McCurdy / https://www.donmccurdy.com\r\n */\r\nimport * as THREE from 'three';\r\nimport { DDSLoader } from './DDSLoader'\r\nimport { BufferGeometryUtils } from '../utils'\r\n\r\nconst GLTFLoader = ( function () {\r\n\r\n\tfunction GLTFLoader( manager ) {\r\n\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\tthis.dracoLoader = null;\r\n\r\n\t}\r\n\r\n\tGLTFLoader.prototype = {\r\n\r\n\t\tconstructor: GLTFLoader,\r\n\r\n\t\tcrossOrigin: 'anonymous',\r\n\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tvar path = this.path !== undefined ? this.path : THREE.LoaderUtils.extractUrlBase( url );\r\n\r\n\t\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\r\n\t\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\t\tloader.load( url, function ( data ) {\r\n\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\tscope.parse( data, path, onLoad, onError );\r\n\r\n\t\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\t\tif ( onError !== undefined ) {\r\n\r\n\t\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthrow e;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t},\r\n\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\t\tthis.crossOrigin = value;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetPath: function ( value ) {\r\n\r\n\t\t\tthis.path = value;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetDRACOLoader: function ( dracoLoader ) {\r\n\r\n\t\t\tthis.dracoLoader = dracoLoader;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tparse: function ( data, path, onLoad, onError ) {\r\n\r\n\t\t\tvar content;\r\n\t\t\tvar extensions = {};\r\n\r\n\t\t\tif ( typeof data === 'string' ) {\r\n\r\n\t\t\t\tcontent = data;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar magic = THREE.LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\r\n\r\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\r\n\r\n\t\t\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t\t\tif ( onError ) onError( error );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcontent = THREE.LoaderUtils.decodeText( new Uint8Array( data ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar json = JSON.parse( content );\r\n\r\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\r\n\r\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.' ) );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.extensionsUsed ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\r\n\r\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\r\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\r\n\r\n\t\t\t\t\tswitch ( extensionName ) {\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFLightsExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\r\n\t\t\t\t\t\t\textensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] = new GLTFTextureDDSExtension();\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 ) {\r\n\r\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar parser = new GLTFParser( json, extensions, {\r\n\r\n\t\t\t\tpath: path || this.path || '',\r\n\t\t\t\tcrossOrigin: this.crossOrigin,\r\n\t\t\t\tmanager: this.manager\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tparser.parse( function ( scene, scenes, cameras, animations, json ) {\r\n\r\n\t\t\t\tvar glTF = {\r\n\t\t\t\t\tscene: scene,\r\n\t\t\t\t\tscenes: scenes,\r\n\t\t\t\t\tcameras: cameras,\r\n\t\t\t\t\tanimations: animations,\r\n\t\t\t\t\tasset: json.asset,\r\n\t\t\t\t\tparser: parser,\r\n\t\t\t\t\tuserData: {}\r\n\t\t\t\t};\r\n\r\n\t\t\t\taddUnknownExtensionsToUserData( extensions, glTF, json );\r\n\r\n\t\t\t\tonLoad( glTF );\r\n\r\n\t\t\t}, onError );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t/* GLTFREGISTRY */\r\n\r\n\tfunction GLTFRegistry() {\r\n\r\n\t\tvar objects = {};\r\n\r\n\t\treturn\t{\r\n\r\n\t\t\tget: function ( key ) {\r\n\r\n\t\t\t\treturn objects[ key ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tadd: function ( key, object ) {\r\n\r\n\t\t\t\tobjects[ key ] = object;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tremove: function ( key ) {\r\n\r\n\t\t\t\tdelete objects[ key ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tremoveAll: function () {\r\n\r\n\t\t\t\tobjects = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*********************************/\r\n\t/********** EXTENSIONS ***********/\r\n\t/*********************************/\r\n\r\n\tvar EXTENSIONS = {\r\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\r\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\r\n\t\tKHR_LIGHTS: 'KHR_lights',\r\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\r\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\r\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\r\n\t};\r\n\r\n\t/**\r\n\t * DDS Texture Extension\r\n\t *\r\n\t * Specification:\r\n\t * https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\r\n\t *\r\n\t */\r\n\tfunction GLTFTextureDDSExtension() {\r\n\r\n\t\tif ( ! DDSLoader ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\r\n\t\tthis.ddsLoader = new DDSLoader();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Lights Extension\r\n\t *\r\n\t * Specification: PENDING\r\n\t */\r\n\tfunction GLTFLightsExtension( json ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS;\r\n\r\n\t\tthis.lights = {};\r\n\r\n\t\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS ] ) || {};\r\n\t\tvar lights = extension.lights || {};\r\n\r\n\t\tfor ( var lightId in lights ) {\r\n\r\n\t\t\tvar light = lights[ lightId ];\r\n\t\t\tvar lightNode;\r\n\r\n\t\t\tvar color = new THREE.Color().fromArray( light.color );\r\n\r\n\t\t\tswitch ( light.type ) {\r\n\r\n\t\t\t\tcase 'directional':\r\n\t\t\t\t\tlightNode = new THREE.DirectionalLight( color );\r\n\t\t\t\t\tlightNode.target.position.set( 0, 0, 1 );\r\n\t\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'point':\r\n\t\t\t\t\tlightNode = new THREE.PointLight( color );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'spot':\r\n\t\t\t\t\tlightNode = new THREE.SpotLight( color );\r\n\t\t\t\t\t// Handle spotlight properties.\r\n\t\t\t\t\tlight.spot = light.spot || {};\r\n\t\t\t\t\tlight.spot.innerConeAngle = light.spot.innerConeAngle !== undefined ? light.spot.innerConeAngle : 0;\r\n\t\t\t\t\tlight.spot.outerConeAngle = light.spot.outerConeAngle !== undefined ? light.spot.outerConeAngle : Math.PI / 4.0;\r\n\t\t\t\t\tlightNode.angle = light.spot.outerConeAngle;\r\n\t\t\t\t\tlightNode.penumbra = 1.0 - light.spot.innerConeAngle / light.spot.outerConeAngle;\r\n\t\t\t\t\tlightNode.target.position.set( 0, 0, 1 );\r\n\t\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ambient':\r\n\t\t\t\t\tlightNode = new THREE.AmbientLight( color );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( lightNode ) {\r\n\r\n\t\t\t\tlightNode.decay = 2;\r\n\r\n\t\t\t\tif ( light.intensity !== undefined ) {\r\n\r\n\t\t\t\t\tlightNode.intensity = light.intensity;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlightNode.name = light.name || ( 'light_' + lightId );\r\n\t\t\t\tthis.lights[ lightId ] = lightNode;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Unlit Materials Extension (pending)\r\n\t *\r\n\t * PR: https://github.com/KhronosGroup/glTF/pull/1163\r\n\t */\r\n\tfunction GLTFMaterialsUnlitExtension( json ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\r\n\r\n\t}\r\n\r\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function ( material ) {\r\n\r\n\t\treturn THREE.MeshBasicMaterial;\r\n\r\n\t};\r\n\r\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, material, parser ) {\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tmaterialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\tvar metallicRoughness = material.pbrMetallicRoughness;\r\n\r\n\t\tif ( metallicRoughness ) {\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.fromArray( array );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t};\r\n\r\n\t/* BINARY EXTENSION */\r\n\r\n\tvar BINARY_EXTENSION_BUFFER_NAME = 'binary_glTF';\r\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\r\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\r\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\r\n\r\n\tfunction GLTFBinaryExtension( data ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\r\n\t\tthis.content = null;\r\n\t\tthis.body = null;\r\n\r\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\r\n\r\n\t\tthis.header = {\r\n\t\t\tmagic: THREE.LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\r\n\t\t\tversion: headerView.getUint32( 4, true ),\r\n\t\t\tlength: headerView.getUint32( 8, true )\r\n\t\t};\r\n\r\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\r\n\r\n\t\t} else if ( this.header.version < 2.0 ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\r\n\t\tvar chunkIndex = 0;\r\n\r\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\r\n\r\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\r\n\r\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\r\n\t\t\t\tthis.content = THREE.LoaderUtils.decodeText( contentArray );\r\n\r\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\r\n\r\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\r\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Clients must ignore chunks with unknown types.\r\n\r\n\t\t\tchunkIndex += chunkLength;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.content === null ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * DRACO Mesh Compression Extension\r\n\t *\r\n\t * Specification: https://github.com/KhronosGroup/glTF/pull/874\r\n\t */\r\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\r\n\r\n\t\tif ( ! dracoLoader ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\r\n\t\tthis.json = json;\r\n\t\tthis.dracoLoader = dracoLoader;\r\n\r\n\t}\r\n\r\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\r\n\r\n\t\tvar json = this.json;\r\n\t\tvar dracoLoader = this.dracoLoader;\r\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\r\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\r\n\t\tvar threeAttributeMap = {};\r\n\t\tvar attributeNormalizedMap = {};\r\n\t\tvar attributeTypeMap = {};\r\n\r\n\t\tfor ( var attributeName in gltfAttributeMap ) {\r\n\r\n\t\t\tif ( ! ( attributeName in ATTRIBUTES ) ) continue;\r\n\r\n\t\t\tthreeAttributeMap[ ATTRIBUTES[ attributeName ] ] = gltfAttributeMap[ attributeName ];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( attributeName in primitive.attributes ) {\r\n\r\n\t\t\tif ( ATTRIBUTES[ attributeName ] !== undefined && gltfAttributeMap[ attributeName ] !== undefined ) {\r\n\r\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\r\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t\tattributeTypeMap[ ATTRIBUTES[ attributeName ] ] = componentType;\r\n\t\t\t\tattributeNormalizedMap[ ATTRIBUTES[ attributeName ] ] = accessorDef.normalized === true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\r\n\r\n\t\t\treturn new Promise( function ( resolve ) {\r\n\r\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\r\n\r\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\r\n\r\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\r\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\r\n\r\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve( geometry );\r\n\r\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specular-Glossiness Extension\r\n\t *\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\r\n\t */\r\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\r\n\r\n\t\treturn {\r\n\r\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\r\n\r\n\t\t\tspecularGlossinessParams: [\r\n\t\t\t\t'color',\r\n\t\t\t\t'map',\r\n\t\t\t\t'lightMap',\r\n\t\t\t\t'lightMapIntensity',\r\n\t\t\t\t'aoMap',\r\n\t\t\t\t'aoMapIntensity',\r\n\t\t\t\t'emissive',\r\n\t\t\t\t'emissiveIntensity',\r\n\t\t\t\t'emissiveMap',\r\n\t\t\t\t'bumpMap',\r\n\t\t\t\t'bumpScale',\r\n\t\t\t\t'normalMap',\r\n\t\t\t\t'displacementMap',\r\n\t\t\t\t'displacementScale',\r\n\t\t\t\t'displacementBias',\r\n\t\t\t\t'specularMap',\r\n\t\t\t\t'specular',\r\n\t\t\t\t'glossinessMap',\r\n\t\t\t\t'glossiness',\r\n\t\t\t\t'alphaMap',\r\n\t\t\t\t'envMap',\r\n\t\t\t\t'envMapIntensity',\r\n\t\t\t\t'refractionRatio',\r\n\t\t\t],\r\n\r\n\t\t\tgetMaterialType: function () {\r\n\r\n\t\t\t\treturn THREE.ShaderMaterial;\r\n\r\n\t\t\t},\r\n\r\n\t\t\textendParams: function ( params, material, parser ) {\r\n\r\n\t\t\t\tvar pbrSpecularGlossiness = material.extensions[ this.name ];\r\n\r\n\t\t\t\tvar shader = THREE.ShaderLib[ 'standard' ];\r\n\r\n\t\t\t\tvar uniforms = THREE.UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\t\t\tvar specularMapParsFragmentChunk = [\r\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\r\n\t\t\t\t\t'\tuniform sampler2D specularMap;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar glossinessMapParsFragmentChunk = [\r\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\r\n\t\t\t\t\t'\tuniform sampler2D glossinessMap;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar specularMapFragmentChunk = [\r\n\t\t\t\t\t'vec3 specularFactor = specular;',\r\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\r\n\t\t\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\r\n\t\t\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\r\n\t\t\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t\t\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar glossinessMapFragmentChunk = [\r\n\t\t\t\t\t'float glossinessFactor = glossiness;',\r\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\r\n\t\t\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\r\n\t\t\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t\t\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar lightPhysicalFragmentChunk = [\r\n\t\t\t\t\t'PhysicalMaterial material;',\r\n\t\t\t\t\t'material.diffuseColor = diffuseColor.rgb;',\r\n\t\t\t\t\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\r\n\t\t\t\t\t'material.specularColor = specularFactor.rgb;',\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar fragmentShader = shader.fragmentShader\r\n\t\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\r\n\t\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\r\n\t\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\r\n\r\n\t\t\t\tdelete uniforms.roughness;\r\n\t\t\t\tdelete uniforms.metalness;\r\n\t\t\t\tdelete uniforms.roughnessMap;\r\n\t\t\t\tdelete uniforms.metalnessMap;\r\n\r\n\t\t\t\tuniforms.specular = { value: new THREE.Color().setHex( 0x111111 ) };\r\n\t\t\t\tuniforms.glossiness = { value: 0.5 };\r\n\t\t\t\tuniforms.specularMap = { value: null };\r\n\t\t\t\tuniforms.glossinessMap = { value: null };\r\n\r\n\t\t\t\tparams.vertexShader = shader.vertexShader;\r\n\t\t\t\tparams.fragmentShader = fragmentShader;\r\n\t\t\t\tparams.uniforms = uniforms;\r\n\t\t\t\tparams.defines = { 'STANDARD': '' };\r\n\r\n\t\t\t\tparams.color = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\t\t\t\tparams.opacity = 1.0;\r\n\r\n\t\t\t\tvar pending = [];\r\n\r\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\r\n\r\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\r\n\r\n\t\t\t\t\tparams.color.fromArray( array );\r\n\t\t\t\t\tparams.opacity = array[ 3 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\r\n\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'map', pbrSpecularGlossiness.diffuseTexture.index ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparams.emissive = new THREE.Color( 0.0, 0.0, 0.0 );\r\n\t\t\t\tparams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\r\n\t\t\t\tparams.specular = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\r\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\r\n\r\n\t\t\t\t\tparams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\r\n\r\n\t\t\t\t\tvar specGlossIndex = pbrSpecularGlossiness.specularGlossinessTexture.index;\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'glossinessMap', specGlossIndex ) );\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'specularMap', specGlossIndex ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn Promise.all( pending );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tcreateMaterial: function ( params ) {\r\n\r\n\t\t\t\t// setup material properties based on MeshStandardMaterial for Specular-Glossiness\r\n\r\n\t\t\t\tvar material = new THREE.ShaderMaterial( {\r\n\t\t\t\t\tdefines: params.defines,\r\n\t\t\t\t\tvertexShader: params.vertexShader,\r\n\t\t\t\t\tfragmentShader: params.fragmentShader,\r\n\t\t\t\t\tuniforms: params.uniforms,\r\n\t\t\t\t\tfog: true,\r\n\t\t\t\t\tlights: true,\r\n\t\t\t\t\topacity: params.opacity,\r\n\t\t\t\t\ttransparent: params.transparent\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tmaterial.isGLTFSpecularGlossinessMaterial = true;\r\n\r\n\t\t\t\tmaterial.color = params.color;\r\n\r\n\t\t\t\tmaterial.map = params.map === undefined ? null : params.map;\r\n\r\n\t\t\t\tmaterial.lightMap = null;\r\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.aoMap = params.aoMap === undefined ? null : params.aoMap;\r\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.emissive = params.emissive;\r\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\r\n\t\t\t\tmaterial.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;\r\n\r\n\t\t\t\tmaterial.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;\r\n\t\t\t\tmaterial.bumpScale = 1;\r\n\r\n\t\t\t\tmaterial.normalMap = params.normalMap === undefined ? null : params.normalMap;\r\n\t\t\t\tif ( params.normalScale ) material.normalScale = params.normalScale;\r\n\r\n\t\t\t\tmaterial.displacementMap = null;\r\n\t\t\t\tmaterial.displacementScale = 1;\r\n\t\t\t\tmaterial.displacementBias = 0;\r\n\r\n\t\t\t\tmaterial.specularMap = params.specularMap === undefined ? null : params.specularMap;\r\n\t\t\t\tmaterial.specular = params.specular;\r\n\r\n\t\t\t\tmaterial.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;\r\n\t\t\t\tmaterial.glossiness = params.glossiness;\r\n\r\n\t\t\t\tmaterial.alphaMap = null;\r\n\r\n\t\t\t\tmaterial.envMap = params.envMap === undefined ? null : params.envMap;\r\n\t\t\t\tmaterial.envMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.refractionRatio = 0.98;\r\n\r\n\t\t\t\tmaterial.extensions.derivatives = true;\r\n\r\n\t\t\t\treturn material;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can\r\n\t\t\t * copy only properties it knows about or inherits, and misses many properties that would\r\n\t\t\t * normally be defined by MeshStandardMaterial.\r\n\t\t\t *\r\n\t\t\t * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of\r\n\t\t\t * loading a glTF model, but cloning later (e.g. by the user) would require these changes\r\n\t\t\t * AND also updating `.onBeforeRender` on the parent mesh.\r\n\t\t\t *\r\n\t\t\t * @param  {THREE.ShaderMaterial} source\r\n\t\t\t * @return {THREE.ShaderMaterial}\r\n\t\t\t */\r\n\t\t\tcloneMaterial: function ( source ) {\r\n\r\n\t\t\t\tvar target = source.clone();\r\n\r\n\t\t\t\ttarget.isGLTFSpecularGlossinessMaterial = true;\r\n\r\n\t\t\t\tvar params = this.specularGlossinessParams;\r\n\r\n\t\t\t\tfor ( var i = 0, il = params.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\ttarget[ params[ i ] ] = source[ params[ i ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn target;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t// Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.\r\n\t\t\trefreshUniforms: function ( renderer, scene, camera, geometry, material, group ) {\r\n\r\n\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial !== true ) {\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uniforms = material.uniforms;\r\n\t\t\t\tvar defines = material.defines;\r\n\r\n\t\t\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t\t\tuniforms.map.value = material.map;\r\n\t\t\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t\t\t// uv repeat and offset setting priorities\r\n\t\t\t\t// 1. color map\r\n\t\t\t\t// 2. specular map\r\n\t\t\t\t// 3. normal map\r\n\t\t\t\t// 4. bump map\r\n\t\t\t\t// 5. alpha map\r\n\t\t\t\t// 6. emissive map\r\n\r\n\t\t\t\tvar uvScaleMap;\r\n\r\n\t\t\t\tif ( material.map ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t\t\t} else if ( material.glossinessMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.glossinessMap;\r\n\r\n\t\t\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\t\t\t// backwards compatibility\r\n\t\t\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuniforms.envMap.value = material.envMap;\r\n\t\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\t\t\t\tuniforms.flipEnvMap.value = ( material.envMap && material.envMap.isCubeTexture ) ? - 1 : 1;\r\n\r\n\t\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t\t\t\tuniforms.specular.value.copy( material.specular );\r\n\t\t\t\tuniforms.glossiness.value = material.glossiness;\r\n\r\n\t\t\t\tuniforms.glossinessMap.value = material.glossinessMap;\r\n\r\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\r\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t\t\tif ( uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined ) {\r\n\r\n\t\t\t\t\tdefines.USE_GLOSSINESSMAP = '';\r\n\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\r\n\t\t\t\t\tdefines.USE_ROUGHNESSMAP = '';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined ) {\r\n\r\n\t\t\t\t\tdelete defines.USE_GLOSSINESSMAP;\r\n\t\t\t\t\tdelete defines.USE_ROUGHNESSMAP;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*********************************/\r\n\t/********** INTERPOLATION ********/\r\n\t/*********************************/\r\n\r\n\t// Spline Interpolation\r\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\r\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\t\tTHREE.Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\t}\r\n\r\n\tGLTFCubicSplineInterpolant.prototype = Object.create( THREE.Interpolant.prototype );\r\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer;\r\n\t\tvar values = this.sampleValues;\r\n\t\tvar stride = this.valueSize;\r\n\r\n\t\tvar stride2 = stride * 2;\r\n\t\tvar stride3 = stride * 3;\r\n\r\n\t\tvar td = t1 - t0;\r\n\r\n\t\tvar p = ( t - t0 ) / td;\r\n\t\tvar pp = p * p;\r\n\t\tvar ppp = pp * p;\r\n\r\n\t\tvar offset1 = i1 * stride3;\r\n\t\tvar offset0 = offset1 - stride3;\r\n\r\n\t\tvar s0 = 2 * ppp - 3 * pp + 1;\r\n\t\tvar s1 = ppp - 2 * pp + p;\r\n\t\tvar s2 = - 2 * ppp + 3 * pp;\r\n\t\tvar s3 = ppp - pp;\r\n\r\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\r\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\r\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\r\n\r\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\r\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\r\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\r\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\r\n\r\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\t/*********************************/\r\n\t/********** INTERNALS ************/\r\n\t/*********************************/\r\n\r\n\t/* CONSTANTS */\r\n\r\n\tvar WEBGL_CONSTANTS = {\r\n\t\tFLOAT: 5126,\r\n\t\t//FLOAT_MAT2: 35674,\r\n\t\tFLOAT_MAT3: 35675,\r\n\t\tFLOAT_MAT4: 35676,\r\n\t\tFLOAT_VEC2: 35664,\r\n\t\tFLOAT_VEC3: 35665,\r\n\t\tFLOAT_VEC4: 35666,\r\n\t\tLINEAR: 9729,\r\n\t\tREPEAT: 10497,\r\n\t\tSAMPLER_2D: 35678,\r\n\t\tPOINTS: 0,\r\n\t\tLINES: 1,\r\n\t\tLINE_LOOP: 2,\r\n\t\tLINE_STRIP: 3,\r\n\t\tTRIANGLES: 4,\r\n\t\tTRIANGLE_STRIP: 5,\r\n\t\tTRIANGLE_FAN: 6,\r\n\t\tUNSIGNED_BYTE: 5121,\r\n\t\tUNSIGNED_SHORT: 5123\r\n\t};\r\n\r\n\tvar WEBGL_TYPE = {\r\n\t\t5126: Number,\r\n\t\t//35674: THREE.Matrix2,\r\n\t\t35675: THREE.Matrix3,\r\n\t\t35676: THREE.Matrix4,\r\n\t\t35664: THREE.Vector2,\r\n\t\t35665: THREE.Vector3,\r\n\t\t35666: THREE.Vector4,\r\n\t\t35678: THREE.Texture\r\n\t};\r\n\r\n\tvar WEBGL_COMPONENT_TYPES = {\r\n\t\t5120: Int8Array,\r\n\t\t5121: Uint8Array,\r\n\t\t5122: Int16Array,\r\n\t\t5123: Uint16Array,\r\n\t\t5125: Uint32Array,\r\n\t\t5126: Float32Array\r\n\t};\r\n\r\n\tvar WEBGL_FILTERS = {\r\n\t\t9728: THREE.NearestFilter,\r\n\t\t9729: THREE.LinearFilter,\r\n\t\t9984: THREE.NearestMipMapNearestFilter,\r\n\t\t9985: THREE.LinearMipMapNearestFilter,\r\n\t\t9986: THREE.NearestMipMapLinearFilter,\r\n\t\t9987: THREE.LinearMipMapLinearFilter\r\n\t};\r\n\r\n\tvar WEBGL_WRAPPINGS = {\r\n\t\t33071: THREE.ClampToEdgeWrapping,\r\n\t\t33648: THREE.MirroredRepeatWrapping,\r\n\t\t10497: THREE.RepeatWrapping\r\n\t};\r\n\r\n\tvar WEBGL_TEXTURE_FORMATS = {\r\n\t\t6406: THREE.AlphaFormat,\r\n\t\t6407: THREE.RGBFormat,\r\n\t\t6408: THREE.RGBAFormat,\r\n\t\t6409: THREE.LuminanceFormat,\r\n\t\t6410: THREE.LuminanceAlphaFormat\r\n\t};\r\n\r\n\tvar WEBGL_TEXTURE_DATATYPES = {\r\n\t\t5121: THREE.UnsignedByteType,\r\n\t\t32819: THREE.UnsignedShort4444Type,\r\n\t\t32820: THREE.UnsignedShort5551Type,\r\n\t\t33635: THREE.UnsignedShort565Type\r\n\t};\r\n\r\n\tvar WEBGL_SIDES = {\r\n\t\t1028: THREE.BackSide, // Culling front\r\n\t\t1029: THREE.FrontSide // Culling back\r\n\t\t//1032: THREE.NoSide   // Culling front and back, what to do?\r\n\t};\r\n\r\n\tvar WEBGL_DEPTH_FUNCS = {\r\n\t\t512: THREE.NeverDepth,\r\n\t\t513: THREE.LessDepth,\r\n\t\t514: THREE.EqualDepth,\r\n\t\t515: THREE.LessEqualDepth,\r\n\t\t516: THREE.GreaterEqualDepth,\r\n\t\t517: THREE.NotEqualDepth,\r\n\t\t518: THREE.GreaterEqualDepth,\r\n\t\t519: THREE.AlwaysDepth\r\n\t};\r\n\r\n\tvar WEBGL_BLEND_EQUATIONS = {\r\n\t\t32774: THREE.AddEquation,\r\n\t\t32778: THREE.SubtractEquation,\r\n\t\t32779: THREE.ReverseSubtractEquation\r\n\t};\r\n\r\n\tvar WEBGL_BLEND_FUNCS = {\r\n\t\t0: THREE.ZeroFactor,\r\n\t\t1: THREE.OneFactor,\r\n\t\t768: THREE.SrcColorFactor,\r\n\t\t769: THREE.OneMinusSrcColorFactor,\r\n\t\t770: THREE.SrcAlphaFactor,\r\n\t\t771: THREE.OneMinusSrcAlphaFactor,\r\n\t\t772: THREE.DstAlphaFactor,\r\n\t\t773: THREE.OneMinusDstAlphaFactor,\r\n\t\t774: THREE.DstColorFactor,\r\n\t\t775: THREE.OneMinusDstColorFactor,\r\n\t\t776: THREE.SrcAlphaSaturateFactor\r\n\t\t// The followings are not supported by Three.js yet\r\n\t\t//32769: CONSTANT_COLOR,\r\n\t\t//32770: ONE_MINUS_CONSTANT_COLOR,\r\n\t\t//32771: CONSTANT_ALPHA,\r\n\t\t//32772: ONE_MINUS_CONSTANT_COLOR\r\n\t};\r\n\r\n\tvar WEBGL_TYPE_SIZES = {\r\n\t\t'SCALAR': 1,\r\n\t\t'VEC2': 2,\r\n\t\t'VEC3': 3,\r\n\t\t'VEC4': 4,\r\n\t\t'MAT2': 4,\r\n\t\t'MAT3': 9,\r\n\t\t'MAT4': 16\r\n\t};\r\n\r\n\tvar ATTRIBUTES = {\r\n\t\tPOSITION: 'position',\r\n\t\tNORMAL: 'normal',\r\n\t\tTEXCOORD_0: 'uv',\r\n\t\tTEXCOORD0: 'uv', // deprecated\r\n\t\tTEXCOORD: 'uv', // deprecated\r\n\t\tTEXCOORD_1: 'uv2',\r\n\t\tCOLOR_0: 'color',\r\n\t\tCOLOR0: 'color', // deprecated\r\n\t\tCOLOR: 'color', // deprecated\r\n\t\tWEIGHTS_0: 'skinWeight',\r\n\t\tWEIGHT: 'skinWeight', // deprecated\r\n\t\tJOINTS_0: 'skinIndex',\r\n\t\tJOINT: 'skinIndex' // deprecated\r\n\t};\r\n\r\n\tvar PATH_PROPERTIES = {\r\n\t\tscale: 'scale',\r\n\t\ttranslation: 'position',\r\n\t\trotation: 'quaternion',\r\n\t\tweights: 'morphTargetInfluences'\r\n\t};\r\n\r\n\tvar INTERPOLATION = {\r\n\t\tCUBICSPLINE: THREE.InterpolateSmooth, // We use custom interpolation GLTFCubicSplineInterpolation for CUBICSPLINE.\r\n\t\t                                      // KeyframeTrack.optimize() can't handle glTF Cubic Spline output values layout,\r\n\t\t                                      // using THREE.InterpolateSmooth for KeyframeTrack instantiation to prevent optimization.\r\n\t\t                                      // See KeyframeTrack.optimize() for the detail.\r\n\t\tLINEAR: THREE.InterpolateLinear,\r\n\t\tSTEP: THREE.InterpolateDiscrete\r\n\t};\r\n\r\n\tvar STATES_ENABLES = {\r\n\t\t2884: 'CULL_FACE',\r\n\t\t2929: 'DEPTH_TEST',\r\n\t\t3042: 'BLEND',\r\n\t\t3089: 'SCISSOR_TEST',\r\n\t\t32823: 'POLYGON_OFFSET_FILL',\r\n\t\t32926: 'SAMPLE_ALPHA_TO_COVERAGE'\r\n\t};\r\n\r\n\tvar ALPHA_MODES = {\r\n\t\tOPAQUE: 'OPAQUE',\r\n\t\tMASK: 'MASK',\r\n\t\tBLEND: 'BLEND'\r\n\t};\r\n\r\n\t/* UTILITY FUNCTIONS */\r\n\r\n\tfunction resolveURL( url, path ) {\r\n\r\n\t\t// Invalid URL\r\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\r\n\r\n\t\t// Absolute URL http://,https://,//\r\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\r\n\r\n\t\t// Data URI\r\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\r\n\r\n\t\t// Blob URL\r\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\r\n\r\n\t\t// Relative URL\r\n\t\treturn path + url;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\r\n\t */\r\n\tfunction createDefaultMaterial() {\r\n\r\n\t\treturn new THREE.MeshStandardMaterial( {\r\n\t\t\tcolor: 0xFFFFFF,\r\n\t\t\temissive: 0x000000,\r\n\t\t\tmetalness: 1,\r\n\t\t\troughness: 1,\r\n\t\t\ttransparent: false,\r\n\t\t\tdepthTest: true,\r\n\t\t\tside: THREE.FrontSide\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\r\n\r\n\t\t// Add unknown glTF extensions to an object's userData.\r\n\r\n\t\tfor ( var name in objectDef.extensions ) {\r\n\r\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\r\n\r\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\r\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\r\n\t *\r\n\t * @param {THREE.BufferGeometry} geometry\r\n\t * @param {Array<GLTF.Target>} targets\r\n\t * @param {Array<THREE.BufferAttribute>} accessors\r\n\t */\r\n\tfunction addMorphTargets( geometry, targets, accessors ) {\r\n\r\n\t\tvar hasMorphPosition = false;\r\n\t\tvar hasMorphNormal = false;\r\n\r\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar target = targets[ i ];\r\n\r\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\r\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\r\n\r\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return;\r\n\r\n\t\tvar morphPositions = [];\r\n\t\tvar morphNormals = [];\r\n\r\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar target = targets[ i ];\r\n\t\t\tvar attributeName = 'morphTarget' + i;\r\n\r\n\t\t\tif ( hasMorphPosition ) {\r\n\r\n\t\t\t\t// Three.js morph position is absolute value. The formula is\r\n\t\t\t\t//   basePosition\r\n\t\t\t\t//     + weight0 * ( morphPosition0 - basePosition )\r\n\t\t\t\t//     + weight1 * ( morphPosition1 - basePosition )\r\n\t\t\t\t//     ...\r\n\t\t\t\t// while the glTF one is relative\r\n\t\t\t\t//   basePosition\r\n\t\t\t\t//     + weight0 * glTFmorphPosition0\r\n\t\t\t\t//     + weight1 * glTFmorphPosition1\r\n\t\t\t\t//     ...\r\n\t\t\t\t// then we need to convert from relative to absolute here.\r\n\r\n\t\t\t\tif ( target.POSITION !== undefined ) {\r\n\r\n\t\t\t\t\t// Cloning not to pollute original accessor\r\n\t\t\t\t\tvar positionAttribute = cloneBufferAttribute( accessors[ target.POSITION ] );\r\n\t\t\t\t\tpositionAttribute.name = attributeName;\r\n\r\n\t\t\t\t\tvar position = geometry.attributes.position;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = positionAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tpositionAttribute.setXYZ(\r\n\t\t\t\t\t\t\tj,\r\n\t\t\t\t\t\t\tpositionAttribute.getX( j ) + position.getX( j ),\r\n\t\t\t\t\t\t\tpositionAttribute.getY( j ) + position.getY( j ),\r\n\t\t\t\t\t\t\tpositionAttribute.getZ( j ) + position.getZ( j )\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tpositionAttribute = geometry.attributes.position;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphPositions.push( positionAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasMorphNormal ) {\r\n\r\n\t\t\t\t// see target.POSITION's comment\r\n\r\n\t\t\t\tvar normalAttribute;\r\n\r\n\t\t\t\tif ( target.NORMAL !== undefined ) {\r\n\r\n\t\t\t\t\tvar normalAttribute = cloneBufferAttribute( accessors[ target.NORMAL ] );\r\n\t\t\t\t\tnormalAttribute.name = attributeName;\r\n\r\n\t\t\t\t\tvar normal = geometry.attributes.normal;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = normalAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tnormalAttribute.setXYZ(\r\n\t\t\t\t\t\t\tj,\r\n\t\t\t\t\t\t\tnormalAttribute.getX( j ) + normal.getX( j ),\r\n\t\t\t\t\t\t\tnormalAttribute.getY( j ) + normal.getY( j ),\r\n\t\t\t\t\t\t\tnormalAttribute.getZ( j ) + normal.getZ( j )\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tnormalAttribute = geometry.attributes.normal;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphNormals.push( normalAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\r\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param {THREE.Mesh} mesh\r\n\t * @param {GLTF.Mesh} meshDef\r\n\t */\r\n\tfunction updateMorphTargets( mesh, meshDef ) {\r\n\r\n\t\tmesh.updateMorphTargets();\r\n\r\n\t\tif ( meshDef.weights !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\r\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\r\n\r\n\t\t\tvar targetNames = meshDef.extras.targetNames;\r\n\r\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\r\n\r\n\t\t\t\tmesh.morphTargetDictionary = {};\r\n\r\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction isPrimitiveEqual( a, b ) {\r\n\r\n\t\tif ( a.indices !== b.indices ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn isObjectEqual( a.attributes, b.attributes );\r\n\r\n\t}\r\n\r\n\tfunction isObjectEqual( a, b ) {\r\n\r\n\t\tif ( Object.keys( a ).length !== Object.keys( b ).length ) return false;\r\n\r\n\t\tfor ( var key in a ) {\r\n\r\n\t\t\tif ( a[ key ] !== b[ key ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction isArrayEqual( a, b ) {\r\n\r\n\t\tif ( a.length !== b.length ) return false;\r\n\r\n\t\tfor ( var i = 0, il = a.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( a[ i ] !== b[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction getCachedGeometry( cache, newPrimitive ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( isPrimitiveEqual( cached.primitive, newPrimitive ) ) return cached.promise;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction getCachedCombinedGeometry( cache, geometries ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( isArrayEqual( geometries, cached.baseGeometries ) ) return cached.geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction getCachedMultiPassGeometry( cache, geometry, primitives ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( geometry === cached.baseGeometry && isArrayEqual( primitives, cached.primitives ) ) return cached.geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction cloneBufferAttribute( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tvar count = attribute.count;\r\n\t\t\tvar itemSize = attribute.itemSize;\r\n\t\t\tvar array = attribute.array.slice( 0, count * itemSize );\r\n\r\n\t\t\tfor ( var i = 0; i < count; ++ i ) {\r\n\r\n\t\t\t\tarray[ i ] = attribute.getX( i );\r\n\t\t\t\tif ( itemSize >= 2 ) array[ i + 1 ] = attribute.getY( i );\r\n\t\t\t\tif ( itemSize >= 3 ) array[ i + 2 ] = attribute.getZ( i );\r\n\t\t\t\tif ( itemSize >= 4 ) array[ i + 3 ] = attribute.getW( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new THREE.BufferAttribute( array, itemSize, attribute.normalized );\r\n\r\n\t\t}\r\n\r\n\t\treturn attribute.clone();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if we can build a single Mesh with MultiMaterial from multiple primitives.\r\n\t * Returns true if all primitives use the same attributes/morphAttributes/mode\r\n\t * and also have index. Otherwise returns false.\r\n\t *\r\n\t * @param {Array<GLTF.Primitive>} primitives\r\n\t * @return {Boolean}\r\n\t */\r\n\tfunction isMultiPassGeometry( primitives ) {\r\n\r\n\t\tif ( primitives.length < 2 ) return false;\r\n\r\n\t\tvar primitive0 = primitives[ 0 ];\r\n\t\tvar targets0 = primitive0.targets || [];\r\n\r\n\t\tif ( primitive0.indices === undefined ) return false;\r\n\r\n\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\tif ( primitive0.mode !== primitive.mode ) return false;\r\n\t\t\tif ( primitive.indices === undefined ) return false;\r\n\t\t\tif ( ! isObjectEqual( primitive0.attributes, primitive.attributes ) ) return false;\r\n\r\n\t\t\tvar targets = primitive.targets || [];\r\n\r\n\t\t\tif ( targets0.length !== targets.length ) return false;\r\n\r\n\t\t\tfor ( var j = 0, jl = targets0.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tif ( ! isObjectEqual( targets0[ j ], targets[ j ] ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\t/* GLTF PARSER */\r\n\r\n\tfunction GLTFParser( json, extensions, options ) {\r\n\r\n\t\tthis.json = json || {};\r\n\t\tthis.extensions = extensions || {};\r\n\t\tthis.options = options || {};\r\n\r\n\t\t// loader object cache\r\n\t\tthis.cache = new GLTFRegistry();\r\n\r\n\t\t// BufferGeometry caching\r\n\t\tthis.primitiveCache = [];\r\n\t\tthis.multiplePrimitivesCache = [];\r\n\t\tthis.multiPassGeometryCache = [];\r\n\r\n\t\tthis.textureLoader = new THREE.TextureLoader( this.options.manager );\r\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\r\n\r\n\t\tthis.fileLoader = new THREE.FileLoader( this.options.manager );\r\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\r\n\r\n\t}\r\n\r\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\r\n\r\n\t\tvar json = this.json;\r\n\r\n\t\t// Clear the loader cache\r\n\t\tthis.cache.removeAll();\r\n\r\n\t\t// Mark the special nodes/meshes in json for efficient parse\r\n\t\tthis.markDefs();\r\n\r\n\t\t// Fire the callback on complete\r\n\t\tthis.getMultiDependencies( [\r\n\r\n\t\t\t'scene',\r\n\t\t\t'animation',\r\n\t\t\t'camera'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar scenes = dependencies.scenes || [];\r\n\t\t\tvar scene = scenes[ json.scene || 0 ];\r\n\t\t\tvar animations = dependencies.animations || [];\r\n\t\t\tvar cameras = dependencies.cameras || [];\r\n\r\n\t\t\tonLoad( scene, scenes, cameras, animations, json );\r\n\r\n\t\t} ).catch( onError );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Marks the special nodes/meshes in json for efficient parse.\r\n\t */\r\n\tGLTFParser.prototype.markDefs = function () {\r\n\r\n\t\tvar nodeDefs = this.json.nodes || [];\r\n\t\tvar skinDefs = this.json.skins || [];\r\n\t\tvar meshDefs = this.json.meshes || [];\r\n\r\n\t\tvar meshReferences = {};\r\n\t\tvar meshUses = {};\r\n\r\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\r\n\t\t// Object3D. Use the skins' joint references to mark bones.\r\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\r\n\r\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\r\n\r\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\r\n\t\t// avoid having more than one THREE.Mesh with the same name, count\r\n\t\t// references and rename instances below.\r\n\t\t//\r\n\t\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\r\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\r\n\r\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\r\n\r\n\t\t\tif ( nodeDef.mesh !== undefined ) {\r\n\r\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] === undefined ) {\r\n\r\n\t\t\t\t\tmeshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmeshReferences[ nodeDef.mesh ] ++;\r\n\r\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\r\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\r\n\t\t\t\t// to mark SkinnedMesh if node has skin.\r\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\r\n\r\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.json.meshReferences = meshReferences;\r\n\t\tthis.json.meshUses = meshUses;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests the specified dependency asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @param {number} index\r\n\t * @return {Promise<Object>}\r\n\t */\r\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\r\n\r\n\t\tvar cacheKey = type + ':' + index;\r\n\t\tvar dependency = this.cache.get( cacheKey );\r\n\r\n\t\tif ( ! dependency ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 'scene':\r\n\t\t\t\t\tdependency = this.loadScene( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'node':\r\n\t\t\t\t\tdependency = this.loadNode( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'mesh':\r\n\t\t\t\t\tdependency = this.loadMesh( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'accessor':\r\n\t\t\t\t\tdependency = this.loadAccessor( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bufferView':\r\n\t\t\t\t\tdependency = this.loadBufferView( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'buffer':\r\n\t\t\t\t\tdependency = this.loadBuffer( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'material':\r\n\t\t\t\t\tdependency = this.loadMaterial( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'texture':\r\n\t\t\t\t\tdependency = this.loadTexture( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'skin':\r\n\t\t\t\t\tdependency = this.loadSkin( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'animation':\r\n\t\t\t\t\tdependency = this.loadAnimation( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'camera':\r\n\t\t\t\t\tdependency = this.loadCamera( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.cache.add( cacheKey, dependency );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependency;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests all dependencies of the specified type asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @return {Promise<Array<Object>>}\r\n\t */\r\n\tGLTFParser.prototype.getDependencies = function ( type ) {\r\n\r\n\t\tvar dependencies = this.cache.get( type );\r\n\r\n\t\tif ( ! dependencies ) {\r\n\r\n\t\t\tvar parser = this;\r\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\r\n\r\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\r\n\r\n\t\t\t\treturn parser.getDependency( type, index );\r\n\r\n\t\t\t} ) );\r\n\r\n\t\t\tthis.cache.add( type, dependencies );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependencies;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests all multiple dependencies of the specified types asynchronously, with caching.\r\n\t * @param {Array<string>} types\r\n\t * @return {Promise<Object<Array<Object>>>}\r\n\t */\r\n\tGLTFParser.prototype.getMultiDependencies = function ( types ) {\r\n\r\n\t\tvar results = {};\r\n\t\tvar pendings = [];\r\n\r\n\t\tfor ( var i = 0, il = types.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar type = types[ i ];\r\n\t\t\tvar value = this.getDependencies( type );\r\n\r\n\t\t\tvalue = value.then( function ( key, value ) {\r\n\r\n\t\t\t\tresults[ key ] = value;\r\n\r\n\t\t\t}.bind( this, type + ( type === 'mesh' ? 'es' : 's' ) ) );\r\n\r\n\t\t\tpendings.push( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pendings ).then( function () {\r\n\r\n\t\t\treturn results;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\r\n\r\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\r\n\t\tvar loader = this.fileLoader;\r\n\r\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\t// If present, GLB container is required to be the first buffer.\r\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\r\n\r\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\r\n\r\n\t\t}\r\n\r\n\t\tvar options = this.options;\r\n\r\n\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\r\n\r\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferViewIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\r\n\r\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\r\n\r\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\r\n\r\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\r\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\r\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\r\n\t * @param {number} accessorIndex\r\n\t * @return {Promise<THREE.BufferAttribute|THREE.InterleavedBufferAttribute>}\r\n\t */\r\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\r\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\r\n\r\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\r\n\r\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\r\n\t\t\t// information about attributes coming from another source (e.g. Draco\r\n\t\t\t// compression extension).\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar pendingBufferViews = [];\r\n\r\n\t\tif ( accessorDef.bufferView !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpendingBufferViews.push( null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\r\n\r\n\t\t\tvar bufferView = bufferViews[ 0 ];\r\n\r\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\r\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\r\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\r\n\t\t\tvar itemBytes = elementBytes * itemSize;\r\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\r\n\t\t\tvar byteStride = json.bufferViews[ accessorDef.bufferView ].byteStride;\r\n\t\t\tvar normalized = accessorDef.normalized === true;\r\n\t\t\tvar array, bufferAttribute;\r\n\r\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\r\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\r\n\r\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType;\r\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\r\n\r\n\t\t\t\tif ( ! ib ) {\r\n\r\n\t\t\t\t\t// Use the full buffer if it's interleaved.\r\n\t\t\t\t\tarray = new TypedArray( bufferView );\r\n\r\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\r\n\t\t\t\t\tib = new THREE.InterleavedBuffer( array, byteStride / elementBytes );\r\n\r\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new THREE.InterleavedBufferAttribute( ib, itemSize, byteOffset / elementBytes, normalized );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( bufferView === null ) {\r\n\r\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new THREE.BufferAttribute( array, itemSize, normalized );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\r\n\t\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\r\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\r\n\r\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\r\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\r\n\r\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\r\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\r\n\r\n\t\t\t\tif ( bufferView !== null ) {\r\n\r\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\r\n\t\t\t\t\tbufferAttribute.setArray( bufferAttribute.array.slice() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar index = sparseIndices[ i ];\r\n\r\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\r\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\r\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\r\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\r\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn bufferAttribute;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\r\n\t * @param {number} textureIndex\r\n\t * @return {Promise<THREE.Texture>}\r\n\t */\r\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\t\tvar options = this.options;\r\n\t\tvar textureLoader = this.textureLoader;\r\n\r\n\t\tvar URL = window.URL || window.webkitURL;\r\n\r\n\t\tvar textureDef = json.textures[ textureIndex ];\r\n\r\n\t\tvar textureExtensions = textureDef.extensions || {};\r\n\r\n\t\tvar source;\r\n\r\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\r\n\r\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tsource = json.images[ textureDef.source ];\r\n\r\n\t\t}\r\n\r\n\t\tvar sourceURI = source.uri;\r\n\t\tvar isObjectURL = false;\r\n\r\n\t\tif ( source.bufferView !== undefined ) {\r\n\r\n\t\t\t// Load binary image data from bufferView, if provided.\r\n\r\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\r\n\r\n\t\t\t\tisObjectURL = true;\r\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\r\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\r\n\t\t\t\treturn sourceURI;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\r\n\r\n\t\t\t// Load Texture resource.\r\n\r\n\t\t\tvar loader = THREE.Loader.Handlers.get( sourceURI );\r\n\r\n\t\t\tif ( ! loader ) {\r\n\r\n\t\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\r\n\t\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\r\n\t\t\t\t\t: textureLoader;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} ).then( function ( texture ) {\r\n\r\n\t\t\t// Clean up resources and configure Texture.\r\n\r\n\t\t\tif ( isObjectURL === true ) {\r\n\r\n\t\t\t\tURL.revokeObjectURL( sourceURI );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.flipY = false;\r\n\r\n\t\t\tif ( textureDef.name !== undefined ) texture.name = textureDef.name;\r\n\r\n\t\t\t// .format of dds texture is set in DDSLoader\r\n\t\t\tif ( ! textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\r\n\r\n\t\t\t\ttexture.format = textureDef.format !== undefined ? WEBGL_TEXTURE_FORMATS[ textureDef.format ] : THREE.RGBAFormat;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( textureDef.internalFormat !== undefined && texture.format !== WEBGL_TEXTURE_FORMATS[ textureDef.internalFormat ] ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. ' +\r\n\t\t\t\t\t\t\t\t\t\t\t'internalFormat will be forced to be the same value as format.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.type = textureDef.type !== undefined ? WEBGL_TEXTURE_DATATYPES[ textureDef.type ] : THREE.UnsignedByteType;\r\n\r\n\t\t\tvar samplers = json.samplers || {};\r\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\r\n\r\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || THREE.LinearMipMapLinearFilter;\r\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || THREE.RepeatWrapping;\r\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || THREE.RepeatWrapping;\r\n\r\n\t\t\treturn texture;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Asynchronously assigns a texture to the given material parameters.\r\n\t * @param {Object} materialParams\r\n\t * @param {string} textureName\r\n\t * @param {number} textureIndex\r\n\t * @return {Promise}\r\n\t */\r\n\tGLTFParser.prototype.assignTexture = function ( materialParams, textureName, textureIndex ) {\r\n\r\n\t\treturn this.getDependency( 'texture', textureIndex ).then( function ( texture ) {\r\n\r\n\t\t\tmaterialParams[ textureName ] = texture;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\r\n\t * @param {number} materialIndex\r\n\t * @return {Promise<THREE.Material>}\r\n\t */\r\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\t\tvar materialDef = this.json.materials[ materialIndex ];\r\n\r\n\t\tvar materialType;\r\n\t\tvar materialParams = {};\r\n\t\tvar materialExtensions = materialDef.extensions || {};\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\r\n\r\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\r\n\t\t\tmaterialType = sgExtension.getMaterialType( materialDef );\r\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\r\n\r\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\r\n\r\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\r\n\t\t\tmaterialType = kmuExtension.getMaterialType( materialDef );\r\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Specification:\r\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\r\n\r\n\t\t\tmaterialType = THREE.MeshStandardMaterial;\r\n\r\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\r\n\r\n\t\t\tmaterialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\t\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.fromArray( array );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\r\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\r\n\r\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\r\n\r\n\t\t\t\tvar textureIndex = metallicRoughness.metallicRoughnessTexture.index;\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', textureIndex ) );\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', textureIndex ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.doubleSided === true ) {\r\n\r\n\t\t\tmaterialParams.side = THREE.DoubleSide;\r\n\r\n\t\t}\r\n\r\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\r\n\r\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\r\n\r\n\t\t\tmaterialParams.transparent = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterialParams.transparent = false;\r\n\r\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\r\n\r\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture.index ) );\r\n\r\n\t\t\tmaterialParams.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\r\n\r\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture.index ) );\r\n\r\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\r\n\r\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tmaterialParams.emissive = new THREE.Color().fromArray( materialDef.emissiveFactor );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture.index ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function () {\r\n\r\n\t\t\tvar material;\r\n\r\n\t\t\tif ( materialType === THREE.ShaderMaterial ) {\r\n\r\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial = new materialType( materialParams );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materialDef.name !== undefined ) material.name = materialDef.name;\r\n\r\n\t\t\t// Normal map textures use OpenGL conventions:\r\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#materialnormaltexture\r\n\t\t\tif ( material.normalScale ) {\r\n\r\n\t\t\t\tmaterial.normalScale.y = - material.normalScale.y;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\r\n\t\t\tif ( material.map ) material.map.encoding = THREE.sRGBEncoding;\r\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = THREE.sRGBEncoding;\r\n\t\t\tif ( material.specularMap ) material.specularMap.encoding = THREE.sRGBEncoding;\r\n\r\n\t\t\tif ( materialDef.extras ) material.userData = materialDef.extras;\r\n\r\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * @param  {THREE.BufferGeometry} geometry\r\n\t * @param  {GLTF.Primitive} primitiveDef\r\n\t * @param  {Array<THREE.BufferAttribute>} accessors\r\n\t */\r\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, accessors ) {\r\n\r\n\t\tvar attributes = primitiveDef.attributes;\r\n\r\n\t\tfor ( var gltfAttributeName in attributes ) {\r\n\r\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ];\r\n\t\t\tvar bufferAttribute = accessors[ attributes[ gltfAttributeName ] ];\r\n\r\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\r\n\t\t\tif ( ! threeAttributeName ) continue;\r\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\r\n\r\n\t\t\tgeometry.addAttribute( threeAttributeName, bufferAttribute );\r\n\r\n\t\t}\r\n\r\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\r\n\r\n\t\t\tgeometry.setIndex( accessors[ primitiveDef.indices ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( primitiveDef.targets !== undefined ) {\r\n\r\n\t\t\taddMorphTargets( geometry, primitiveDef.targets, accessors );\r\n\r\n\t\t}\r\n\r\n\t\tif ( primitiveDef.extras !== undefined ) {\r\n\r\n\t\t\tgeometry.userData = primitiveDef.extras;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\r\n\t *\r\n\t * Creates BufferGeometries from primitives.\r\n\t * If we can build a single BufferGeometry with .groups from multiple primitives, returns one BufferGeometry.\r\n\t * Otherwise, returns BufferGeometries without .groups as many as primitives.\r\n\t *\r\n\t * @param {Array<Object>} primitives\r\n\t * @return {Promise<Array<THREE.BufferGeometry>>}\r\n\t */\r\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar extensions = this.extensions;\r\n\t\tvar cache = this.primitiveCache;\r\n\r\n\t\tvar isMultiPass = isMultiPassGeometry( primitives );\r\n\t\tvar originalPrimitives;\r\n\r\n\t\tif ( isMultiPass ) {\r\n\r\n\t\t\toriginalPrimitives = primitives; // save original primitives and use later\r\n\r\n\t\t\t// We build a single BufferGeometry with .groups from multiple primitives\r\n\t\t\t// because all primitives share the same attributes/morph/mode and have indices.\r\n\r\n\t\t\tprimitives = [ primitives[ 0 ] ];\r\n\r\n\t\t\t// Sets .groups and combined indices to a geometry later in this method.\r\n\r\n\t\t}\r\n\r\n\t\treturn this.getDependencies( 'accessor' ).then( function ( accessors ) {\r\n\r\n\t\t\tvar pending = [];\r\n\r\n\t\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\t\t// See if we've already created this geometry\r\n\t\t\t\tvar cached = getCachedGeometry( cache, primitive );\r\n\r\n\t\t\t\tif ( cached ) {\r\n\r\n\t\t\t\t\t// Use the cached geometry if it exists\r\n\t\t\t\t\tpending.push( cached );\r\n\r\n\t\t\t\t} else if ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\r\n\r\n\t\t\t\t\t// Use DRACO geometry if available\r\n\t\t\t\t\tvar geometryPromise = extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\r\n\t\t\t\t\t\t.decodePrimitive( primitive, parser )\r\n\t\t\t\t\t\t.then( function ( geometry ) {\r\n\r\n\t\t\t\t\t\t\taddPrimitiveAttributes( geometry, primitive, accessors );\r\n\r\n\t\t\t\t\t\t\treturn geometry;\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\tcache.push( { primitive: primitive, promise: geometryPromise } );\r\n\r\n\t\t\t\t\tpending.push( geometryPromise );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Otherwise create a new geometry\r\n\t\t\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\t\t\t\taddPrimitiveAttributes( geometry, primitive, accessors );\r\n\r\n\t\t\t\t\tvar geometryPromise = Promise.resolve( geometry );\r\n\r\n\t\t\t\t\t// Cache this geometry\r\n\t\t\t\t\tcache.push( { primitive: primitive, promise: geometryPromise } );\r\n\r\n\t\t\t\t\tpending.push( geometryPromise );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn Promise.all( pending ).then( function ( geometries ) {\r\n\r\n\t\t\t\tif ( isMultiPass ) {\r\n\r\n\t\t\t\t\tvar baseGeometry = geometries[ 0 ];\r\n\r\n\t\t\t\t\t// See if we've already created this combined geometry\r\n\t\t\t\t\tvar cache = parser.multiPassGeometryCache;\r\n\t\t\t\t\tvar cached = getCachedMultiPassGeometry( cache, baseGeometry, originalPrimitives );\r\n\r\n\t\t\t\t\tif ( cached !== null ) return [ cached.geometry ];\r\n\r\n\t\t\t\t\t// Cloning geometry because of index override.\r\n\t\t\t\t\t// Attributes can be reused so cloning by myself here.\r\n\t\t\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\t\t\t\tgeometry.name = baseGeometry.name;\r\n\t\t\t\t\tgeometry.userData = baseGeometry.userData;\r\n\r\n\t\t\t\t\tfor ( var key in baseGeometry.attributes ) geometry.addAttribute( key, baseGeometry.attributes[ key ] );\r\n\t\t\t\t\tfor ( var key in baseGeometry.morphAttributes ) geometry.morphAttributes[ key ] = baseGeometry.morphAttributes[ key ];\r\n\r\n\t\t\t\t\tvar indices = [];\r\n\t\t\t\t\tvar offset = 0;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = originalPrimitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar accessor = accessors[ originalPrimitives[ i ].indices ];\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = accessor.count; j < jl; j ++ ) indices.push( accessor.array[ j ] );\r\n\r\n\t\t\t\t\t\tgeometry.addGroup( offset, accessor.count, i );\r\n\r\n\t\t\t\t\t\toffset += accessor.count;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.setIndex( indices );\r\n\r\n\t\t\t\t\tcache.push( { geometry: geometry, baseGeometry: baseGeometry, primitives: originalPrimitives } );\r\n\r\n\t\t\t\t\treturn [ geometry ];\r\n\r\n\t\t\t\t} else if ( geometries.length > 1 && BufferGeometryUtils !== undefined ) {\r\n\r\n\t\t\t\t\t// Tries to merge geometries with BufferGeometryUtils if possible\r\n\r\n\t\t\t\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t// can't merge if draw mode is different\r\n\t\t\t\t\t\tif ( primitives[ 0 ].mode !== primitives[ i ].mode ) return geometries;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// See if we've already created this combined geometry\r\n\t\t\t\t\tvar cache = parser.multiplePrimitivesCache;\r\n\t\t\t\t\tvar cached = getCachedCombinedGeometry( cache, geometries );\r\n\r\n\t\t\t\t\tif ( cached ) {\r\n\r\n\t\t\t\t\t\tif ( cached.geometry !== null ) return [ cached.geometry ];\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar geometry = BufferGeometryUtils.mergeBufferGeometries( geometries, true );\r\n\r\n\t\t\t\t\t\tcache.push( { geometry: geometry, baseGeometries: geometries } );\r\n\r\n\t\t\t\t\t\tif ( geometry !== null ) return [ geometry ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometries;\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\r\n\t * @param {number} meshIndex\r\n\t * @return {Promise<THREE.Group|THREE.Mesh|THREE.SkinnedMesh>}\r\n\t */\r\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\r\n\r\n\t\tvar scope = this;\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\r\n\t\tvar meshDef = this.json.meshes[ meshIndex ];\r\n\r\n\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t'accessor',\r\n\t\t\t'material'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar primitives = meshDef.primitives;\r\n\t\t\tvar originalMaterials = [];\r\n\r\n\t\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\toriginalMaterials[ i ] = primitives[ i ].material === undefined\r\n\t\t\t\t\t? createDefaultMaterial()\r\n\t\t\t\t\t: dependencies.materials[ primitives[ i ].material ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn scope.loadGeometries( primitives ).then( function ( geometries ) {\r\n\r\n\t\t\t\tvar isMultiMaterial = geometries.length === 1 && geometries[ 0 ].groups.length > 0;\r\n\r\n\t\t\t\tvar meshes = [];\r\n\r\n\t\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar geometry = geometries[ i ];\r\n\t\t\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\t\t\t// 1. create Mesh\r\n\r\n\t\t\t\t\tvar mesh;\r\n\r\n\t\t\t\t\tvar material = isMultiMaterial ? originalMaterials : originalMaterials[ i ];\r\n\r\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\r\n\t\t\t\t\t\tprimitive.mode === undefined ) {\r\n\r\n\t\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See .markDefs()\r\n\t\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\r\n\t\t\t\t\t\t\t? new THREE.SkinnedMesh( geometry, material )\r\n\t\t\t\t\t\t\t: new THREE.Mesh( geometry, material );\r\n\r\n\t\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\r\n\r\n\t\t\t\t\t\t\tmesh.drawMode = THREE.TriangleStripDrawMode;\r\n\r\n\t\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\r\n\r\n\t\t\t\t\t\t\tmesh.drawMode = THREE.TriangleFanDrawMode;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.LineSegments( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Line( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.LineLoop( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Points( geometry, material );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\r\n\r\n\t\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\r\n\r\n\t\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\r\n\r\n\t\t\t\t\tif ( meshDef.extras !== undefined ) mesh.userData = meshDef.extras;\r\n\r\n\t\t\t\t\tmeshes.push( mesh );\r\n\r\n\t\t\t\t\t// 2. update Material depending on Mesh and BufferGeometry\r\n\r\n\t\t\t\t\tvar materials = isMultiMaterial ? mesh.material : [ mesh.material ];\r\n\r\n\t\t\t\t\tvar useVertexColors = geometry.attributes.color !== undefined;\r\n\t\t\t\t\tvar useFlatShading = geometry.attributes.normal === undefined;\r\n\t\t\t\t\tvar useSkinning = mesh.isSkinnedMesh === true;\r\n\t\t\t\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\r\n\t\t\t\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = materials.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar material = materials[ j ];\r\n\r\n\t\t\t\t\t\tif ( mesh.isPoints ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\r\n\r\n\t\t\t\t\t\t\tvar pointsMaterial = scope.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! pointsMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tpointsMaterial = new THREE.PointsMaterial();\r\n\t\t\t\t\t\t\t\tTHREE.Material.prototype.copy.call( pointsMaterial, material );\r\n\t\t\t\t\t\t\t\tpointsMaterial.color.copy( material.color );\r\n\t\t\t\t\t\t\t\tpointsMaterial.map = material.map;\r\n\t\t\t\t\t\t\t\tpointsMaterial.lights = false; // PointsMaterial doesn't support lights yet\r\n\r\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, pointsMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = pointsMaterial;\r\n\r\n\t\t\t\t\t\t} else if ( mesh.isLine ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\r\n\r\n\t\t\t\t\t\t\tvar lineMaterial = scope.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! lineMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tlineMaterial = new THREE.LineBasicMaterial();\r\n\t\t\t\t\t\t\t\tTHREE.Material.prototype.copy.call( lineMaterial, material );\r\n\t\t\t\t\t\t\t\tlineMaterial.color.copy( material.color );\r\n\t\t\t\t\t\t\t\tlineMaterial.lights = false; // LineBasicMaterial doesn't support lights yet\r\n\r\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, lineMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = lineMaterial;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Clone the material if it will be modified\r\n\t\t\t\t\t\tif ( useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\r\n\r\n\t\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\r\n\t\t\t\t\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\r\n\t\t\t\t\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\r\n\t\t\t\t\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\r\n\t\t\t\t\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\r\n\t\t\t\t\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\r\n\r\n\t\t\t\t\t\t\tvar cachedMaterial = scope.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! cachedMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tcachedMaterial = material.isGLTFSpecularGlossinessMaterial\r\n\t\t\t\t\t\t\t\t\t? extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].cloneMaterial( material )\r\n\t\t\t\t\t\t\t\t\t: material.clone();\r\n\r\n\t\t\t\t\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\r\n\t\t\t\t\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = THREE.VertexColors;\r\n\t\t\t\t\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\r\n\t\t\t\t\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\r\n\t\t\t\t\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\r\n\r\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, cachedMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = cachedMaterial;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmaterials[ j ] = material;\r\n\r\n\t\t\t\t\t\t// workarounds for mesh and geometry\r\n\r\n\t\t\t\t\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tconsole.log( 'THREE.GLTFLoader: Duplicating UVs to support aoMap.' );\r\n\t\t\t\t\t\t\tgeometry.addAttribute( 'uv2', new THREE.BufferAttribute( geometry.attributes.uv.array, 2 ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\r\n\r\n\t\t\t\t\t\t\t// for GLTFSpecularGlossinessMaterial(ShaderMaterial) uniforms runtime update\r\n\t\t\t\t\t\t\tmesh.onBeforeRender = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].refreshUniforms;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.material = isMultiMaterial ? materials : materials[ 0 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( meshes.length === 1 ) {\r\n\r\n\t\t\t\t\treturn meshes[ 0 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar group = new THREE.Group();\r\n\r\n\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tgroup.add( meshes[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn group;\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\r\n\t * @param {number} cameraIndex\r\n\t * @return {Promise<THREE.Camera>}\r\n\t */\r\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\r\n\r\n\t\tvar camera;\r\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\r\n\t\tvar params = cameraDef[ cameraDef.type ];\r\n\r\n\t\tif ( ! params ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.type === 'perspective' ) {\r\n\r\n\t\t\tcamera = new THREE.PerspectiveCamera( THREE.Math.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\r\n\r\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\r\n\r\n\t\t\tcamera = new THREE.OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.name !== undefined ) camera.name = cameraDef.name;\r\n\t\tif ( cameraDef.extras ) camera.userData = cameraDef.extras;\r\n\r\n\t\treturn Promise.resolve( camera );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\r\n\t * @param {number} skinIndex\r\n\t * @return {Promise<Object>}\r\n\t */\r\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\r\n\r\n\t\tvar skinDef = this.json.skins[ skinIndex ];\r\n\r\n\t\tvar skinEntry = { joints: skinDef.joints };\r\n\r\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\r\n\r\n\t\t\treturn Promise.resolve( skinEntry );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\r\n\r\n\t\t\tskinEntry.inverseBindMatrices = accessor;\r\n\r\n\t\t\treturn skinEntry;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\r\n\t * @param {number} animationIndex\r\n\t * @return {Promise<THREE.AnimationClip>}\r\n\t */\r\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\r\n\r\n\t\tvar json = this.json;\r\n\r\n\t\tvar animationDef = this.json.animations[ animationIndex ];\r\n\r\n\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t'accessor',\r\n\t\t\t'node'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar tracks = [];\r\n\r\n\t\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar channel = animationDef.channels[ i ];\r\n\t\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\r\n\r\n\t\t\t\tif ( sampler ) {\r\n\r\n\t\t\t\t\tvar target = channel.target;\r\n\t\t\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\r\n\t\t\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\r\n\t\t\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\r\n\r\n\t\t\t\t\tvar inputAccessor = dependencies.accessors[ input ];\r\n\t\t\t\t\tvar outputAccessor = dependencies.accessors[ output ];\r\n\r\n\t\t\t\t\tvar node = dependencies.nodes[ name ];\r\n\r\n\t\t\t\t\tif ( node ) {\r\n\r\n\t\t\t\t\t\tnode.updateMatrix();\r\n\t\t\t\t\t\tnode.matrixAutoUpdate = true;\r\n\r\n\t\t\t\t\t\tvar TypedKeyframeTrack;\r\n\r\n\t\t\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\r\n\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.weights:\r\n\r\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.NumberKeyframeTrack;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.rotation:\r\n\r\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.QuaternionKeyframeTrack;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.position:\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.scale:\r\n\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.VectorKeyframeTrack;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\r\n\r\n\t\t\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : THREE.InterpolateLinear;\r\n\r\n\t\t\t\t\t\tvar targetNames = [];\r\n\r\n\t\t\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\r\n\r\n\t\t\t\t\t\t\t// node can be THREE.Group here but\r\n\t\t\t\t\t\t\t// PATH_PROPERTIES.weights(morphTargetInfluences) should be\r\n\t\t\t\t\t\t\t// the property of a mesh object under group.\r\n\r\n\t\t\t\t\t\t\tnode.traverse( function ( object ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\r\n\r\n\t\t\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\ttargetNames.push( targetName );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// KeyframeTrack.optimize() will modify given 'times' and 'values'\r\n\t\t\t\t\t\t// buffers before creating a truncated copy to keep. Because buffers may\r\n\t\t\t\t\t\t// be reused by other tracks, make copies here.\r\n\t\t\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar track = new TypedKeyframeTrack(\r\n\t\t\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\r\n\t\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( inputAccessor.array, 0 ),\r\n\t\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( outputAccessor.array, 0 ),\r\n\t\t\t\t\t\t\t\tinterpolation\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Here is the trick to enable custom interpolation.\r\n\t\t\t\t\t\t\t// Overrides .createInterpolant in a factory method which creates custom interpolation.\r\n\t\t\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\r\n\r\n\t\t\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\r\n\r\n\t\t\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\r\n\t\t\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\r\n\t\t\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\r\n\r\n\t\t\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\r\n\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t// Workaround, provide an alternate way to know if the interpolant type is cubis spline to track.\r\n\t\t\t\t\t\t\t\t// track.getInterpolation() doesn't return valid value for custom interpolant.\r\n\t\t\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ttracks.push( track );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;\r\n\r\n\t\t\treturn new THREE.AnimationClip( name, undefined, tracks );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\r\n\t * @param {number} nodeIndex\r\n\t * @return {Promise<THREE.Object3D>}\r\n\t */\r\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\r\n\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\r\n\t\tvar meshReferences = this.json.meshReferences;\r\n\t\tvar meshUses = this.json.meshUses;\r\n\r\n\t\tvar nodeDef = this.json.nodes[ nodeIndex ];\r\n\r\n\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t'mesh',\r\n\t\t\t'skin',\r\n\t\t\t'camera',\r\n\t\t\t'light'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar node;\r\n\r\n\t\t\t// .isBone isn't in glTF spec. See .markDefs\r\n\t\t\tif ( nodeDef.isBone === true ) {\r\n\r\n\t\t\t\tnode = new THREE.Bone();\r\n\r\n\t\t\t} else if ( nodeDef.mesh !== undefined ) {\r\n\r\n\t\t\t\tvar mesh = dependencies.meshes[ nodeDef.mesh ];\r\n\r\n\t\t\t\tnode = mesh.clone();\r\n\r\n\t\t\t\t// for Specular-Glossiness\r\n\t\t\t\tif ( mesh.isGroup === true ) {\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = mesh.children.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar child = mesh.children[ i ];\r\n\r\n\t\t\t\t\t\tif ( child.material && child.material.isGLTFSpecularGlossinessMaterial === true ) {\r\n\r\n\t\t\t\t\t\t\tnode.children[ i ].onBeforeRender = child.onBeforeRender;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( mesh.material && mesh.material.isGLTFSpecularGlossinessMaterial === true ) {\r\n\r\n\t\t\t\t\t\tnode.onBeforeRender = mesh.onBeforeRender;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] > 1 ) {\r\n\r\n\t\t\t\t\tnode.name += '_instance_' + meshUses[ nodeDef.mesh ] ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( nodeDef.camera !== undefined ) {\r\n\r\n\t\t\t\tnode = dependencies.cameras[ nodeDef.camera ];\r\n\r\n\t\t\t} else if ( nodeDef.extensions\r\n\t\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ]\r\n\t\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {\r\n\r\n\t\t\t\tvar lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;\r\n\t\t\t\tnode = lights[ nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnode = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nodeDef.name !== undefined ) {\r\n\r\n\t\t\t\tnode.name = THREE.PropertyBinding.sanitizeNodeName( nodeDef.name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nodeDef.extras ) node.userData = nodeDef.extras;\r\n\r\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\r\n\r\n\t\t\tif ( nodeDef.matrix !== undefined ) {\r\n\r\n\t\t\t\tvar matrix = new THREE.Matrix4();\r\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\r\n\t\t\t\tnode.applyMatrix( matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\r\n\r\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\r\n\t * @param {number} sceneIndex\r\n\t * @return {Promise<THREE.Scene>}\r\n\t */\r\n\tGLTFParser.prototype.loadScene = function () {\r\n\r\n\t\t// scene node hierachy builder\r\n\r\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, allNodes, skins ) {\r\n\r\n\t\t\tvar node = allNodes[ nodeId ];\r\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\r\n\r\n\t\t\t// build skeleton here as well\r\n\r\n\t\t\tif ( nodeDef.skin !== undefined ) {\r\n\r\n\t\t\t\tvar meshes = node.isGroup === true ? node.children : [ node ];\r\n\r\n\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar mesh = meshes[ i ];\r\n\t\t\t\t\tvar skinEntry = skins[ nodeDef.skin ];\r\n\r\n\t\t\t\t\tvar bones = [];\r\n\t\t\t\t\tvar boneInverses = [];\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = skinEntry.joints.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar jointId = skinEntry.joints[ j ];\r\n\t\t\t\t\t\tvar jointNode = allNodes[ jointId ];\r\n\r\n\t\t\t\t\t\tif ( jointNode ) {\r\n\r\n\t\t\t\t\t\t\tbones.push( jointNode );\r\n\r\n\t\t\t\t\t\t\tvar mat = new THREE.Matrix4();\r\n\r\n\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tboneInverses.push( mat );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', jointId );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.bind( new THREE.Skeleton( bones, boneInverses ), mesh.matrixWorld );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// build node hierachy\r\n\r\n\t\t\tparentObject.add( node );\r\n\r\n\t\t\tif ( nodeDef.children ) {\r\n\r\n\t\t\t\tvar children = nodeDef.children;\r\n\r\n\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar child = children[ i ];\r\n\t\t\t\t\tbuildNodeHierachy( child, node, json, allNodes, skins );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn function loadScene( sceneIndex ) {\r\n\r\n\t\t\tvar json = this.json;\r\n\t\t\tvar extensions = this.extensions;\r\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\r\n\r\n\t\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t\t'node',\r\n\t\t\t\t'skin'\r\n\r\n\t\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\t\tvar scene = new THREE.Scene();\r\n\t\t\t\tif ( sceneDef.name !== undefined ) scene.name = sceneDef.name;\r\n\r\n\t\t\t\tif ( sceneDef.extras ) scene.userData = sceneDef.extras;\r\n\r\n\t\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\r\n\r\n\t\t\t\tvar nodeIds = sceneDef.nodes || [];\r\n\r\n\t\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tbuildNodeHierachy( nodeIds[ i ], scene, json, dependencies.nodes, dependencies.skins );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Ambient lighting, if present, is always attached to the scene root.\r\n\t\t\t\tif ( sceneDef.extensions\r\n\t\t\t\t\t\t && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ]\r\n\t\t\t\t\t\t && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {\r\n\r\n\t\t\t\t\tvar lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;\r\n\t\t\t\t\tscene.add( lights[ sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn scene;\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\treturn GLTFLoader;\r\n\r\n} )();\r\n\r\nexport { GLTFLoader }\r\n","/**\n * @author Garrett Johnson / http://gkjohnson.github.io/\n * https://github.com/gkjohnson/threejs-model-loader\n */\nimport * as THREE from 'three';\n\nimport {GLTFLoader, DRACOLoader} from \"./index\";\n\nconst ModelLoader = function (manager) {\n\n  this.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;\n\n  this.cachedLoaders = {};\n  this.loaderMap = {\n\n    '3mf': '3MFLoader',\n    'amf': 'AMFLoader',\n    'bvh': 'BVHLoader',\n    'assimp': 'AssimpLoader',\n    'babylon': 'BabylonLoader',\n    'dae': 'ColladaLoader',\n    'drc': 'DRACOLoader',\n    'fbx': 'FBXLoader',\n    'gcode': 'GCodeLoader',\n    'gltf': 'GLTFLoader',\n    'glb': 'GLTFLoader',\n    'bin': 'GLTFLoader',\n    'kmz': 'KMZLoader',\n    'md2': 'MD2Loader',\n    'mmd': 'MMDLoader',\n    'obj': 'OBJLoader',\n    'ply': 'PLYLoader',\n    'pcd': 'PCDLoader',\n    'prwm': 'PRWMLoader',\n    'stl': 'STLLoader',\n    'tds': 'TDSLoader',\n    'vtk': 'VTKLoader',\n    'vtp': 'VTKLoader',\n    'x': 'XLoader',\n    'zae': 'ColladaArchiveLoader',\n\n  };\n\n  this.loaderClass = {\n    'GLTFLoader': GLTFLoader\n  }\n\n};\n\nModelLoader.prototype = {\n\n  constructor: GLTFLoader,\n\n  formResult: function (res, extension) {\n\n    const mat = new THREE.MeshBasicMaterial({color: 0xffffff});\n    let model = res.scene || res.object || res;\n    model = model.isBufferGeometry || model.isGeometry ? new THREE.Mesh(model, mat) : model;\n\n    return {\n\n      model,\n      extension,\n      originalResult: res\n\n    };\n\n  },\n\n  getLoader: function (loaderName, manager, loadercb) {\n    let loader = null;\n    switch (loaderName) {\n      case 'GLTFLoader':\n        DRACOLoader.setDecoderPath('./js/libs/draco/gltf/');\n        loader = new this.loaderClass[loaderName]();\n        loader.setDRACOLoader(new DRACOLoader());\n        break;\n      default:\n    }\n    loadercb(loader);\n\n  },\n\n  extToLoader: function (ext, maanger, loadercb, onError) {\n\n    // Get the name of the loader we need\n    ext = ext ? ext.toLowerCase() : null;\n    var loaderName = this.loaderMap[ext] || null;\n    if (loaderName == null) {\n\n      onError(new Error(`Model Loader : No loader specified for '${ ext }' extension`));\n\n      return;\n\n    }\n\n    // If the loader isn't already cached the lets load it\n    var loader = this.cachedLoaders[loaderName] || null;\n\n    if (loader != null) {\n\n      loadercb(loader);\n\n    } else {\n\n      this.getLoader(loaderName, this.manager, loader => {\n\n        this.cachedLoaders[loaderName] = loader;\n        loadercb(loader);\n\n      });\n\n    }\n\n  },\n\n  load: function (url, onLoad, onProgress, onError, extOverride = null) {\n\n    onError = onError || (e => console.error(e));\n\n    // Get the extension associated the file so we can get the\n    // appropriate loader\n    var extMatches = url.match(/\\.([^\\.\\/\\\\]+)$/);\n    var urlext = extMatches ? extMatches[1] : null;\n    var ext = extOverride || urlext;\n\n    if (url == null) {\n\n      onError(new Error('Model Loader : No file extension found'));\n      return;\n\n    }\n\n    this.extToLoader(ext, this.manager, loader => {\n\n      loader.load(url, res => {\n\n        onLoad(this.formResult(res));\n\n      }, onProgress, onError);\n\n    }, onError);\n\n  },\n\n  parse: function (data, ext, onLoad, onError) {\n\n    onError = onError || (e => console.error(e));\n\n    this.extToLoader(ext, this.manager, loader => {\n\n      onLoad(this.formResult(loader.parse(data)));\n\n    }, onError);\n\n  }\n\n};\n\nexport {ModelLoader}\n","var render, staticRenderFns\nimport script from \"./ModelViewer.vue?vue&type=script&lang=js\"\nexport * from \"./ModelViewer.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\n  import base from '../mixins/base-mixin.vue'\n  import {AnimationMixer} from 'three';\n  import {ModelLoader} from \"../loaders\";\n\n  export default {\n    name: 'model-viewer',\n    mixins: [base],\n    data() {\n      return {\n        loader: new ModelLoader()\n      }\n    },\n    created() {\n\n    },\n    methods: {\n      load() {\n        if (!this.src) return;\n        if (this.object) {\n          this.wrapper.remove(this.object);\n        }\n        this.loader.load(this.src, data => {\n          //env maps\n          if (this.envMap !== null) {\n            data.model.traverse(node => {\n              if (node.material && (node.material.isMeshStandardMaterial ||\n                (node.material.isShaderMaterial && node.material.envMap !== undefined))) {\n                node.material.envMap = this.envMap;\n                node.material.needsUpdate = true;\n              }\n\n              if (node.isMesh || node.isLight) node.castShadow = true;\n            })\n          }\n          //animations\n          let animations = data.originalResult.animations;\n          if (animations && animations.length) {\n            this.mixer = new AnimationMixer(data.model);\n            for (let i = 0; i < animations.length; i++) {\n              let animation = animations[i];\n              // There's .3333 seconds junk at the tail of the Monster animation that\n              // keeps it from looping cleanly. Clip it at 3 seconds\n              if (this.animationTime) {\n                animation.duration = this.animationTime;\n              }\n              let action = this.mixer.clipAction(animation);\n              if (this.playAnimation) {\n                action.play();\n              }\n            }\n          }\n\n          this.addObject(data.model);\n          this.$emit('on-load');\n        }, xhr => {\n          this.$emit('on-progress', xhr);\n        }, err => {\n          console.log(err);\n          this.$emit('on-error', err);\n        });\n      }\n    }\n  }\n\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelViewer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelViewer.vue?vue&type=script&lang=js\"","<template>\n  <section>\n    <GithubCorner></GithubCorner>\n    <main role=\"main\" class=\"container\">\n      <div class=\"mt-5 text-center\">\n        <h2>Vue.JS 3D Model Viewer Example</h2>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-2\">\n          <button type=\"button\" class=\"btn btn-primary btn-block\" @click=\"changeModel('gltf')\">GLTF</button>\n          <button type=\"button\" class=\"btn btn-primary btn-block\" @click=\"changeModel('glb')\">GLTF (GLB)</button>\n          <button type=\"button\" class=\"btn btn-primary btn-block\" @click=\"changeModel('gltf_anim')\">GLTF (Anim)</button>\n        </div>\n        <div class=\"col-md-10\">\n          <ModelViewer\n            :lights=\"lights\"\n            :background-color=\"backgroundColor\"\n            :show-controls=\"true\"\n            :visible-controls=\"visibleControls\"\n            :src=\"src\"\n            :cubemap=\"cubemap\"\n            :statsjs=\"statsjs\"\n            :datgui=\"datgui\"\n            :rotation=\"rotate\"\n            :playAnimation=\"anim\"\n          ></ModelViewer>\n        </div>\n      </div>\n    </main>\n  </section>\n</template>\n<script>\n  import {Vector3, Euler} from 'three';\n\n  import GithubCorner from './components/GithubCorner.vue';\n\n  import ModelViewer from '../src/components/ModelViewer.vue' //develop\n  //import {ModelViewer} from '../dist/vue-3dmodel-viewer.esm' //webpack test\n  //import { ModelViewer } from './../'; // for test\n\n  export default {\n    name: 'app',\n    components: {\n      ModelViewer,\n      GithubCorner\n    },\n    data() {\n      return {\n        models: {\n          'gltf': {\n            src: 'models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf',\n            rotate: new Euler()\n          },\n          'gltf_anim': {\n            src: 'models/gltf/CesiumMan/glTF/CesiumMan.gltf',\n            rotate: new Euler(0, 0, 0),\n            anim: true\n          },\n          'glb': {\n            src: 'models/gltf/BoomBox/glTF-Binary/BoomBox.glb',\n            rotate: new Euler(0, Math.PI, 0)\n          }\n        },\n        lights: [\n          {\n            type: 'hemisphere',\n            skyColor: 0xbbbbff,\n            groundColor: 0x444422,\n            position: new Vector3(0, 1, 0)\n          }/*,\n          {\n            type: 'AmbientLight',\n            color: 0xaaaaaa\n          },\n          {\n            type: 'DirectionalLight',\n            position: { x: 1, y: 1, z: 1 },\n            color: 0xffffff,\n            intensity: 0.8\n          }\n          ,{\n            type: 'ambient',\n            color: 0x1e1e23\n          },\n          {\n            type: 'directional',\n            color: 0xcfcfcf,\n            position: new Vector3(20, 40, -15)\n          }*/\n        ],\n        src: null,\n        backgroundColor: 0xffffff,\n        visibleControls: {help: true, fullscreen: true, download: true},\n        statsjs: true,\n        datgui: true,\n        cubemap: [\n          'textures/cube/Bridge2/posx.jpg',\n          'textures/cube/Bridge2/negx.jpg',\n          'textures/cube/Bridge2/posy.jpg',\n          'textures/cube/Bridge2/negy.jpg',\n          'textures/cube/Bridge2/posz.jpg',\n          'textures/cube/Bridge2/negz.jpg',\n        ],\n        rotate: new Vector3(),\n        anim: true\n      }\n    },\n    mounted() {\n      this.src = this.models.gltf.src;\n    },\n    methods: {\n      changeModel(el) {\n        this.src = this.models[el].src;\n        this.rotate = this.models[el].rotate;\n        this.anim = this.models[el].anim || true;\n      }\n    }\n  }\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5d95ed33\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n"],"sourceRoot":""}